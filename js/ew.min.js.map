{"version":3,"sources":["../../node_modules/@babel/runtime/regenerator/index.js","../../node_modules/regenerator-runtime/runtime.js","../../build/js/FormData.js","../../build/js/Validators.js","../../node_modules/@babel/runtime/helpers/createClass.js","../../node_modules/@babel/runtime/helpers/assertThisInitialized.js","../../node_modules/@babel/runtime/helpers/inheritsLoose.js","../../node_modules/@babel/runtime/helpers/defineProperty.js","../../build/js/FormBase.js","../../build/js/Field.js","../../build/js/Form.js","../../build/js/AjaxLookup.js","../../build/js/SelectionListOption.js","../../build/js/AutoSuggest.js","../../build/js/Forms.js","../../build/js/functions.js","../../build/js/Select2CustomOption.js","../../build/js/main.js","../../build/js/multipage.js","../../build/js/jquery.js","../../build/js/fields.js","../../build/js/adminlte.js"],"names":["regenerator","runtime","exports","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","method","arg","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","__await","then","unwrapped","error","undefined","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","Blob","FormData","normalizeValue","_ref","filename","File","lastModified","ensureArgs","args","expected","normalizeArgs","String","each","arr","cb","global","window","_FormData","_send","XMLHttpRequest","send","_fetch","Request","fetch","_sendBeacon","navigator","sendBeacon","stringTag","a","b","d","c","blob","t","Date","defineProperties","lastModifiedDate","FormDataPolyfill","form","_data","elements","elm","disabled","files","file","append","options","opt","selected","checked","replace","normalizeLinefeeds","_proto","arguments","_normalizeArgs$apply","apply","map","delete","entries","_iterator","_step","_context","t0","t1","_createForOfIteratorHelperLoose","callback","thisArg","_step2","_iterator2","_step2$value","get","getAll","has","_iterator3","_step3","_step3$value","_context2","set","_iterator4","_step4","_step4$value","_context3","_step5","fd","_iterator5","_step5$value","_step6","boundary","Math","random","chunks","_iterator6","_step6$value","setRequestHeader","toLowerCase","_hasContentType","data","input","init","body","url","el","ew","checkInteger","userLevelId","language","phrase","parseInt","id","elId","document","getElementById","trim","level","sameText","userLevelName","includes","fieldName","_$el$data","$el","$","$p","closest","substr","css","hasValue","required","elFn","fileRequired","startsWith","elPwd","mismatchPassword","x","z","val","between","isMaskedPassword","hasClass","passwordStrength","raw","match","RegExp","escapeRegExChars","INVALID_USERNAME_CHARACTERS","username","ENCRYPTED_PASSWORD","INVALID_PASSWORD_CHARACTERS","password","getValue","checkEmail","email","cnt","checkEmails","dateFormat","phraseId","newSubStr","DATE_SEPARATOR","checkShortDate","checkDate","checkShortEuroDate","checkEuroDate","checkShortUSDate","checkUSDate","checkDateDef","DATE_FORMAT","datetime","checkTime","time","checkNumber","min","max","checkRange","range","integer","checkPhone","phone","checkZip","zip","checkCreditCard","creditCard","checkSsn","ssn","checkGuid","guid","pattern","checkByRegEx","regex","_len","Array","_key","concat","custom","captcha","_grecaptcha","grecaptcha","getResponse","dataset","recaptcha","_defineProperties","target","props","descriptor","createClass","Constructor","protoProps","staticProps","assertThisInitialized","ReferenceError","inheritsLoose","subClass","superClass","FormBase","pageId","_initiated","$element","htmlForm","initSearchPanel","modified","validateRequired","validate","emptyRow","multiPage","autoSuggests","lists","disableForm","getForm","find","prop","addClass","enableForm","$form","removeClass","appendHidden","$dp","attr","ar","serializeArray","o","appendTo","canSubmit","updateTextArea","$dps","dp","j","test","$els","not","submit","action","getList","compileTemplates","_i","_lists","list","template","isString","templates","is","getElement","getElements","selector","updateLists","rowindex","isNumber","confirm","querySelector","removeSpinner","fixId","multiple","split","prefix","endsWith","join","actions","promises","_i2","_Object$entries","_Object$entries$_i","parents","parentFields","parent","ajax","isBoolean","pvalues","getOptionValues","updateOptions","setTimeout","shift","AJAX_DELAY","all","trigger","source","console","log","createAutoSuggest","settings","assign","limit","AUTO_SUGGEST_MAX_ENTRIES","autoSuggestSettings","AutoSuggest","initEditors","filter","ed","active","save","destroyEditor","destroy","onError","msg","initUpload","index","later","upload","setupFilters","e","filters","filterList","$sf","toggleClass","$df","$delete","$save","saveFilters","SEARCH_FILTER_OPTION","localStorage","setItem","JSON","stringify","$body","currentPage","dataType","success","always","off","on","prompt","sanitize","prevAll","remove","$submenu","isArray","splice","insertBefore","TOKEN_NAME_KEY","TOKEN_NAME","ANTIFORGERY_TOKEN_KEY","ANTIFORGERY_TOKEN","IS_LOGGEDIN","IS_SYS_ADMIN","CURRENT_USER_NAME","item","getItem","parseJson","grep","show","hide","isSearch","hasFormData","collapse","text","render","loadjs","ready","bind","$tab","getAttribute","$panel","$container","width","CONFIRM_CANCEL","href","location","forms","add","Field","fldvar","validators","invalid","_createForOfIteratorHelperLoose$1","validator","addValidator","addError","_this$_error","_error","_objectSpread","clearErrors","clearValidators","_element","shouldValidate","updateFeedback","errorMessage","jQuery","html","setInvalid","focus","setFocus","from","_checkbox","_this$_element","_this$_element$id","Form","_this","_FormBase","addField","fields","getField","addFields","_createForOfIteratorHelperLoose$2","field","addCustomError","makeVisible","element","gotoPageByElement","$pane","click","validateFields","rowIndex","row","_Object$values","_objectSpread$1","_i3","_Object$values2","AjaxLookup","elementId","formElement","m","pf","debounce","recordCount","formatResult","isAutoSuggest","jsRenderHelpers","displayValue","generateRequest","page","LANGUAGE_ID","getUserParams","arp","MULTIPLE_OPTION_SEPARATOR","getUrl","query","start","params","URLSearchParams","q","n","rnd","getApiUrl","API_LOOKUP_ACTION","prepare","transform","results","totalRecordCount","records","_isAutoSuggest","SelectionListOption","emptyObj","typeahead","timer","$input","minWidth","maxHeight","highlight","hint","minLength","delay","display","forceSelection","forceSelect","setValue","v","findIndex","option","syncResults","asyncResults","cancel","count","menu","$node","more","ta","datasets","_append","scrollTop","$lastSuggestion","outerHeight","change","isOpen","empty","$item","getActiveSelectable","blur","close","tpl","$more","one","preventDefault","stopPropagation","$menu","$dataset","max-height","overflow-y","Forms","_forms","f","ids","_fixLayoutHeightTimer","currentUrl","URL","$document","_removeSpinner","initIcons","tooltip","container","IS_MOBILE","placement","sanitizeFn","initPasswordOptions","pStrength","MIN_PASSWORD_STRENGTH","$this","changeBackground","backgrounds","passwordValidFrom","onPasswordStrengthChanged","strength","percentage","$pst","$pb","outerWidth","pct","pGenerator","passwordLength","GENERATE_PASSWORD_LENGTH","uppercase","GENERATE_PASSWORD_UPPERCASE","lowercase","GENERATE_PASSWORD_LOWERCASE","numbers","GENERATE_PASSWORD_NUMBER","specialChars","GENERATE_PASSWORD_SPECIALCHARS","onPasswordGenerated","pwd","triggerHandler","PATH_BASE","API_URL","USE_URL_REWRITE","route","encodeURIComponent","API_ACTION_NAME","qs","initExportLinks","fileDownload","initMultiSelectCheckboxes","$cbs","_update","len","win","jq","swal","Swal","doc","$doc","isHtml","fire","_objectSpread$2","sweetAlertSettings","allowOutsideClick","allowEscapeKey","onBeforeOpen","showLoading","cache","xhrFields","responseType","textStatus","jqXHR","createObjectURL","createElement","getResponseHeader","style","download","appendChild","objectUrl","revokeObjectURL","fail","showValidationMessage","response","lazyLoad","LAZY_LOAD","src","initLightboxes","USE_COLORBOX","lightboxSettings","title","current","previous","xhrError","imgError","colorbox","rel","initPdfObjects","EMBED_PDF","PDFObjectOptions","PDFObject","embed","fallbackLink","initTooltips","popover","parse","_prompt","confirmButtonText","showCancelButton","isFunction","cancelButtonText","inputValidator","toast","toastOptions","Toasts","position","toUpperCase","substring","children","first","showToast","class","autohide","autoHideSuccessMessage","autoHideSuccessMessageDelay","$f","parentId","isUndefined","childFields","promise","els","getId","names","$elf","typ","elf","_updateOptions","autoFillTargetFields","autoFill","fo","frmo","$obj","clearOptions","addOpt","valid","newOption","selectOption","_updateSibling","lookupOptions","ds","isModalLookup","root","convertToBool","_export","sel","fobj","keySelected","_alert","serialize","end","isHiddenTextArea","isHidden","selectAll","setColor","$row","$tbl","ROWTYPE_ADD","ROWTYPE_EDIT","clearSelected","tbl","rows","r","$r","clearDelete","$tr","siblings","addBack","clickDelete","setupTable","force","$rows","tBodies","mouseOver","mouseOut","$target","cells","last","div","parentsUntil","RESPONSIVE_TABLE_CLASS","rowSpan","clientHeight","offsetHeight","attach","edit","sw","setupGrid","grid","$grid","USE_OVERLAY_SCROLLBARS","overlayScrollbars","overlayScrollbarsOptions","isObject","table","getAncestorBy","node","parentNode","nodeType","classList","contains","o1","o2","lookup","getOptionTexts","lo","hasAttribute","removeAll","valueSeparator","sep","df","isValue","optionHtml","OPTION_HTML_TEMPLATE","optionsHtml","MAX_OPTION_COUNT","frm","lf","df1","df2","df3","df4","innerHTML","selectedIndex","_createForOfIteratorHelperLoose$3","vals","opts","isAutoSelect","_ajaxStop","lastPageSubmit","executeScript","matches","matchAll","addScript","stripScript","scr","removeScript","getContent","getOptions","modalDialogHide","$dlg","removeData","$bd","ewjtable","unbind","className","reload","dest_array","destEl","v0","pid","post","$tt","trig","dir","CSS_FLIP","content","wd","$tip","getTipElement","object_value","checkDateEx","format","arDT","re","sYear","sMonth","sDay","exec","wrksep","arD","unformatYear","checkDay","yr","UNFORMAT_YEAR","checkYear","checkMonth","maxDay","ts","THOUSANDS_SEP","DECIMAL_POINT","stringToFloat","parseFloat","str","min_value","max_value","isNull","TIME_SEPARATOR","showMessage","_arg$target","p","$div","$alert","$heading","detach","$content","w","$toast","floor","redirect","search","ajaxSend","event","jqxhr","apiUrl","isApi","allowed","hostname","API_JWT_TOKEN","IS_WINDOWS_AUTHENTICATION","API_JWT_AUTHORIZATION_HEADER","ajaxStart","addSpinner","ajaxStop","ajaxError","selectId","select2","amd","require","Utils","ResultsList","InfiniteScroll","HidePlaceholder","SelectOnClose","selectOptions","resultsAdapter","dropdown","columns","customOption","Decorate","Select2CustomOption","decorated","$results","displayMessage","escapeMarkup","clear","hideLoading","$message","message","sort","cols","$option","attrs","role","aria-selected","Element","msMatchesSelector","webkitMatchesSelector","_resultId","setAttribute","StoreData","getSelect2CustomOptionClass","iconClass","templateResult","placeholder","selectOnClose","term","processResults","pagination","minimumResultsForSearch","Infinity","timeoutTime","keepAliveTimer","counter","useKeepAlive","SESSION_KEEP_ALIVE_INTERVAL","IS_AUTOLOGIN","keepAlive","API_SESSION_ACTION","token","resetTimer","SESSION_TIMEOUT_COUNTDOWN","SESSION_TIMEOUT","timeout","timerInterval","showConfirmButton","timerProgressBar","setInterval","sec","timeleft","round","getTimerLeft","textContent","onClose","clearInterval","setTimer","dismiss","DismissReason","TIMEOUT_URL","keepAliveInterval","select","_positionDropdown","_resizeDropdown","parm","$fld","$fld2","hasY","$cond","hasCond","$and","opr","$opr2","opr2","isBetween","isNullOpr","isNullOpr2","hideOpr2","hideX","hideY","divId","tmplId","classId","exportType","export","enabled","replaceWith","querySelectorAll","subtmpl","rowspan","childNodes","views","scripts","tmpl","$meta","PDF_STYLESHEET_FILENAME","PROJECT_STYLESHEET_FILENAME","responseText","customexport","searchParams","param","idx","infix","fld","bool","nelm","oelm","fnelm","srcElement","currentForm","isPost","isMultiple","_success","_submit","k","jquery","shiftKey","ctrlKey","$cb","$tpl","$lastrow","clone","suffix","$elkeycnt","keycnt","data-rowindex","attributes","after","scrollHeight","rowidx","keycntname","_delete","$keyact","addOptionDialog","_submitSuccess","_results","lnk","objName","API_OBJECT_NAME","modal","linkField","dfs","displayFields","ffs","filterFields","pfs","lfv","ff","txt","$lu","nv","arOpt","obj2","ar2","_results2","_results$error","description","_results3","failureMessage","_fail","status","statusText","btn","$btn","API_ADD_ACTION","filterFieldVars","keypress","which","nodeName","modalDialog","showing","size","_caption","$lnk","caption","_button","_always","_result$error","pathname","_current","view","footer","cf","ct","alert","modalLookupDialog","_timer","$search","oid","_format","setAutoSuggest","txts","useText","srch","arLinkValue","linkValue","paging","pageSize","pageSizes","pageSizeChangeArea","pageList","selecting","selectingCheckboxes","multiselect","listAction","postData","jtParams","recperpage","messages","serverCommunicationError","loadingMessage","spinnerClass","noDataAvailable","pagingInfo","pageSizeChangeLabel","gotoPageLabel","recordsLoaded","selectedRows","selectionChanged","indexOf","toggle","LOOKUP_DELAY","sv","importDialog","$data","$progress","classname","$msg","hideMessage","showProgress","pc","updateProgress","tcnt","totalCount","importProgress","API_PROGRESS_ACTION","API_FILE_TOKEN_NAME","importComplete","fileResults","fileResult","scnt","successCount","fcnt","failCount","showLog","failList","ecnt","importFail","formData","session","SESSION_ID","importUploadOptions","acceptFileTypes","IMPORT_FILE_ALLOWED_EXT","fileupload","API_UPLOAD_ACTION","autoUpload","singleFileUploads","maxFileSize","maxNumberOfFiles","minFileSize","importfiles","ok","filetoken","beforeSend","xhr","importFiles","processfail","errorThrown","progressall","loaded","total","uploadProgress","hdr","emailDialog","Validators","emails","MAX_EMAIL_RECIPIENT","exportid","exportWithCharts","arUrl","pos","height","ypos","offset","top","pageY","xpos","left","pageX","drillDownCharts","cht","dispose","_convert","responseJSON","creditcard_string","tempdigit","doubledigit","checkdigit","email_cnt","arEmails","nid","readonly","$ft","$fn","$fa","$fs","$exts","$maxsize","$maxfilecount","$label","label","_confirmDelete","_downloadTemplate","_uploadTemplate","uploadUrl","API_JQUERY_UPLOAD_ACTION","exts","maxsize","maxfilecount","multipart","loadImageFileTypes","loadVideoFileTypes","loadAudioFileTypes","filesContainer","uploadTemplateId","downloadTemplateId","uploadTemplate","downloadTemplate","previewMaxWidth","UPLOAD_THUMBNAIL_WIDTH","previewMaxHeight","UPLOAD_THUMBNAIL_HEIGHT","dropZone","pasteZone","readOnly","MULTIPLE_UPLOAD_SEPARATOR","originalEvent","fid","_data$files","l","_data$files2","_data$result","_data$result$files","_data$files3","updateDropdownPosition","Event","config","regexBits","separator","thousandsSeparator","decimalSeparator","decimal","isFinite","decIndex","newOutput","isNeg","output","decPlaces","decimalPlaces","decSep","thouSep","toFixed","lastIndexOf","makeArray","def","timesep","moment","$tables","initGridPanel","renderJsTemplates","initForms","adminlte","Treeview","_jQueryInterface","$window","IS_SCREEN_SM_MIN","$rpt","mh","toggleGroup","USE_JAVASCRIPT_MESSAGE","currentTarget","$i","exportId","exportUrl","now","exp","exportCharts","charts","toBase64Image","chart_engine","stream_type","stream","parameters","API_EXPORT_CHART_ACTION","layout","fixLayoutHeight","tblVar","events","fldVar","matchMedia","MOBILE_DETECT","MobileDetect","userAgent","mobile","IS_IE","version","MultiPage","formid","formID","pageIndex","maxPageIndex","minPageIndex","pageIndexes","$pages","$collapses","isTab","isCollapse","hideDisabledButton","hideInactivePages","lockTabs","hideTabs","showPagerTop","showPagerBottom","pagerTemplate","_show","_properties","before","pageShow","gotoPage","$page","eq","gotoPageByIndex","gotoPageByElementId","togglePage","$tabs","googleMaps","google","maps","setCenter","$bodies","functions","debugMode","DEBUG","setSessionTimer","initPage","hash","animate","zIndex","extend","isDate","when","periodic","interval","clearTimeout","rec","_this$data","visible","_this$data2","toNumber","parseNumber","toDate","parseDate","toJsDate","_toggle","$relativeTarget","treeviewMenu","$text"],"mappings":"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","sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/* global FormData self Blob File */\r\n/* eslint-disable no-inner-declarations */\r\n\r\nif (typeof Blob !== 'undefined' && (typeof FormData === 'undefined' || !FormData.prototype.keys)) {\r\n  const global = typeof window === 'object'\r\n    ? window\r\n    : typeof self === 'object' ? self : this\r\n\r\n  // keep a reference to native implementation\r\n  const _FormData = global.FormData\r\n\r\n  // To be monkey patched\r\n  const _send = global.XMLHttpRequest && global.XMLHttpRequest.prototype.send\r\n  const _fetch = global.Request && global.fetch\r\n  const _sendBeacon = global.navigator && global.navigator.sendBeacon\r\n\r\n  // Unable to patch Request constructor correctly\r\n  // const _Request = global.Request\r\n  // only way is to use ES6 class extend\r\n  // https://github.com/babel/babel/issues/1966\r\n\r\n  const stringTag = global.Symbol && Symbol.toStringTag\r\n\r\n  // Add missing stringTags to blob and files\r\n  if (stringTag) {\r\n    if (!Blob.prototype[stringTag]) {\r\n      Blob.prototype[stringTag] = 'Blob'\r\n    }\r\n\r\n    if ('File' in global && !File.prototype[stringTag]) {\r\n      File.prototype[stringTag] = 'File'\r\n    }\r\n  }\r\n\r\n  // Fix so you can construct your own File\r\n  try {\r\n    new File([], '') // eslint-disable-line\r\n  } catch (a) {\r\n    global.File = function File (b, d, c) {\r\n      const blob = new Blob(b, c)\r\n      const t = c && void 0 !== c.lastModified ? new Date(c.lastModified) : new Date()\r\n\r\n      Object.defineProperties(blob, {\r\n        name: {\r\n          value: d\r\n        },\r\n        lastModifiedDate: {\r\n          value: t\r\n        },\r\n        lastModified: {\r\n          value: +t\r\n        },\r\n        toString: {\r\n          value () {\r\n            return '[object File]'\r\n          }\r\n        }\r\n      })\r\n\r\n      if (stringTag) {\r\n        Object.defineProperty(blob, stringTag, {\r\n          value: 'File'\r\n        })\r\n      }\r\n\r\n      return blob\r\n    }\r\n  }\r\n\r\n  function normalizeValue ([value, filename]) {\r\n    if (value instanceof Blob) {\r\n      // Should always returns a new File instance\r\n      // console.assert(fd.get(x) !== fd.get(x))\r\n      value = new File([value], filename, {\r\n        type: value.type,\r\n        lastModified: value.lastModified\r\n      })\r\n    }\r\n\r\n    return value\r\n  }\r\n\r\n  function ensureArgs (args, expected) {\r\n    if (args.length < expected) {\r\n      throw new TypeError(`${expected} argument required, but only ${args.length} present.`)\r\n    }\r\n  }\r\n\r\n  function normalizeArgs (name, value, filename) {\r\n    return value instanceof Blob\r\n      // normalize name and filename if adding an attachment\r\n      ? [String(name), value, filename !== undefined\r\n        ? filename + '' // Cast filename to string if 3th arg isn't undefined\r\n        : typeof value.name === 'string' // if name prop exist\r\n          ? value.name // Use File.name\r\n          : 'blob'] // otherwise fallback to Blob\r\n\r\n      // If no attachment, just cast the args to strings\r\n      : [String(name), String(value)]\r\n  }\r\n\r\n  // normalize linefeeds for textareas\r\n  // https://html.spec.whatwg.org/multipage/form-elements.html#textarea-line-break-normalisation-transformation\r\n  function normalizeLinefeeds (value) {\r\n    return value.replace(/\\r\\n/g, '\\n').replace(/\\n/g, '\\r\\n')\r\n  }\r\n\r\n  function each (arr, cb) {\r\n    for (let i = 0; i < arr.length; i++) {\r\n      cb(arr[i])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @implements {Iterable}\r\n   */\r\n  class FormDataPolyfill {\r\n    /**\r\n     * FormData class\r\n     *\r\n     * @param {HTMLElement=} form\r\n     */\r\n    constructor (form) {\r\n      this._data = Object.create(null)\r\n\r\n      if (!form) return this\r\n\r\n      const self = this\r\n\r\n      each(form.elements, elm => {\r\n        if (!elm.name || elm.disabled || elm.type === 'submit' || elm.type === 'button') return\r\n\r\n        if (elm.type === 'file') {\r\n          const files = elm.files && elm.files.length\r\n            ? elm.files\r\n            : [new File([], '', { type: 'application/octet-stream' })] // #78\r\n\r\n          each(files, file => {\r\n            self.append(elm.name, file)\r\n          })\r\n        } else if (elm.type === 'select-multiple' || elm.type === 'select-one') {\r\n          each(elm.options, opt => {\r\n            !opt.disabled && opt.selected && self.append(elm.name, opt.value)\r\n          })\r\n        } else if (elm.type === 'checkbox' || elm.type === 'radio') {\r\n          if (elm.checked) self.append(elm.name, elm.value)\r\n        } else {\r\n          const value = elm.type === 'textarea' ? normalizeLinefeeds(elm.value) : elm.value\r\n          self.append(elm.name, value)\r\n        }\r\n      })\r\n    }\r\n\r\n    /**\r\n     * Append a field\r\n     *\r\n     * @param   {string}           name      field name\r\n     * @param   {string|Blob|File} value     string / blob / file\r\n     * @param   {string=}          filename  filename to use with blob\r\n     * @return  {undefined}\r\n     */\r\n    append (name, value, filename) {\r\n      ensureArgs(arguments, 2)\r\n      ;[name, value, filename] = normalizeArgs.apply(null, arguments)\r\n      const map = this._data\r\n\r\n      if (!map[name]) map[name] = []\r\n\r\n      map[name].push([value, filename])\r\n    }\r\n\r\n    /**\r\n     * Delete all fields values given name\r\n     *\r\n     * @param   {string}  name  Field name\r\n     * @return  {undefined}\r\n     */\r\n    delete (name) {\r\n      ensureArgs(arguments, 1)\r\n      delete this._data[String(name)]\r\n    }\r\n\r\n    /**\r\n     * Iterate over all fields as [name, value]\r\n     *\r\n     * @return {Iterator}\r\n     */\r\n    * entries () {\r\n      const map = this._data\r\n\r\n      for (const name in map) {\r\n        for (const value of map[name]) {\r\n          yield [name, normalizeValue(value)]\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Iterate over all fields\r\n     *\r\n     * @param   {Function}  callback  Executed for each item with parameters (value, name, thisArg)\r\n     * @param   {Object=}   thisArg   `this` context for callback function\r\n     * @return  {undefined}\r\n     */\r\n    forEach (callback, thisArg) {\r\n      ensureArgs(arguments, 1)\r\n      for (const [name, value] of this) {\r\n        callback.call(thisArg, value, name, this)\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Return first field value given name\r\n     * or null if non existen\r\n     *\r\n     * @param   {string}  name      Field name\r\n     * @return  {string|File|null}  value Fields value\r\n     */\r\n    get (name) {\r\n      ensureArgs(arguments, 1)\r\n      const map = this._data\r\n      name = String(name)\r\n      return map[name] ? normalizeValue(map[name][0]) : null\r\n    }\r\n\r\n    /**\r\n     * Return all fields values given name\r\n     *\r\n     * @param   {string}  name  Fields name\r\n     * @return  {Array}         [{String|File}]\r\n     */\r\n    getAll (name) {\r\n      ensureArgs(arguments, 1)\r\n      return (this._data[String(name)] || []).map(normalizeValue)\r\n    }\r\n\r\n    /**\r\n     * Check for field name existence\r\n     *\r\n     * @param   {string}   name  Field name\r\n     * @return  {boolean}\r\n     */\r\n    has (name) {\r\n      ensureArgs(arguments, 1)\r\n      return String(name) in this._data\r\n    }\r\n\r\n    /**\r\n     * Iterate over all fields name\r\n     *\r\n     * @return {Iterator}\r\n     */\r\n    * keys () {\r\n      for (const [name] of this) {\r\n        yield name\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Overwrite all values given name\r\n     *\r\n     * @param   {string}    name      Filed name\r\n     * @param   {string}    value     Field value\r\n     * @param   {string=}   filename  Filename (optional)\r\n     * @return  {undefined}\r\n     */\r\n    set (name, value, filename) {\r\n      ensureArgs(arguments, 2)\r\n      const args = normalizeArgs.apply(null, arguments)\r\n      this._data[args[0]] = [[args[1], args[2]]]\r\n    }\r\n\r\n    /**\r\n     * Iterate over all fields\r\n     *\r\n     * @return {Iterator}\r\n     */\r\n    * values () {\r\n      for (const [, value] of this) {\r\n        yield value\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Return a native (perhaps degraded) FormData with only a `append` method\r\n     * Can throw if it's not supported\r\n     *\r\n     * @return {FormData}\r\n     */\r\n    ['_asNative'] () {\r\n      const fd = new _FormData()\r\n\r\n      for (const [name, value] of this) {\r\n        fd.append(name, value)\r\n      }\r\n\r\n      return fd\r\n    }\r\n\r\n    /**\r\n     * [_blob description]\r\n     *\r\n     * @return {Blob} [description]\r\n     */\r\n    ['_blob'] () {\r\n      const boundary = '----formdata-polyfill-' + Math.random()\r\n      const chunks = []\r\n\r\n      for (const [name, value] of this) {\r\n        chunks.push(`--${boundary}\\r\\n`)\r\n\r\n        if (value instanceof Blob) {\r\n          chunks.push(\r\n            `Content-Disposition: form-data; name=\"${name}\"; filename=\"${value.name}\"\\r\\n`,\r\n            `Content-Type: ${value.type || 'application/octet-stream'}\\r\\n\\r\\n`,\r\n            value,\r\n            '\\r\\n'\r\n          )\r\n        } else {\r\n          chunks.push(\r\n            `Content-Disposition: form-data; name=\"${name}\"\\r\\n\\r\\n${value}\\r\\n`\r\n          )\r\n        }\r\n      }\r\n\r\n      chunks.push(`--${boundary}--`)\r\n\r\n      return new Blob(chunks, {\r\n        type: 'multipart/form-data; boundary=' + boundary\r\n      })\r\n    }\r\n\r\n    /**\r\n     * The class itself is iterable\r\n     * alias for formdata.entries()\r\n     *\r\n     * @return  {Iterator}\r\n     */\r\n    [Symbol.iterator] () {\r\n      return this.entries()\r\n    }\r\n\r\n    /**\r\n     * Create the default string description.\r\n     *\r\n     * @return  {string} [object FormData]\r\n     */\r\n    toString () {\r\n      return '[object FormData]'\r\n    }\r\n  }\r\n\r\n  if (stringTag) {\r\n    /**\r\n     * Create the default string description.\r\n     * It is accessed internally by the Object.prototype.toString().\r\n     */\r\n    FormDataPolyfill.prototype[stringTag] = 'FormData'\r\n  }\r\n\r\n  // Patch xhr's send method to call _blob transparently\r\n  if (_send) {\r\n    const setRequestHeader = global.XMLHttpRequest.prototype.setRequestHeader\r\n\r\n    /**\r\n     * @param {string} name\r\n     * @param {string} value\r\n     * @returns {undefined}\r\n     * @see https://xhr.spec.whatwg.org/#dom-xmlhttprequest-setrequestheader\r\n     */\r\n    global.XMLHttpRequest.prototype.setRequestHeader = function (name, value) {\r\n      setRequestHeader.call(this, name, value)\r\n      if (name.toLowerCase() === 'content-type') this._hasContentType = true\r\n    }\r\n\r\n    /**\r\n     * @param {ArrayBuffer|ArrayBufferView|Blob|Document|FormData|string=} data\r\n     * @return {undefined}\r\n     * @see https://xhr.spec.whatwg.org/#the-send()-method\r\n     */\r\n    global.XMLHttpRequest.prototype.send = function (data) {\r\n      // need to patch send b/c old IE don't send blob's type (#44)\r\n      if (data instanceof FormDataPolyfill) {\r\n        const blob = data['_blob']()\r\n        if (!this._hasContentType) this.setRequestHeader('Content-Type', blob.type)\r\n        _send.call(this, blob)\r\n      } else {\r\n        _send.call(this, data)\r\n      }\r\n    }\r\n  }\r\n\r\n  // Patch fetch's function to call _blob transparently\r\n  if (_fetch) {\r\n    const _fetch = global.fetch\r\n\r\n    global.fetch = function (input, init) {\r\n      if (init && init.body && init.body instanceof FormDataPolyfill) {\r\n        init.body = init.body['_blob']()\r\n      }\r\n\r\n      return _fetch.call(this, input, init)\r\n    }\r\n  }\r\n\r\n  // Patch navigator.sendBeacon to use native FormData\r\n  if (_sendBeacon) {\r\n    global.navigator.sendBeacon = function (url, data) {\r\n      if (data instanceof FormDataPolyfill) {\r\n        data = data['_asNative']()\r\n      }\r\n      return _sendBeacon.call(this, url, data)\r\n    }\r\n  }\r\n\r\n  global['FormData'] = FormDataPolyfill\r\n}\r\n","import $ from 'jquery';\n\n/**\n * User level ID validator\n */\nexport function userLevelId(el) {\n    if (el && !ew.checkInteger(el.value))\n        return { userLevelId: ew.language.phrase(\"UserLevelIDInteger\") };\n    var level = parseInt(el.value, 10);\n    if (level < 1)\n        return { userLevelId: ew.language.phrase(\"UserLevelIDIncorrect\") };\n    return false;\n}\n\n/**\n * User level name validator\n * @param {string} id User ID Field input element ID\n */\nexport function userLevelName(id) {\n    return function(el) {\n        let elId = document.getElementById(\"x_\" + id);\n        if (elId && el) {\n            let name = el.value.trim(),\n                level = parseInt(elId.value.trim(), 10);\n            if (level === 0 && !ew.sameText(name, \"Default\")) {\n                return { userLevelName: ew.language.phrase(\"UserLevelDefaultName\") };\n            } else if (level === -1 && !ew.sameText(name, \"Administrator\")) {\n                return { userLevelName: ew.language.phrase(\"UserLevelAdministratorName\") };\n            } else if (level === -2 && !ew.sameText(name, \"Anonymous\")) {\n                return { userLevelName: ew.language.phrase(\"UserLevelAnonymousName\") };\n            } else if (level > 0 && [\"anonymous\", \"administrator\", \"default\"].includes(name.toLowerCase())) {\n                return { userLevelName: ew.language.phrase(\"UserLevelNameIncorrect\") };\n            }\n        }\n        return false;\n    };\n}\n\n/**\n * Required validator\n */\nexport function required(fieldName) {\n    return function(el) {\n        let $el = $(el),\n            $p = $el.closest(\"#r_\" + $el.data(\"field\")?.substr(2)); // Find the row\n        if (!$p[0])\n            $p = $el.closest(\"[id^=el]\"); // Find the span\n        if ($p.css(\"display\") == \"none\") { // Hidden by .visible()\n            return false;\n        }\n        if (el && !ew.hasValue(el)) {\n            return { required: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName) };\n        }\n        return false;\n    }\n}\n\n/**\n * File required validator\n */\nexport function fileRequired(fieldName) {\n    return function(el) {\n        let elFn = document.getElementById(\"fn_\" + el.id);\n        if (elFn && !ew.hasValue(elFn)) {\n            return { fileRequired: ew.language.phrase(\"EnterRequiredField\").replace(\"%s\", fieldName) };\n        }\n        return false;\n    }\n}\n\n/**\n * Mismatch password validator\n */\nexport function mismatchPassword(el) {\n    let id;\n    if (el.id.startsWith(\"c_\")) // Confirm Password field in Register page\n        id = el.id.replace(/^c_/, \"x_\");\n    else if (el.id == \"cpwd\") // Change Password page\n        id = \"npwd\";\n    let elPwd = document.getElementById(id);\n    if (el.value !== elPwd.value) {\n        return { mismatchPassword: ew.language.phrase(\"MismatchPassword\") };\n    }\n    return false;\n}\n\n/**\n * Between validator\n */\nexport function between(el) {\n    let x, z;\n    if (el.id.startsWith(\"y_\")) {\n        x = document.getElementById(el.id.replace(/^y_/, \"x_\"));\n        z = document.getElementById(el.id.replace(/^y_/, \"z_\"));\n    }\n    if (ew.hasValue(x) && $(z).val() == \"BETWEEN\" && !ew.hasValue(el)) {\n        return { between: ew.language.phrase(\"EnterValue2\") };\n    }\n    return false;\n}\n\n/**\n * Password strength validator\n */\nexport function passwordStrength(el) {\n    let $el = $(el);\n    if (!ew.isMaskedPassword(el) && $el.hasClass(\"ew-password-strength\") && !$el.data(\"validated\")) {\n        return { passwordStrength: ew.language.phrase(\"PasswordTooSimple\") };\n    }\n    return false;\n}\n\n/**\n * User name validator\n */\nexport function username(raw) {\n    return function(el) {\n        if (!raw && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_USERNAME_CHARACTERS) + ']')))\n            return { username: ew.language.phrase(\"InvalidUsernameChars\") };\n        return false;\n    }\n}\n\n/**\n * Password validator\n */\nexport function password(raw) {\n    return function(el) {\n        if (!raw && !ew.ENCRYPTED_PASSWORD && el.value.match(new RegExp('[' + ew.escapeRegExChars(ew.INVALID_PASSWORD_CHARACTERS) + ']')))\n            return { password: ew.language.phrase(\"InvalidPasswordChars\") };\n        return false;\n    }\n}\n\n/**\n * Email validator\n */\nexport function email(el) {\n    let value = ew.getValue(el);\n    if (!ew.checkEmail(value)) {\n        return { email: ew.language.phrase(\"IncorrectEmail\") };\n    }\n    return false;\n}\n\n/**\n * Emails validator\n */\nexport function emails(cnt, err) {\n    return function(el) {\n        let value = ew.getValue(el);\n        if (!ew.checkEmails(value, cnt)) {\n            return { email: err };\n        }\n        return false;\n    }\n}\n\n/**\n * DateTime validator\n * @param {number} dateFormat DateTime format ID\n */\nexport function datetime(dateFormat) {\n    return function(el) {\n        let fn,\n            phraseId,\n            value = ew.getValue(el),\n            newSubStr = ew.DATE_SEPARATOR;\n        if ([12, 15, 115].includes(dateFormat)) {\n            fn = ew.checkShortDate;\n            phraseId = \"IncorrectShortDateYMD\";\n        } else if ([5, 9, 109].includes(dateFormat)) {\n            fn = ew.checkDate;\n            phraseId = \"IncorrectDateYMD\";\n        } else if ([14, 17, 117].includes(dateFormat)) {\n            fn = ew.checkShortEuroDate;\n            phraseId = \"IncorrectShortDateDMY\";\n        } else if ([7, 11, 111].includes(dateFormat)) {\n            fn = ew.checkEuroDate;\n            phraseId = \"IncorrectDateDMY\";\n        } else if ([13, 16, 116].includes(dateFormat)) {\n            fn = ew.checkShortUSDate;\n            phraseId = \"IncorrectShortDateMDY\";\n        } else if ([6, 10, 110].includes(dateFormat)) {\n            fn = ew.checkUSDate;\n            phraseId = \"IncorrectDateMDY\";\n        } else { // Default date format\n            fn = ew.checkDateDef;\n            phraseId = \"IncorrectDate\";\n            newSubStr = ew.DATE_FORMAT;\n        }\n        if (fn && !fn(value)) {\n            return { datetime: ew.language.phrase(phraseId).replace(/%s/g, newSubStr) };\n        }\n       return false;\n    };\n}\n\n/**\n * Time validator\n */\nexport function time(el) {\n    let value = ew.getValue(el);\n    if (!ew.checkTime(value)) {\n        return { time: ew.language.phrase(\"IncorrectTime\") };\n    }\n    return false;\n}\n\n/**\n * Float validator\n */\nexport function float(el) {\n    let value = ew.getValue(el);\n    if (!ew.checkNumber(value)) {\n        return { time: ew.language.phrase(\"IncorrectFloat\") };\n    }\n    return false;\n}\n\n/**\n * Range validator\n * @param {number} min Min value\n * @param {number} max Max value\n */\nexport function range(min, max) {\n    return function(el) {\n        let value = ew.getValue(el);\n        if (!ew.checkRange(value, min, max)) {\n            return { range: ew.language.phrase(\"IncorrectRange\").replace(\"%1\", min).replace(\"%2\", max) };\n        }\n       return false;\n    };\n}\n\n/**\n * Integer validator\n */\nexport function integer(el) {\n    let value = ew.getValue(el);\n    if (!ew.checkInteger(value)) {\n        return { integer: ew.language.phrase(\"IncorrectInteger\") };\n    }\n    return false;\n}\n\n/**\n * US phone validator\n */\nexport function phone(el) {\n    let value = ew.getValue(el);\n    if (!ew.checkPhone(value)) {\n        return { phone: ew.language.phrase(\"IncorrectPhone\") };\n    }\n    return false;\n}\n\n/**\n * US ZIP validator\n */\nexport function zip(el) {\n    let value = ew.getValue(el);\n    if (!ew.checkZip(value)) {\n        return { zip: ew.language.phrase(\"IncorrectZip\") };\n    }\n    return false;\n}\n\n/**\n * Credit card validator\n */\nexport function creditCard(el) {\n    let value = ew.getValue(el);\n    if (!ew.checkCreditCard(value)) {\n        return { creditCard: ew.language.phrase(\"IncorrectCreditCard\") };\n    }\n    return false;\n}\n\n/**\n * US SSN validator\n */\nexport function ssn(el) {\n    let value = ew.getValue(el);\n    if (!ew.checkSsn(value)) {\n        return { ssn: ew.language.phrase(\"IncorrectSSN\") };\n    }\n    return false;\n}\n\n/**\n * GUID validator\n */\nexport function guid(el) {\n    let value = ew.getValue(el);\n    if (!ew.checkGuid(value)) {\n        return { guid: ew.language.phrase(\"IncorrectGUID\") };\n    }\n    return false;\n}\n/**\n * Regular expression validator\n * @param {string} pattern Regular expression pattern\n */\nexport function regex(pattern) {\n    return function(el) {\n        let value = ew.getValue(el);\n        if (!ew.checkByRegEx(value, pattern)) {\n            return { regex: ew.language.phrase(\"IncorrectField\") };\n        }\n       return false;\n    };\n}\n\n/**\n  * Custom validator\n  * @param {*} fn Function(value, ...args)\n  * @param  {...any} args Additional arguments for the function\n  */\nexport function custom(fn, ...args) {\n    return function(el) {\n        if (typeof fn == \"function\") {\n            let value = ew.getValue(el);\n            if (fn(value, ...args))\n                return { custom: ew.language.phrase(\"IncorrectField\") };\n        }\n        return false;\n    };\n}\n\n/**\n * Captcha validator\n */\nexport function captcha(el) {\n    if (el && !ew.hasValue(el)) {\n        return { captcha: ew.language.phrase(\"EnterValidateCode\") };\n    }\n    return false;\n}\n\n/**\n * reCaptcha validator\n * @param {number} id reCaptcha ID\n */\nexport function recaptcha(el) {\n    if (el && !ew.hasValue(el) && grecaptcha?.getResponse(el.dataset.id) === \"\") {\n        return { recaptcha: ew.language.phrase(\"ClickReCaptcha\") };\n    }\n    return false;\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nmodule.exports = _inheritsLoose;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","import $ from 'jquery';\n\n// Form class\nexport default function FormBase(id, pageId) {\n    var self = this;\n\n    this._initiated = false;\n    this.id = id; // Same ID as the form\n    this.pageId = pageId;\n    this.$element = null; // jQuery object of the form or div\n    this.htmlForm = null; // HTML form element\n    this.initSearchPanel = false; // Expanded by default\n    this.modified = false;\n    this.validateRequired = true;\n    this.validate = null;\n    this.emptyRow = null; // Check empty row\n    this.multiPage = null; // Multi-page\n    this.autoSuggests = {}; // AutoSuggests\n    this.lists = {}; // Dynamic selection lists\n\n    // Disable form\n    this.disableForm = function() {\n        var form = this.getForm();\n        $(form).find(\":submit:not(.dropdown-toggle)\").prop(\"disabled\", true).addClass(\"disabled\");\n    }\n\n    // Enable form\n    this.enableForm = function() {\n        var form = this.getForm(),\n            $form = $(form);\n        $form.find(\".ew-disabled-element\").removeClass(\"ew-disabled-element\").prop(\"disabled\", false);\n        $form.find(\".ew-enabled-element\").removeClass(\"ew-enabled-element\").prop(\"disabled\", true);\n        $form.find(\":submit:not(.dropdown-toggle)\").prop(\"disabled\", false).removeClass(\"disabled\");\n    }\n\n    // Append hidden element with form name\n    this.appendHidden = function(el) {\n        var form = this.getForm(), $form = $(form), $dp = $(el).closest(\".ew-form\"), name = $dp.attr(\"id\") + \"$\" + el.name;\n        if ($form.find(\"input:hidden[name='\" + name + \"']\")[0]) // Already appended\n            return;\n        var ar = $dp.find('[name=\"' + el.name + '\"]').serializeArray();\n        if (ar.length) {\n            ar.forEach(function(o, i) {\n                $('<input type=\"hidden\" name=\"' + name + '\">').val(o.value).appendTo($form);\n            });\n        } else {\n            $('<input type=\"hidden\" name=\"' + name + '\">').val(\"\").appendTo($form);\n        }\n    }\n\n    // Can submit\n    this.canSubmit = function() {\n        var form = this.getForm(),\n            $form = $(form);\n        this.disableForm();\n        this.updateTextArea();\n        if (!this.validate || this.validate() && !$form.find(\".is-invalid\")[0]) {\n            $form.find(\"input[name^=sv_], input[name^=p_], .ew-template input\") // Do not submit these values\n                .prop(\"disabled\", true)\n                .addClass(\"ew-disabled-element\");\n            $form.find(\"[data-readonly=1][disabled]\")\n                .prop(\"disabled\", false)\n                .addClass(\"ew-enabled-element\"); // Submit readonly values\n            var $dps = $($form.find(\"input[name='detailpage']\").map(function(i, el) {\n                return $form.find(\"#\" + el.value).get();\n            }));\n            if ($dps.length > 1) { // Multiple Master/Detail, check element names\n                $dps.each(function(i, dp) {\n                    $(dp).find(\":input\").each(function(j, el) {\n                        if (/^(fn_)?(x|o)\\d*_/.test(el.name)) {\n                            var $els = $dps.not(dp).find(\":input[name='\" + el.name + \"']\");\n                            if ($els.length) { // Elements with same name found\n                                self.appendHidden(el); // Append element with form name\n                                $els.each(function() {\n                                    self.appendHidden(this); // Append elements with same name and form name\n                                });\n                            }\n                        }\n                    });\n                });\n            }\n            return true;\n        } else {\n            this.enableForm();\n        }\n        return false;\n    }\n\n    // Submit\n    this.submit = function(action) {\n        var form = this.getForm();\n        if (this.canSubmit()) {\n            if (action)\n                form.action = action;\n            form.submit();\n        }\n        return false;\n    }\n\n    // Get dynamic selection list by element name or id\n    this.getList = function(name) {\n        name = name.replace(/^(sv_)?[xy](\\d*|\\$rowindex\\$)_|\\[\\]$/g, \"\"); // Remove element name prefix/suffix\n        return this.lists[name];\n    }\n\n    // Compile templates\n    this.compileTemplates = function() {\n        let lists = Object.values(this.lists);\n        for (let list of lists) {\n            if (list.template && $.isString(list.template))\n                list.template = $.templates(list.template);\n        }\n    }\n\n    // Get the HTML form element\n    this.getForm = function() {\n        if (!this.htmlForm) {\n            this.$element = $(\"#\" + this.id);\n            if (this.$element.is(\"form\")) { // HTML form\n                this.htmlForm = this.$element[0];\n            } else if (this.$element.is(\"div\")) { // HTML div => Grid page\n                this.htmlForm = this.$element.closest(\"form\")[0];\n            }\n        }\n        return this.htmlForm;\n    }\n\n    // Get form element as single element\n    this.getElement = function(name) {\n        if (!this.$element)\n            this.$element = $(\"#\" + this.id);\n        return (name) ? ew.getElement(name, this.$element) : this.$element[0];\n    }\n\n    // Get form element(s) as single element or array of radio/checkbox\n    this.getElements = function(name) {\n        if (!this.$element)\n            this.$element = $(\"#\" + this.id);\n        var selector = \"[name='\" + name + \"']\";\n        selector = \"input\" + selector + \",select\" + selector + \",textarea\" + selector + \",button\" + selector;\n        var $els = this.$element.find(selector);\n        return ($els.length == 0) ? null : ($els.length == 1 && $els.is(\":not([type=checkbox]):not([type=radio])\")) ? $els[0] : $els.get();\n    }\n\n    // Update selection lists\n    // @param {(null|undefined|number)*} rowindex Row index\n    this.updateLists = function(rowindex) {\n        if (rowindex === null) // rowindex == $rowindex$ == null\n            return;\n        if (!$.isNumber(rowindex) && this.pageId == \"grid\")\n            return;\n        var form = this.getForm(), // Set up $element and htmlForm\n            confirm = form.querySelector(\"input#confirm\");\n        if (confirm && confirm.value == \"confirm\") { // Confirm page\n            ew.removeSpinner();\n            return;\n        }\n        var fixId = (id, multiple) => {\n            var t = \"\",\n                i = rowindex,\n                ar = id.split(\" \");\n            if (ar.length > 1) {\n                t = ar[0];\n                i = \"\";\n                id = ar[1];\n            }\n            let prefix = $.isNumber(i) ? \"x\" + i + \"_\" : \"x_\"; // Add row index\n            if (id.startsWith(\"x_\")) // Field element name\n                id = id.replace(/^x_/, prefix);\n            else // Field var\n                id = prefix + id;\n            if (multiple && !id.endsWith(\"[]\")) // Add [] if select-multiple\n                id += \"[]\";\n            return t ? t + \" \" + id : id;\n        };\n        var selector = Object.entries(this.lists).map(([id, list]) => {\n            return \"[name='\" + fixId(id, list.multiple) + \"']\";\n        }).join();\n        if (!selector || !form.querySelector(selector)) { // Lists not found\n            ew.removeSpinner();\n            return;\n        }\n        var actions = [],\n            promises = [];\n        this.compileTemplates(); // For grid where updateList() called before init()\n        for (let [id, list] of Object.entries(this.lists)) {\n            let parents = list.parentFields.slice().map(parent => fixId(parent)), // Clone and fix index\n                ajax = list.ajax;\n            id = fixId(id, list.multiple);\n            if ($.isBoolean(ajax)) { // Ajax\n                let pvalues = parents.map(parent => ew.getOptionValues(parent, form)); // Save the initial values of the parent lists\n                actions.push([id, pvalues, ajax, false]);\n            } else { // Non-Ajax\n                ew.updateOptions.call(this, id, parents, null, false);\n            }\n        }\n        // Update the Ajax lists\n        for (var i = 0; i < actions.length; i++) {\n            promises.push(new Promise(function(resolve, reject) {\n                setTimeout(function() {\n                    resolve(ew.updateOptions.apply(self, actions.shift()));\n                }, ew.AJAX_DELAY * i); // Delay a little in case of large number of lists\n            }));\n        }\n        Promise.all(promises).then(function() {\n            $(document).trigger(\"updatedone\", [{source: self, target: form}]);\n        }).catch(function(error) {\n            console.log(error);\n        });\n    }\n\n    // Create AutoSuggest\n    this.createAutoSuggest = function(settings) {\n        var options = Object.assign({\n            limit: ew.AUTO_SUGGEST_MAX_ENTRIES,\n            form: this\n        }, ew.autoSuggestSettings, settings); // Global settings + field specific settings\n        self.autoSuggests[settings.id] = new ew.AutoSuggest(options);\n    }\n\n    // Init editors\n    this.initEditors = function() {\n        var form = this.getForm();\n        $(form.elements).filter(\"textarea.editor\").each(function(i, el) {\n            var ed = $(el).data(\"editor\");\n            if (ed && !ed.active && !ed.name.includes(\"$rowindex$\"))\n                ed.create();\n        });\n    }\n\n    // Update textareas\n    this.updateTextArea = function(name) {\n        var form = this.getForm();\n        $(form.elements).filter(\"textarea.editor\").each(function(i, el) {\n            var ed = $(el).data(\"editor\");\n            if (!ed || name && ed.name != name)\n                return true; // Continue\n            ed.save();\n            if (name)\n                return false; // Break\n        });\n    }\n\n    // Destroy editor(s)\n    this.destroyEditor = function(name) {\n        var form = this.getForm();\n        $(form.elements).filter(\"textarea.editor\").each(function(i, el) {\n            var ed = $(el).data(\"editor\");\n            if (!ed || name && ed.name != name)\n                return true; // Continue\n            ed.destroy();\n            if (name)\n                return false; // Break\n        });\n    }\n\n    // Show error message\n    this.onError = function(el, msg) {\n        return ew.onError(this, el, msg);\n    }\n\n    // Init file upload\n    this.initUpload = function() {\n        var form = this.getForm();\n        $(form.elements).filter(\"input:file:not([name*='$rowindex$'],[id='importfiles'])\").each(function(index) {\n            $.later(ew.AJAX_DELAY * index, null, ew.upload, this); // Delay a little in case of large number of upload fields\n        });\n    }\n\n    // Set up filters\n    this.setupFilters = function(e, filters) {\n        var id = this.id, data = this.filterList ? this.filterList.data : null, $sf = $(\".ew-save-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !data),\n            $df = $(\".ew-delete-filter[data-form=\" + id + \"]\").toggleClass(\"disabled\", !filters.length).toggleClass(\"dropdown-toggle\", !!filters.length),\n            $delete = $df.parent(\"li\").toggleClass(\"dropdown-submenu dropdown-hover\", !!filters.length).toggleClass(\"disabled\", !filters.length),\n            $save = $sf.parent(\"li\").toggleClass(\"disabled\", !data),\n            $btn = $(e.target);\n        var saveFilters = function(id, filters) {\n            if (ew.SEARCH_FILTER_OPTION == \"Client\") {\n                window.localStorage.setItem(id + \"_filters\", JSON.stringify(filters));\n            } else if (ew.SEARCH_FILTER_OPTION == \"Server\") {\n                var $body = $(\"body\");\n                $body.css(\"cursor\", \"wait\");\n                $.ajax(ew.currentPage(), {\n                    type: \"POST\",\n                    dataType: \"json\",\n                    data: { \"ajax\": \"savefilters\", \"filters\": JSON.stringify(filters) }\n                }).done(function(result) {\n                    if (result[0] && result[0].success)\n                        self.filterList.filters = filters; // Save filters\n                }).always(function() {\n                    $body.css(\"cursor\", \"default\");\n                });\n            }\n        }\n        $save.off(\"click.ew\").on(\"click.ew\", function(e) { // Save filter\n            if ($save.hasClass(\"disabled\"))\n                return false;\n            ew.prompt(ew.language.phrase(\"EnterFilterName\"), (name) => {\n                name = ew.sanitize(name);\n                if (name) {\n                    filters.push([name, data]);\n                    saveFilters(id, filters);\n                }\n            }, true);\n        }).prevAll().remove();\n        $df.next(\"ul.dropdown-menu\").remove();\n        if (filters.length) {\n            var $submenu = $(\"<ul class='dropdown-menu'></ul>\");\n            for (var i in filters) {\n                if (!Array.isArray(filters[i]))\n                    continue;\n                $('<li><a class=\"dropdown-item\" data-index=\"' + i + '\" href=\"#\" onclick=\"return false;\">' + filters[i][0] + '</a></li>').on(\"click\", function(e) { // Delete\n                    var i = $(this).find(\"a[data-index]\").data(\"index\");\n                    ew.prompt(ew.language.phrase(\"DeleteFilterConfirm\").replace(\"%s\", filters[i][0]), (result) => {\n                        if (result) {\n                            filters.splice(i, 1);\n                            saveFilters(id, filters);\n                        }\n                    });\n                }).appendTo($submenu);\n                $('<li><a class=\"dropdown-item ew-filter-list\" data-index=\"' + i + '\" href=\"#\" onclick=\"return false;\">' + filters[i][0] + '</a></li>').insertBefore($save).on(\"click\", function(e) {\n                    var i = $(this).find(\"a[data-index]\").data(\"index\");\n                    $(\"<form>\").attr({method: \"post\", action: ew.currentPage()})\n                        .append($(\"<input type='hidden'>\").attr({name: \"cmd\", value: \"resetfilter\"}),\n                            $(\"<input type='hidden'>\").attr({name: ew.TOKEN_NAME_KEY, value: ew.TOKEN_NAME}), // PHP\n                            $(\"<input type='hidden'>\").attr({name: ew.ANTIFORGERY_TOKEN_KEY, value: ew.ANTIFORGERY_TOKEN}), // PHP\n                            $(\"<input type='hidden'>\").attr({name: \"filter\", value: JSON.stringify(filters[i][1])}))\n                        .appendTo(\"body\").submit();\n                });\n            }\n            $(\"<li class='dropdown-divider'></li>\").insertBefore($save);\n            $delete.append($submenu);\n        }\n    }\n\n    // Init form\n    this.init = function() {\n        if (this._initiated)\n            return;\n\n        // Filters button\n        if (ew.SEARCH_FILTER_OPTION == \"Client\" && window.localStorage || ew.SEARCH_FILTER_OPTION == \"Server\" && ew.IS_LOGGEDIN && !ew.IS_SYS_ADMIN && ew.CURRENT_USER_NAME != \"\") {\n            $(\".ew-filter-option.\" + this.id + \" .ew-btn-dropdown\").on(\"show.bs.dropdown\", function(e) {\n                var filters = [];\n                if (ew.SEARCH_FILTER_OPTION == \"Client\") {\n                    var item = window.localStorage.getItem(self.id + \"_filters\");\n                    if (item)\n                        filters = ew.parseJson(item) || [];\n                } else if (ew.SEARCH_FILTER_OPTION == \"Server\")\n                    filters = self.filterList && self.filterList.filters ? self.filterList.filters : [];\n                var ar = $.grep(filters, function(val) {\n                    if (Array.isArray(val) && val.length == 2)\n                        return val;\n                });\n                self.setupFilters(e, ar);\n            });\n            $(\".ew-filter-option\").show();\n        } else {\n            $(\".ew-filter-option\").hide();\n        }\n\n        // Check form\n        var form = this.getForm(),\n            $form = $(form);\n        if (!form)\n            return;\n\n        // Compile templates\n        this.compileTemplates();\n\n        // Check if Search panel\n        var isSearch = /s(ea)?rch$/.test(this.id);\n\n        // Search panel\n        if (isSearch && this.initSearchPanel && !ew.hasFormData(form))\n            $(\"#\" + this.id + \"-search-panel\").removeClass(\"show\");\n\n        // Search panel toggle\n        $(\".ew-search-toggle[data-form=\" + this.id + \"]\").on(\"click.bs.button\", function() {\n            $(\"#\" + $(this).data(\"form\") + \"-search-panel\").collapse(\"toggle\");\n        });\n\n        // Hide search operator column\n        if (!$(\".ew-table .ew-search-operator\").text().trim())\n            $(\".ew-table .ew-search-operator\").parent(\"td\").hide();\n\n        // Highlight button\n        if (isSearch) {\n            $(\".ew-highlight[data-form=\" + this.id + \"]\").on(\"click.bs.button\", function() {\n                $(\"span.\" + $(this).data(\"name\")).toggleClass(\"ew-highlight-search\");\n            });\n        }\n\n        // Search operators\n        if (isSearch) { // Search form\n            $form.find(\"select[id^=z_]\").each(function() {\n                var $this = $(this).trigger(\"change\");\n                if ($this.val() != \"BETWEEN\")\n                    $form.find(\"#w_\" + this.id.substr(2)).trigger(\"change\");\n            });\n        }\n\n        // Multi-page\n        if (this.multiPage)\n            this.multiPage.render();\n\n        // HTML editors\n        loadjs.ready([\"editor\"], this.initEditors.bind(this));\n\n        // Dynamic selection lists\n        this.updateLists();\n\n        // Init file upload\n        this.initUpload();\n\n        // Submit/Cancel\n        if (this.$element.is(\"form\")) { // Not Grid page\n            // Detail pages\n            this.$element.find(\".ew-detail-pages .ew-nav-tabs a[data-toggle=tab]\").on(\"shown.bs.tab\", function(e) {\n                var $tab = $(e.target.getAttribute(\"href\")),\n                    $panel = $tab.find(\".table-responsive.ew-grid-middle-panel\"),\n                    $container = $tab.closest(\".container-fluid\");\n                if ($panel.width() >= $container.width())\n                    $panel.width($container.width() + \"px\");\n                else\n                    $panel.width(\"auto\");\n            });\n            $form.submit(function(e) { // Bind submit event\n                return self.submit();\n            });\n            $form.find(\"[data-field], .ew-priv\").on(\"change\", function() {\n                if (ew.CONFIRM_CANCEL)\n                    self.modified = true;\n            });\n            $form.find(\"#btn-cancel[data-href]\").on(\"click\", function() { // Cancel\n                self.updateTextArea();\n                var href = $(this).data(\"href\");\n                if (self.modified && ew.hasFormData(form)) {\n                    ew.prompt(ew.language.phrase(\"ConfirmCancel\"), (result) => {\n                        if (result) {\n                            $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\n                            window.location = href;\n                        }\n                    });\n                } else {\n                    $form.find(\"#btn-action\").prop(\"disabled\", true); // Disable the save button\n                    window.location = href;\n                }\n            });\n        }\n\n        this._initiated = true;\n\n        // Store form object as data\n        this.$element.data(\"form\", this);\n    }\n\n    // Add to the global forms object\n    ew.forms.add(this);\n}","/**\n * Class Field\n */\nexport default class Field {\n    name = \"\";\n    validators = [];\n    _error;\n    _element;\n    _checkbox;\n    _validate = true;\n    list;\n    invalid;\n\n    /**\n     * Constructor\n     * @param {string} fldvar Field variable name\n     * @param {Function[]|Function} validators Validators\n     * @param {bool} invalid Initial valid status (e.g. server side)\n     */\n    constructor(fldvar, validators, invalid) {\n        this.name = fldvar;\n        if (Array.isArray(validators)) {\n            for (let validator of validators)\n                this.addValidator(validator);\n        } else if (typeof validators === \"function\") {\n            this.addValidator(validators);\n        }\n        this.invalid = invalid;\n    }\n\n    /**\n     * Add validator\n     * @param {Function} validator Validator function\n     */\n    addValidator(validator) {\n        if (typeof validator === \"function\")\n            this.validators.push(validator);\n    }\n\n    /**\n     * Get error\n     * @returns {Object}\n     */\n    get error() {\n        return this._error;\n    }\n\n    /**\n     * Add error\n     * @param {Object} err Error\n     */\n    addError(err) {\n        if (err) {\n            let error = this._error ?? {};\n            this._error = { ...error, ...err };\n            this.invalid = true;\n        }\n    }\n\n    /**\n     * Clear all errors\n     */\n    clearErrors() {\n        this._error = null;\n        this.invalid = false;\n    }\n\n    /**\n     * Clear all validators\n     */\n    clearValidators() {\n        this.validators = [];\n    }\n\n    /**\n     * Get error message\n     * @returns {string} HTML\n     */\n    get errorMessage() {\n        if (this._error) {\n            return Array.from(Object.values(this._error)).join(\"<br>\");\n        }\n        return \"\";\n    }\n\n    /**\n     * Check if the field should be validated\n     */\n    get shouldValidate() {\n        return !this._checkbox || this._checkbox.checked;\n    }\n\n    /**\n     * Set form element\n     */\n    set element(el) {\n        this._element = el;\n        this._checkbox = this._element?.id?.match(/^[xy]_/) ? document.getElementById(this._element.id.replace(/^[xy]_/, \"u_\")) : null; // Find the checkbox for the field in Update page\n    }\n\n    /**\n     * Get form element\n     * @returns {HTMLElement|HTMLElement[]}\n     */\n    get element() {\n        return this._element;\n    }\n\n    /**\n     * Get field value from form element\n     * @returns {string|Array}\n     */\n    get value() {\n        return this._element ? ew.getValue(this._element) : \"\";\n    }\n\n    /**\n     * Validate field value\n     * @returns {boolean}\n     */\n    validate() {\n        let result = true;\n        this.clearErrors(); // Reset error\n        if (this._element && this.shouldValidate) {\n            if (Array.isArray(this.validators)) {\n                for (let validator of this.validators) {\n                    let err = validator(this._element);\n                    if (err !== false) {\n                        this.addError(err);\n                        result = false;\n                    }\n                }\n                this.updateFeedback();\n            }\n        }\n        return result;\n    }\n\n    /**\n     * Update the error message to feedback element\n     */\n    updateFeedback() {\n        let err = this.errorMessage;\n        if (this._element && err) {\n            jQuery(this._element).closest(\"[id^=el_], .form-group\").find(\".invalid-feedback\").html(err);\n            ew.setInvalid(this._element);\n        }\n    }\n\n    /**\n     * Set focus\n     */\n    focus() {\n        if (this._element)\n            ew.setFocus(this._element);\n    }\n}","import FormBase from \"./FormBase\";\nimport Field from \"./Field\";\n\n/**\n * Class Form\n */\nexport default class Form extends FormBase {\n    row = {};\n    fields = {};\n    rowIndex;\n    value;\n    _error;\n\n    /**\n     * Constructor\n     * @param {string} id Form ID\n     * @param {string} pageId Page ID\n     */\n    constructor(id, pageId) {\n        super(id, pageId);\n    }\n\n    /**\n     * Add field\n     * @param {string} fldvar Field variable name\n     * @param {Function[]} validators Validators\n     * @param {bool} invalid Invalid\n     */\n    addField(fldvar, validators, invalid) {\n        if (!(fldvar in this.fields))\n            this.fields[fldvar] = new Field(fldvar, validators, invalid);\n    }\n\n    /**\n     * Get field\n     * @param {string} fldvar Field variable name\n     * @returns Field\n     */\n    getField(fldvar) {\n        return this.fields[fldvar];\n    }\n\n    /**\n     * Add fields by field definitions\n     * @param {Array} fields\n     */\n    addFields(fields) {\n        if (Array.isArray(fields)) {\n            for (let field of fields) {\n                if (Array.isArray(field)) {\n                    this.addField.apply(this, field);\n                }\n            }\n        }\n    }\n\n    /**\n     * Add error\n     * @param {string} fldvar Field variable name\n     * @param {Object} err Error\n     */\n    addError(fldvar, err) {\n        if (err) {\n            this._error = this._error ?? {};\n            this._error[fldvar] = err;\n        }\n    }\n\n    /**\n     * Add custom error\n     * @param {string} fldvar Field variable name \n     * @param {string} msg Error message \n     */\n    addCustomError(fldvar, msg) {\n        if (fldvar in this.fields) {\n            let field = this.fields[fldvar],\n                err = { custom: msg };\n            field.addError(err);\n            field.updateFeedback();\n            this.addError(fldvar, err);\n        }\n        return false;\n    }\n\n    /**\n     * Get error\n     */\n    get error() {\n        return this._error;\n    }\n\n    /**\n     * Set focus to the first field with error\n     */\n    focus() {\n        for (let [fldvar, field] of Object.entries(this.fields)) {\n            if (field.invalid || this._error && this._error[fldvar]) {\n                field.focus();\n                this.makeVisible(field.element);\n                break;\n            }\n        }\n    }\n\n    /**\n     * Make the form visible\n     * @param {HTMLElement} el Focused element \n     */\n    makeVisible(el) {\n        if (this.multiPage) { // Multi-page\n            this.multiPage.gotoPageByElement(el);\n        } else if (this.$element.is(\"div\")) { // Multiple Master/Detail\n            let $pane = this.$element.closest(\".tab-pane\");\n            if ($pane[0] && !$pane.hasClass(\"active\"))\n                $pane.closest(\".tabbable, .ew-nav-tabs\").find(\"a[data-toggle=tab][href='#\" + $pane.attr(\"id\") + \"']\").click();\n        }\n    }\n\n    /**\n     * Validate all fields of the specified row\n     * @param {number} rowIndex Row index\n     */\n    validateFields(rowIndex) {\n        this.rowIndex = rowIndex ?? \"\";\n        this.row = {};\n        this._error = null; // Reset\n        let result = true;\n        for (let field of Object.values(this.fields)) {\n            field.element = this.getElements(`x${this.rowIndex}_${field.name}`); // Set element\n            if (!field.element)\n                field.element = this.getElements(`x${this.rowIndex}_${field.name}[]`); // Field with []\n            if (!field.element)\n                field.element = this.getElements(field.name); // Field by name directly (e.g. email form)\n            this.row[field.name] = field.value; // Get field value\n            if (!field.validate()) { // Invalid field value\n                this.addError(field.name, field.error);\n                result = false;\n            }\n        }\n        // Save the field values of the row\n        if (!this.value) {\n            this.value = { ...this.row };\n        } else {\n            if (!Array.isArray(this.value))\n                this.value = [this.value];\n            let index = parseInt(rowIndex, 10) || 0;\n            index = (index > 1) ? index - 1 : 0;\n            this.value[index] = { ...this.row };\n        }\n        this.focus();\n\n        return result;\n    }\n\n    /**\n     * Set invalid fields of the specified row\n     * @param {number} rowIndex Row index\n     */\n    setInvalid(rowIndex) {\n        this.rowIndex = rowIndex ?? \"\";\n        for (let field of Object.values(this.fields)) {\n            if (!field.invalid)\n                continue;\n            field.element = this.getElements(`x${this.rowIndex}_${field.name}`); // Set element\n            if (!field.element)\n                field.element = this.getElements(`x${this.rowIndex}_${field.name}[]`); // Fields with []\n            if (!field.element)\n                field.element = this.getElements(field.name); // Fields without prefix (e.g. email form)\n            ew.setInvalid(field.element);\n        }\n    }\n}","import $ from 'jquery';\n\n// AjaxLookup class\nexport default class AjaxLookup {\n    _isAutoSuggest = null;\n\n    /**\n     * Constructor\n     * @param {Object} settings Settings\n     * @param {string} settings.id - Input element ID\n     * @param {string|Form} settings.form - Form of the input element\n     * @param {Number} settings.limit - Options per page\n     * @param {Object} settings.data - Data submitted by Ajax\n     */\n    constructor(settings) {\n        this.elementId = settings.id; // Id\n        this.form = settings.form; // Form\n        if ($.isString(this.form)) // Form is string => Form id\n            this.form = ew.forms.get(this.form);\n        this.element = this.form.getElement(this.elementId); // Actual HTML element\n        this.formElement = this.form.getElement(); // HTML form or DIV\n        this.list = this.form.getList(this.elementId);\n        let m = this.elementId.match(/^[xy](\\d*|\\$rowindex\\$)_/),\n            rowindex = m ? m[1] : \"\";\n        this.parentFields = this.list.parentFields.slice() // Clone\n            .map(pf => (pf.split(\" \").length == 1) ? pf.replace(/^x_/, \"x\" + rowindex + \"_\") : pf); // Parent field in the same table, add row index\n        this.limit = settings.limit;\n        this.debounce = settings.debounce;\n        this.data = settings.data;\n        this.recordCount = 0;\n    }\n\n    /**\n     * Is AutoSuggest\n     */\n    get isAutoSuggest() {\n        if (this._isAutoSuggest === null)\n            this._isAutoSuggest = ew.isAutoSuggest(this.element);\n        return this._isAutoSuggest;\n    }\n\n    /**\n     * Format display value\n     * @param {Array} opt Option\n     */\n    formatResult(opt) {\n        if (this.list.template && !this.isAutoSuggest) {\n            return this.list.template.render(opt, ew.jsRenderHelpers);\n        } else {\n            return ew.displayValue(opt, this.element) || opt[0];\n        }\n    }\n\n    /**\n     * Generate request\n     */\n    generateRequest() {\n        var data = Object.assign({}, this.data, {\n            name: this.element.name,\n            page: this.list.page,\n            field: this.list.field,\n            ajax: \"autosuggest\",\n            language: ew.LANGUAGE_ID\n        }, ew.getUserParams(\"#p_\" + this.elementId, this.formElement));\n        if (this.parentFields.length > 0) {\n            this.parentFields.forEach((pf, i) => {\n                let arp = ew.getOptionValues(pf, this.formElement);\n                data[\"v\" + (i + 1)] = arp.join(ew.MULTIPLE_OPTION_SEPARATOR);\n            });\n        }\n        return data;\n    }\n\n    /**\n     * Get URL\n     */\n    getUrl(query, start) {\n        let params = new URLSearchParams({\n            q: query,\n            n: this.limit,\n            rnd: ew.random(),\n            start: $.isNumber(start) ? start : -1\n        });\n        return ew.getApiUrl(ew.API_LOOKUP_ACTION, params.toString());\n    }\n\n    /**\n     * Prepare URL and data for sending request\n     * @param {string} query Search term\n     * @param {Number} start Start page\n     */\n    prepare(query, start) {\n        return {\n            url: this.getUrl(query, start),\n            type: \"POST\",\n            dataType: \"json\",\n            data: this.generateRequest()\n        };\n    }\n\n    /**\n     * Transform options (virtual)\n     * @param {Object[]} data Data from server\n     */\n    transform(data) {\n        let results = [];\n        if (data && data.result == \"OK\") {\n            this.recordCount = data.totalRecordCount;\n            results = data.records;\n        }\n        return results;\n    }\n\n}\n","/**\n * Class selection list option\n */\nexport default class SelectionListOption {\n\n    /**\n     * Constructor\n     */\n    constructor(value, text, selected) {\n        this.value = String(value || \"\");\n        this.text = String(text || \"\");\n        this.selected = !!selected;\n    }\n\n}","import $ from 'jquery';\nimport SelectionListOption from './SelectionListOption';\nimport AjaxLookup from './AjaxLookup';\n\n// AutoSuggest class\nfunction AutoSuggest(settings) {\n    AjaxLookup.call(this, settings); // Extends AjaxLookup\n\n    var emptyObj = { typeahead: {} }; // Empty Auto-Suggest object\n\n    if (this.elementId.includes(\"$rowindex$\"))\n        return emptyObj;\n\n    this.input = this.form.getElement(\"sv_\" + this.elementId); // User input\n    if (!this.input)\n        return emptyObj;\n\n    var self = this,\n        $input = $(this.input),\n        $element = $(this.element),\n        timer;\n\n    // Properties\n    this.minWidth = settings.minWidth;\n    this.maxHeight = settings.maxHeight;\n    this.highlight = settings.highlight;\n    this.hint = settings.hint;\n    this.minLength = settings.minLength;\n    this.templates = Object.assign({}, settings.templates); // Clone\n    this.trigger = settings.trigger; // For loading more results\n    this.delay = settings.delay; // For loading more results\n    this.debounce = settings.debounce;\n    this.display = settings.display || \"text\";\n    this.forceSelection = settings.forceSelect;\n    this.$input = $input;\n    this.$element = $element;\n\n    // Save initial option\n    if ($input.val() && $element.val())\n        this.element.add($element.val(), $input.val(), true);\n\n    // Set the selected item to the actual field\n    this.setValue = function(v) {\n        v = v || $input.val();\n        let index = this.element.options.findIndex(option => option.text == v);\n        if (index < 0) { // Not found in results\n            if (this.forceSelection && v) { // Force selection and query not empty => error\n                $input.typeahead(\"val\", \"\").attr(\"placeholder\", ew.language.phrase(\"ValueNotExist\")).addClass(\"is-invalid\");\n                $element.val(\"\").trigger(\"change\");\n                return;\n            }\n        } else { // Found in results\n            this.element.options[index].selected = true;\n            if (!/s(ea)?rch$/.test(this.formElement.id) || this.forceSelection) // Force selection or not search form\n                v = this.element.options[index].value; // Replace the display value by Link Field value\n        }\n        if (v !== $element.attr(\"value\"))\n            $element.attr(\"value\", v).trigger(\"change\"); // Set value to the actual field\n    };\n\n    // Transform suggestion\n    this.transform = function(data) {\n        let results = AjaxLookup.prototype.transform.call(this, data);\n        this.element.options = results.map(item => new SelectionListOption(item[0], self.formatResult(item)));\n        return this.element.options;\n    };\n\n    // Get suggestions by Ajax\n    this.source = function(query, syncResults, asyncResults) {\n        if (timer)\n            timer.cancel();\n        timer = $.later(self.debounce, null, function() {\n            self.recordCount = 0; // Reset\n            var settings = self.prepare(query);\n            $.ajax(settings).done(function(data) {\n                asyncResults(self.transform(data));\n            });\n        });\n    };\n\n    // Get current suggestion count\n    this.count = function() {\n        return self.typeahead.menu.$node.find(\".tt-suggestion.tt-selectable\").length;\n    };\n\n    // Get more suggestions by Ajax\n    this.more = function() {\n        var $body = $(\"body\");\n        $body.css(\"cursor\", \"wait\");\n        var ta = self.typeahead, query = ta.menu.query, dataset = ta.menu.datasets[0];\n        var start = self.count();\n        var settings = self.prepare(query, start);\n        $.ajax(settings).done(function(data) {\n            data = self.transform(data);\n            dataset._append(query, data);\n            ta.menu.$node.find(\".tt-dataset\").scrollTop(dataset.$lastSuggestion.outerHeight() * start);\n        }).always(function() {\n            $body.css(\"cursor\", \"default\");\n        });\n    };\n\n    // Add events\n    $input.on(\"typeahead:select\", function(e, d) {\n        self.setValue(d[self.display]);\n    }).change(function(e) {\n        var ta = $input.data(\"tt-typeahead\");\n        if (ta && ta.isOpen() && !ta.menu.empty()) {\n            var $item = ta.menu.getActiveSelectable();\n            if ($item) { // A suggestion is highlighted\n                let i = $item.index(),\n                    val = self.element.options[i].text;\n                $input.typeahead(\"val\", val);\n            }\n        }\n        self.setValue();\n    }).blur(function(e) { // \"change\" fires before blur\n        var ta = $input.data(\"tt-typeahead\");\n        if (ta && ta.isOpen())\n            ta.menu.close();\n    }).focus(function(e) {\n        $input.attr(\"placeholder\", $input.data(\"placeholder\")).removeClass(\"is-invalid\");\n    });\n\n    // Option template (\"suggestion\" template)\n    var tpl = self.list.template || self.templates[\"suggestion\"];\n    if (tpl && $.isString(tpl))\n        tpl = $.templates(tpl);\n    if (tpl)\n        self.templates[\"suggestion\"] = tpl.render.bind(tpl);\n\n    // Save\n    $element.data(\"autosuggest\", this);\n\n    // Create Typeahead\n    $(function() {\n        // Typeahead options and dataset\n        var options = {\n            highlight: self.highlight,\n            minLength: self.minLength,\n            hint: self.hint,\n            trigger: self.trigger,\n            delay: self.delay\n        };\n        var dataset = {\n            name: self.form.id + \"-\" + self.elementId,\n            source: self.source,\n            templates: self.templates,\n            display: self.display,\n            limit: self.limit,\n            async: true\n        };\n        var args = [options, dataset];\n        // Trigger \"typeahead\" event\n        $element.trigger(\"typeahead\", [args]);\n        self.limit = dataset.limit;\n        // Create Typeahead\n        $input.typeahead.apply($input, args);\n        $input.on(\"typeahead:rendered\", function() {\n            var $node = self.typeahead.menu.$node;\n            var $more = $node.find(\".tt-more\").html(ew.language.phrase(\"More\"));\n            if (arguments.length > 1 && // Arguments: event, suggestion, suggestion, ...\n                self.recordCount > self.count()) {\n                $more.one(options.trigger, function(e) {\n                    setTimeout(function() {\n                        self.more();\n                    }, options.delay);\n                    e.preventDefault();\n                    e.stopPropagation();\n                });\n            } else {\n                $more.hide();\n            }\n        });\n        $input.off(\"blur.tt\");\n        self.typeahead = $input.data(\"tt-typeahead\");\n        var $menu = self.typeahead.menu.$node.css(\"z-index\", 1000);\n        if (self.minWidth)\n            $menu.css(\"min-width\", self.minWidth);\n        var $dataset = $menu.find(\".tt-dataset\");\n        var maxHeight = self.maxHeight ||\n            (parseInt($dataset.css(\"line-height\"), 10) + 6) * (dataset.limit + 1); // Match .tt-suggestion padding\n        $dataset.css({ \"max-height\": maxHeight, \"overflow-y\": \"auto\" });\n    });\n}\n\nAutoSuggest.prototype = Object.create(AjaxLookup.prototype);\n\nexport default AutoSuggest;","import $ from 'jquery';\n\n/**\n * Class Forms\n */\nexport default class Forms {\n    _forms = {};\n\n    /**\n     * Get form by element or id\n     * @param {HTMLElement|string} el Element or id\n     */\n    get(el) {\n        let id = ($.isString(el)) ? el : ew.getForm(el).id;\n        return this._forms[id];\n    }\n\n    /**\n     * Add form\n     * @param {Form} f Form\n     */\n    add(f) {\n        this._forms[f.id] = f;\n    }\n\n    /**\n     * Get all ids\n     * @returns {string[]}\n     */\n    ids() {\n        return Object.keys(this._forms);\n    }\n\n}","import $ from 'jquery';\nimport AjaxLookup from './AjaxLookup';\nimport AutoSuggest from './AutoSuggest';\nimport Form from './Form';\nimport Forms from './Forms';\nimport Field from './Field';\nimport SelectionListOption from './SelectionListOption';\nimport getSelect2CustomOptionClass from './Select2CustomOption';\n\nexport let currentUrl = new URL(window.location);\nexport let forms = new Forms();\nexport { AjaxLookup, AutoSuggest, Form, SelectionListOption };\n\nlet $document = $(document),\n    $body = $(\"body\");\n\n// Remove spinner (immediately)\nlet _removeSpinner = ew.removeSpinner;\n\n// Remove spinner\nexport function removeSpinner() {\n    var timer = $body.data(\"_spinner\");\n    if (timer)\n        timer.cancel();\n    timer = $.later(500, null, function() {\n        if ($document.data(\"_ajax\") !== true) { // Ajax not running\n            _removeSpinner();\n            $(\"form.ew-form\").each(function() {\n                var frm = forms.get(this.id);\n                if (frm) {\n                    frm.focus();\n                    return false;\n                }\n            });\n        }\n    });\n    $body.data(\"_spinner\", timer);\n}\n\n// Create select2\nexport function createSelect(options) {\n    if (options.selectId.includes(\"$rowindex$\"))\n        return;\n    $.fn.select2.amd.require(\n        [\"select2/utils\", \"select2/results\", \"select2/dropdown/infiniteScroll\", \"select2/dropdown/hidePlaceholder\", \"select2/dropdown/selectOnClose\"],\n        (function(opts) {\n            return function (Utils, ResultsList, InfiniteScroll, HidePlaceholder, SelectOnClose) {\n                let options = Object.assign({}, ew.selectOptions, opts);\n                if (options.resultsAdapter == null) {\n                    options.resultsAdapter = ResultsList;\n                    if (options.dropdown && options.columns && options.customOption) {\n                        options.resultsAdapter = Utils.Decorate(\n                            options.resultsAdapter,\n                            getSelect2CustomOptionClass(Utils)\n                        );\n                        if (options.iconClass && options.multiple && !options.templateResult) {\n                            options.templateResult = (result) => '<label class=\"' + options.iconClass + ' ew-dropdown-label\">' + result.text + '</label>';\n                        }\n                    }\n                    if (options.ajax != null) {\n                        options.resultsAdapter = Utils.Decorate(\n                            options.resultsAdapter,\n                            InfiniteScroll\n                        );\n                    }\n                    if (options.placeholder != null) {\n                        options.resultsAdapter = Utils.Decorate(\n                            options.resultsAdapter,\n                            HidePlaceholder\n                        );\n                    }\n                    if (options.selectOnClose) {\n                        options.resultsAdapter = Utils.Decorate(\n                            options.resultsAdapter,\n                            SelectOnClose\n                        );\n                    }\n                }\n                if ($.isObject(options.ajax)) {\n                    let lookup = new ew.AjaxLookup(options.ajax)\n                    options.ajax = {\n                        url: (params) => {\n                            let start = params.page ? (params.page - 1) * (settings.limit || ew.AUTO_SUGGEST_MAX_ENTRIES) : -1;\n                            return lookup.getUrl(params.term, start);\n                        },\n                        type: \"POST\",\n                        dataType: \"json\",\n                        data: lookup.generateRequest(),\n                        delay: options.debounce,\n                        processResults: (data) => {\n                            return {\n                                results: lookup.transform(data).map(item => {\n                                    return {\n                                        id: item[0],\n                                        text: lookup.formatResult({ lf: item[0], df: item[1], df2: item[2], df3: item[3], df4: item[4] })\n                                    };\n                                }),\n                                pagination: {\n                                    more: data.length < lookup.recordCount\n                                }\n                            }\n                        }\n                    };\n                }\n                $(\"select[data-select2-id='\" + options.selectId + \"']\").select2(options);\n                if (options.multiple && options.minimumResultsForSearch === Infinity) {\n                    $(\"select[id='<#= ctl #>']\").on(\"select2:opening select2:closing\", function(event) {\n                        $(this).parent().find(\".select2-search__field\").prop(\"disabled\", true);\n                    });\n                }\n            };\n        })(options)\n    );\n}\n\n// Init icon tooltip\nexport function initIcons(e) {\n    var el = (e && e.target) ? e.target : document;\n    $(el).find(\".ew-icon\").closest(\"a, button\").add(\".ew-tooltip\").tooltip({\n        container: \"body\",\n        trigger: (ew.IS_MOBILE) ? \"manual\" : \"hover\",\n        placement: \"bottom\",\n        sanitizeFn: ew.sanitizeFn\n    });\n}\n\n// Init password options\nexport function initPasswordOptions(e) {\n    var el = (e && e.target) ? e.target : document;\n    if ($.fn.pStrength && typeof ew.MIN_PASSWORD_STRENGTH != \"undefined\") {\n        $(el).find(\".ew-password-strength\").each(function() {\n            var $this = $(this);\n            if (!$this.data(\"pStrength\"))\n                $this.pStrength({\n                    \"changeBackground\": false,\n                    \"backgrounds\": [],\n                    \"passwordValidFrom\": ew.MIN_PASSWORD_STRENGTH,\n                    \"onPasswordStrengthChanged\": function(strength, percentage) {\n                        var $this = $(this), $pst = $(\"[id='\" + $this.attr(\"data-password-strength\") + \"']\"), // Do not use #\n                            $pb = $pst.find(\".progress-bar\");\n                        $pst.width($this.outerWidth());\n                        if ($this.val() && !ew.isMaskedPassword(this)) {\n                            var pct = percentage + \"%\";\n                            if (percentage < 25) {\n                                $pb.addClass(\"bg-danger\").removeClass(\"bg-warning bg-info bg-success\");\n                            } else if (percentage < 50) {\n                                $pb.addClass(\"bg-warning\").removeClass(\"bg-danger bg-info bg-success\");\n                            } else if (percentage < 75) {\n                                $pb.addClass(\"bg-info\").removeClass(\"bg-danger bg-warning bg-success\");\n                            } else {\n                                $pb.addClass(\"bg-success\").removeClass(\"bg-danger bg-warning bg-info\");\n                            }\n                            $pb.css(\"width\", pct);\n                            if (percentage > 25)\n                                pct = ew.language.phrase(\"PasswordStrength\").replace(\"%p\", pct);\n                            $pb.html(pct);\n                            $pst.removeClass(\"d-none\").show();\n                            $this.data(\"validated\", percentage >= ew.MIN_PASSWORD_STRENGTH);\n                        } else {\n                            $pst.addClass(\"d-none\").hide();\n                            $this.data(\"validated\", null);\n                        }\n                    }\n                });\n        });\n    }\n    if ($.fn.pGenerator) {\n        $(el).find(\".ew-password-generator\").each(function() {\n            var $this = $(this);\n            if (!$this.data(\"pGenerator\"))\n                $this.pGenerator({\n                    \"passwordLength\": ew.GENERATE_PASSWORD_LENGTH,\n                    \"uppercase\": ew.GENERATE_PASSWORD_UPPERCASE,\n                    \"lowercase\": ew.GENERATE_PASSWORD_LOWERCASE,\n                    \"numbers\": ew.GENERATE_PASSWORD_NUMBER,\n                    \"specialChars\": ew.GENERATE_PASSWORD_SPECIALCHARS,\n                    \"onPasswordGenerated\": function(pwd) {\n                        var $this = $(this);\n                        $(\"#\" + $this.attr(\"data-password-field\")).val(pwd).trigger(\"change\").trigger(\"focus\").triggerHandler(\"click\"); // Trigger click to remove \"is-invalid\" class (Do not use $this.data)\n                        $(\"#\" + $this.attr(\"data-password-confirm\")).val(pwd);\n                        $(\"#\" + $this.attr(\"data-password-strength\")).addClass(\"d-none\").hide();\n                    }\n                });\n        });\n    }\n}\n\n// Get API action URL\nexport function getApiUrl(action, query) {\n    var url = ew.PATH_BASE + ew.API_URL,\n        params = new URLSearchParams(query);\n    if (ew.USE_URL_REWRITE) {\n        if ($.isString(action)) { // Route as string\n            url += action ? action : \"\";\n        } else if (Array.isArray(action)) { // Route as array\n            var route = action.map(function(v) {\n                return encodeURIComponent(v);\n            }).join(\"/\");\n            url += route ? route : \"\";\n        }\n    } else {\n        if (action)\n            params.set(ew.API_ACTION_NAME, action);\n    }\n    var qs = params.toString();\n    return url + (qs ? \"?\" + qs : \"\");\n}\n\n// Set session timer\nexport function setSessionTimer() {\n    var timeoutTime, timer, keepAliveTimer, counter,\n        useKeepAlive = (ew.SESSION_KEEP_ALIVE_INTERVAL > 0 || ew.IS_LOGGEDIN && ew.IS_AUTOLOGIN);\n    // Keep alive\n    var keepAlive = () => {\n        $.get(getApiUrl(ew.API_SESSION_ACTION), { \"rnd\": random() }, (token) => {\n            if (token && $.isObject(token)) { // PHP\n                ew.TOKEN_NAME = token[ew.TOKEN_NAME_KEY];\n                ew.ANTIFORGERY_TOKEN = token[ew.ANTIFORGERY_TOKEN_KEY];\n            }\n        });\n    };\n    // Reset timer\n    var resetTimer = () => {\n        counter = ew.SESSION_TIMEOUT_COUNTDOWN;\n        timeoutTime = ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\n        if (timeoutTime < 0) { // Timeout now\n            timeoutTime = 0;\n            counter = ew.SESSION_TIMEOUT;\n        }\n        if (timer)\n            timer.cancel(); // Clear timer\n    };\n    // Timeout\n    var timeout = () => {\n        if (keepAliveTimer)\n            keepAliveTimer.cancel(); // Stop keep alive\n        if (counter > 0) {\n            let timerInterval;\n            let message = '<p class=\"text-danger\">' + ew.language.phrase(\"SessionWillExpire\") + '</p>';\n            if (message.includes(\"%m\") && message.includes(\"%s\")) {\n                message = message.replace(\"%m\", '<span class=\"ew-session-counter-minute\">' + Math.floor(counter / 60) + '</span>')\n                message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + (counter % 60) + '</span>')\n            } else if (message.includes(\"%s\")) {\n                message = message.replace(\"%s\", '<span class=\"ew-session-counter-second\">' + counter + '</span>');\n            }\n            Swal.fire({\n                ...ew.sweetAlertSettings,\n                html: message,\n                showConfirmButton: true,\n                confirmButtonText: ew.language.phrase(\"OKBtn\"),\n                timer: counter * 1000,\n                timerProgressBar: true,\n                allowOutsideClick: false,\n                allowEscapeKey: false,\n                onBeforeOpen: () => {\n                    timerInterval = setInterval(() => {\n                        let content = Swal.getContent(),\n                            min = content.querySelector(\".ew-session-counter-minute\"),\n                            sec = content.querySelector(\".ew-session-counter-second\"),\n                            timeleft = Math.round(Swal.getTimerLeft() / 1000);\n                        if (min && sec) {\n                            min.textContent = Math.floor(timeleft / 60);\n                            sec.textContent = timeleft % 60;\n                        } else if (sec) {\n                            sec.textContent = timeleft;\n                        }\n                    }, 1000)\n                },\n                onClose: () => {\n                    clearInterval(timerInterval);\n                }\n            }).then((result) => {\n                if (result.value) { // OK button pressed\n                    keepAlive();\n                    if (!useKeepAlive && ew.SESSION_TIMEOUT > 0)\n                        setTimer();\n                } else if (result.dismiss === Swal.DismissReason.timer) { // Timeout\n                    resetTimer();\n                    window.location = ew.TIMEOUT_URL + \"?expired=1\";\n                }\n            });\n        }\n    };\n    // Set timer\n    var setTimer = () => {\n        resetTimer(); // Reset timer first\n        timer = $.later(timeoutTime * 1000, null, timeout);\n    };\n    if (useKeepAlive) { // Keep alive\n        var keepAliveInterval = (ew.SESSION_KEEP_ALIVE_INTERVAL > 0) ? ew.SESSION_KEEP_ALIVE_INTERVAL : ew.SESSION_TIMEOUT - ew.SESSION_TIMEOUT_COUNTDOWN;\n        if (keepAliveInterval <= 0)\n            keepAliveInterval = 60;\n        keepAliveTimer = $.later(keepAliveInterval * 1000, null, keepAlive, null, true); // Periodic\n    } else {\n        if (ew.SESSION_TIMEOUT > 0) // Set session timeout\n            setTimer();\n    }\n}\n\n// Init export links\nexport function initExportLinks(e) {\n    var el = (e && e.target) ? e.target : document;\n    $(el).find(\".ew-export-link[href]:not(.ew-email):not(.ew-print):not(.ew-xml)\").on(\"click\", function(e) {\n        var href = $(this).attr(\"href\");\n        if (href && href != \"#\")\n            fileDownload(href);\n        e.preventDefault();\n    });\n}\n\n// Init multi-select checkboxes\nexport function initMultiSelectCheckboxes(e) {\n    var el = (e && e.target) ? e.target : document,\n        $el = $(el),\n        $cbs = $el.find(\"input[type=checkbox].ew-multi-select\");\n    var _update = function(id) {\n        var $els = $cbs.filter(\"[name^='\" + id + \"_']\"), cnt = $els.length, len = $els.filter(\":checked\").length;\n        $els.closest(\"form\").find(\"input[type=checkbox]#\" + id)\n            .prop(\"checked\", len == cnt).prop(\"indeterminate\", len != cnt && len != 0);\n    };\n    $cbs.on(\"click\", function(e) {\n        _update(this.name.split(\"_\")[0]);\n    });\n    $el.find(\"input[type=checkbox].ew-priv:not(.ew-multi-select)\").each(function() {\n        _update(this.id); // Init\n    });\n}\n\n// Download file\nexport function fileDownload(href, data) {\n    let win = window.parent,\n        jq = win.jQuery,\n        swal = win.Swal,\n        doc = win.document,\n        $doc = jq(doc),\n        method = data ? \"POST\" : \"GET\",\n        isHtml = href.includes(\"export=html\");\n    return swal.fire({\n        ...ew.sweetAlertSettings,\n        html: \"<p>\" + ew.language.phrase(\"Exporting\") + \"</p>\",\n        allowOutsideClick: false,\n        allowEscapeKey: false,\n        onBeforeOpen: () => {\n            swal.showLoading(),\n            jq.ajax({\n                url: href,\n                type: method,\n                cache: false,\n                data: data || null,\n                xhrFields: {\n                    responseType: isHtml ? \"text\" : \"blob\"\n                }\n            }).done((data, textStatus, jqXHR) => {\n                var url = win.URL.createObjectURL(isHtml ? new Blob([data], { type: \"text/html\" }) : data),\n                    a = doc.createElement(\"a\"),\n                    cd = jqXHR.getResponseHeader(\"Content-Disposition\"),\n                    m = cd.match(/\\bfilename=((['\"])(.+)\\2|([^;]+))/i);\n                a.style.display = \"none\";\n                a.href = url;\n                if (m)\n                    a.download = m[3] || m[4];\n                doc.body.appendChild(a);\n                a.click();\n                $doc.trigger(\"export\", [{ \"type\": \"done\", \"url\": href, \"objectUrl\": url }]);\n                win.URL.revokeObjectURL(url);\n                swal.close();\n            }).fail(() => {\n                swal.showValidationMessage(\"<div class='text-danger'><h4>\" + ew.language.phrase(\"FailedToExport\") + \"</h4>\" + response + \"</div>\");\n                $doc.trigger(\"export\", [{ \"type\": \"fail\", \"url\": href }]);\n            }).always(() => {\n                $doc.trigger(\"export\", [{ \"type\": \"always\", \"url\": href }]);\n            });\n        }\n    });\n}\n\n// Lazy load images\nexport function lazyLoad(e) {\n    if (!ew.LAZY_LOAD)\n        return;\n    var el = (e && e.target) ? e.target : document;\n    $(el).find(\"img.ew-lazy\").each(function () {\n        this.src = this.dataset.src;\n    });\n    $document.trigger(\"lazyload\"); // All images loaded\n}\n\n// Update select2 dropdown position\nexport function updateDropdownPosition() {\n    var select = $(\".select2-container--open\").prev(\".ew-select\").data(\"select2\");\n    if (select) {\n        select.dropdown._positionDropdown();\n        select.dropdown._resizeDropdown();\n    }\n}\n\n// Colorboxes\nexport function initLightboxes(e) {\n    if (!ew.USE_COLORBOX)\n        return;\n    var el = (e && e.target) ? e.target : document;\n    var settings = Object.assign({}, ew.lightboxSettings, {\n        title: ew.language.phrase(\"LightboxTitle\"),\n        current: ew.language.phrase(\"LightboxCurrent\"),\n        previous: ew.language.phrase(\"LightboxPrevious\"),\n        next: ew.language.phrase(\"LightboxNext\"),\n        close: ew.language.phrase(\"LightboxClose\"),\n        xhrError: ew.language.phrase(\"LightboxXhrError\"),\n        imgError: ew.language.phrase(\"LightboxImgError\")\n    });\n    $(el).find(\".ew-lightbox\").each(function() {\n        var $this = $(this);\n        $this.colorbox(Object.assign({ rel: $this.data(\"rel\") }, settings));\n    });\n}\n\n// PDFObjects\nexport function initPdfObjects(e) {\n    if (!ew.EMBED_PDF)\n        return;\n    var el = (e && e.target) ? e.target : document,\n        options = Object.assign({}, ew.PDFObjectOptions);\n    $(el).find(\".ew-pdfobject\").not(\":has(.pdfobject)\").each(function() { // Not already embedded\n        var $this = $(this), url = $this.data(\"url\"), html = $this.html();\n        if (url)\n            PDFObject.embed(url, this, Object.assign(options, { fallbackLink: html }));\n    });\n}\n\n// Tooltips and popovers\nexport function initTooltips(e) {\n    var el = (e && e.target) ? e.target : document, $el = $(el);\n    $el.find(\"input[data-toggle=tooltip],textarea[data-toggle=tooltip],select[data-toggle=tooltip]\").each(function() {\n        var $this = $(this);\n        $this.tooltip(Object.assign({ html: true, placement: \"bottom\", sanitizeFn: ew.sanitizeFn }, $this.data()));\n    });\n    $el.find(\"a.ew-tooltip-link\").each(tooltip); // Init tooltips\n    $el.find(\".ew-tooltip\").tooltip({ placement: \"bottom\", sanitizeFn: ew.sanitizeFn });\n    $el.find(\".ew-popover\").popover({ sanitizeFn: ew.sanitizeFn });\n}\n\n// Parse JSON\nexport function parseJson(data) {\n    if ($.isString(data)) {\n        try {\n            return JSON.parse(data);\n        } catch(e) {\n            return undefined;\n        }\n    }\n    return data;\n}\n\n// Change search operator\nexport function searchOperatorChanged(el) {\n    var $el = $(el),\n        $p = $el.closest(\"[id^=r_], [id^=xsc_]\"),\n        parm = el.id.substr(2),\n        $fld = $p.find(\".ew-search-field\"),\n        $fld2 = $p.find(\".ew-search-field2\"),\n        $y = $fld2.find(\"[name='y_\" + parm + \"'], [name='y_\" + parm + \"[]']\"),\n        hasY = $y.length,\n        $cond = $p.find(\".ew-search-cond\"),\n        hasCond = $cond.length, // Has condition and operator 2\n        $and = $p.find(\".ew-search-and\"),\n        $opr = $p.find(\".ew-search-operator\"),\n        opr = $opr.find(\"[name='z_\" + parm + \"']\").val(),\n        $opr2 = $p.find(\".ew-search-operator2\"),\n        opr2 = $opr2.find(\"[name='w_\" + parm + \"']\").val(),\n        isBetween = opr == \"BETWEEN\", // Can only be operator 1\n        isNullOpr = [\"IS NULL\", \"IS NOT NULL\"].includes(opr),\n        isNullOpr2 = [\"IS NULL\", \"IS NOT NULL\"].includes(opr2),\n        hideOpr2 = !hasY || isBetween,\n        hideX = isNullOpr,\n        hideY = !isBetween && (!hasCond || isNullOpr2);\n    $cond.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\n    $and.toggleClass(\"d-none\", !isBetween);\n    $opr2.toggleClass(\"d-none\", hideOpr2).find(\":input\").prop(\"disabled\", hideOpr2);\n    $fld.toggleClass(\"d-none\", hideX).find(\":input\").prop(\"disabled\", hideX);\n    $fld2.toggleClass(\"d-none\", hideY).find(\":input\").prop(\"disabled\", hideY);\n}\n\n// Init forms\nfunction initForms(e) {\n    let el = (e && e.target) ? e.target : document,\n        $el = $(el),\n        ids = ew.forms.ids();\n    for (let id of ids) {\n        if ($el.find(\"#\" + id))\n            forms.get(id).init();\n    }\n}\n\n// Prompt/Confirm/Alert\nfunction _prompt(text, cb, input, validator) {\n    if (input) { // Prompt\n        return Swal.fire({\n            ...ew.sweetAlertSettings,\n            html: text,\n            input: \"text\",\n            confirmButtonText: ew.language.phrase(\"OKBtn\"),\n            showCancelButton: $.isFunction(cb),\n            cancelButtonText: ew.language.phrase(\"CancelBtn\"),\n            inputValidator: validator || ((value) => {\n                if (!value)\n                    return ew.language.phrase(\"EnterValue\");\n            })\n        }).then(result => {\n            if ($.isFunction(cb))\n                cb(result.value);\n        });\n    } else { // Confirm or Alert\n        return Swal.fire({\n            ...ew.sweetAlertSettings,\n            html: \"<div>\" + text + \"</div>\",\n            confirmButtonText: ew.language.phrase(\"OKBtn\"),\n            showCancelButton: $.isFunction(cb),\n            cancelButtonText: ew.language.phrase(\"CancelBtn\"),\n        }).then(result => {\n            if ($.isFunction(cb))\n                cb(result.value);\n        });\n    }\n}\n\nexport { _prompt as prompt };\n\n// Toast\nexport function toast(options) {\n    options = Object.assign({}, ew.toastOptions, options);\n    $document.Toasts(\"create\", options);\n    var position = options.position,\n        $container = $(\"#toastsContainer\" + position[0].toUpperCase() + position.substring(1));\n    return $container.children().first();\n}\n\n/**\n * Show toast\n *\n * @param {string} msg - Message\n * @param {string} type - CSS class: \"muted|primary|success|info|warning|danger\"\n */\nexport function showToast(msg, type) {\n    type = type || \"danger\";\n    return toast({\n        class: \"ew-toast bg-\" + type,\n        title: ew.language.phrase(type),\n        body: msg,\n        autohide: (type == \"success\") ? ew.autoHideSuccessMessage : false, // Autohide for success message\n        delay: (type == \"success\") ? ew.autoHideSuccessMessageDelay: 500\n    });\n}\n\n// Get form.ew-form or div.ew-form HTML element\nexport function getForm(el) {\n    if (el instanceof Form)\n        return el.$element[0];\n    var $el = $(el), $f = $el.closest(\".ew-form\");\n    if (!$f[0]) // Element not inside form\n        $f = $el.closest(\".ew-grid, .ew-multi-column-grid\").find(\".ew-form\").not(\".ew-pager-form\");\n    return $f[0];\n}\n\n// Check form data\nexport function hasFormData(form) {\n    var selector = \"[name^=x_],[name^=y_],[name^=z_],[name^=w_],[name=psearch]\",\n        els = $(form).find(selector).filter(\":enabled\").get();\n    for (var i = 0, len = els.length; i < len; i++) {\n        var el = els[i];\n        if (/^(z|w)_/.test(el.name)) {\n            if (/^IS/.test($(el).val()))\n                return true;\n        } else if (el.type == \"checkbox\" || el.type == \"radio\") {\n            if (el.checked)\n                return true;\n        } else if (el.type == \"select-one\" || el.type == \"select-multiple\") {\n            if (!!$(el).val())\n                return true;\n        } else if (el.type == \"text\" || el.type == \"hidden\" || el.type == \"textarea\") {\n            if (el.value)\n                return true;\n        }\n    }\n    return false;\n}\n\n// Set search type\nexport function setSearchType(el, val) {\n    var $this = $(el), $form = $this.closest(\"form\"), text = \"\";\n    $form.find(\"input[name=psearchtype]\").val(val || \"\");\n    if (val == \"=\") {\n        text = ew.language.phrase(\"QuickSearchExactShort\");\n    } else if (val == \"AND\") {\n        text = ew.language.phrase(\"QuickSearchAllShort\");\n    } else if (val == \"OR\") {\n        text = ew.language.phrase(\"QuickSearchAnyShort\");\n    } else {\n        text = ew.language.phrase(\"QuickSearchAutoShort\");\n    }\n    $form.find(\"#searchtype\").html(text + ((text) ? \"&nbsp;\" : \"\"));\n    $this.closest(\"ul\").find(\"li\").removeClass(\"active\");\n    $this.closest(\"li\").addClass(\"active\");\n    return false;\n}\n\n/**\n * Update a dynamic selection list\n *\n * @param {(HTMLElement|HTMLElement[]|string|string[])} obj - Target HTML element(s) or the ID of the element(s)\n * @param {(string[]|array[])} parentId - Parent field element names or data\n * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\n * @param {boolean} change - Trigger onchange event\n * @returns\n */\nexport function updateOptions(obj, parentId, async, change) {\n    var f = (this.$element) ? this.$element[0] : (this.form) ? this.form : null; // Get form/div element from this\n    if (!f)\n        return;\n    var frm = (this.htmlForm) ? this : forms.get(f.id); // Get Form object\n    if (!frm)\n        return;\n    if (this.form && $.isUndefined(obj)) // Target unspecified\n        obj = forms.get(this).getList(this.name).childFields.slice(); // Clone\n    else if ($.isString(obj))\n        obj = getElements(obj, f);\n    if (!obj || Array.isArray(obj) && obj.length == 0)\n        return;\n    var self = this, promise = Promise.resolve();\n    if (Array.isArray(obj) && $.isString(obj[0])) { // Array of id (onchange/onclick event)\n        var els = [];\n        for (var i = 0, len = obj.length; i < len; i++) {\n            var ar = obj[i].split(\" \");\n            if (ar.length == 1 && self.form) { // Parent/Child fields in the same table\n                var m = getId(self, false).match(/^([xy]\\d*_)/);\n                if (m)\n                    obj[i] = obj[i].replace(/^([xy]\\d*_)/, m[1]);\n            }\n            var el = getElements(obj[i], f), names = [];\n            els.push(el);\n            if (ar.length == 2 && Array.isArray(el)) { // Check if id is \"tblvar fldvar\" and multiple inputs\n                var $el = $(el);\n                $el.each(function() {\n                    if (!names.includes(this.name)) {\n                        names.push(this.name);\n                        var $elf = $el.filter(\"[name='\" + this.name + \"']\"), typ = $elf.attr(\"type\"),\n                            elf = [\"radio\", \"checkbox\"].includes(typ) ? $elf.get() : $elf[0];\n                        promise = promise.then(_updateOptions.bind(self, elf, parentId, async, change));\n                    }\n                });\n            } else {\n                promise = promise.then(_updateOptions.bind(self, el, parentId, async, change));\n            }\n        }\n        obj = els;\n        var list = forms.get(self).getList(self.name);\n        if (list && Array.isArray(list.autoFillTargetFields) && list.autoFillTargetFields[0]) // AutoFill\n            promise = promise.then(autoFill.bind(null, self));\n    } else {\n        promise = promise.then(_updateOptions.bind(self, obj, parentId, async, change));\n    }\n    return promise.then(function() {\n        $document.trigger(\"updatedone\", [{ source: self, target: obj }]); // Document \"updatedone\" event fired after all the target elements are updated\n    });\n}\n\n/**\n * Update a dynamic selection list\n *\n * @param {(HTMLElement|HTMLElement[]} obj - Target HTML element(s) or the ID of the element(s)\n * @param {(string[]|array[])} parentId - Parent field element names or data\n * @param {(boolean|null)} async - async(true) or sync(false) or non-Ajax(null)\n * @param {boolean} change - Trigger onchange event\n * @returns Promise\n */\nfunction _updateOptions(obj, parentId, async, change) {\n    var id = getId(obj, false);\n    if (!id)\n        return;\n    var fo = getForm(obj); // Get form/div element from obj\n    if (!fo || !fo.id)\n        return;\n    var frmo = forms.get(fo.id);\n    if (!frmo)\n        return;\n    var self = this,\n        args = Array.from(arguments),\n        ar = getOptionValues(obj),\n        m = id.match(/^([xy])(\\d*)_/),\n        prefix = m ? m[1] : \"\",\n        rowindex = m ? m[2] : \"\",\n        arp = [],\n        list = frmo.getList(id),\n        $obj = $(obj).data(\"updating\", true);\n    if ($obj.data(\"hidden\")) // Skip data-hidden field, e.g. detail key\n        return;\n    if ($.isUndefined(parentId)) { // Parent IDs not specified, use default\n        parentId = list.parentFields.slice(); // Clone\n        if (rowindex != \"\") {\n            for (var i = 0, len = parentId.length; i < len; i++) {\n                var arr = parentId[i].split(\" \");\n                if (arr.length == 1) // Parent field in the same table, add row index\n                    parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\n            }\n        }\n    }\n    if (Array.isArray(parentId) && parentId.length > 0) {\n        if (Array.isArray(parentId[0])) { // Array of array => data\n            arp = parentId;\n        } else if ($.isString(parentId[0])) { // Array of string => Parent IDs\n            for (var i = 0, len = parentId.length; i < len; i++)\n                arp.push(getOptionValues(parentId[i], fo));\n        }\n    }\n    if (!isAutoSuggest(obj)) // Do not clear Auto-Suggest\n        clearOptions(obj);\n    var addOpt = function(results) {\n        var name = getId(obj);\n        results.forEach(function(result) {\n            let args = {\"data\": result, \"parents\": arp, \"valid\": true, \"name\": name, \"form\": fo};\n            $document.trigger(\"addoption\", [args]);\n            if (args.valid)\n                newOption(obj, result, fo);\n        });\n        if (obj.list)\n            obj.render();\n        selectOption(obj, ar);\n        if (change !== false) {\n            if (!obj.options && obj.length)\n                $obj.first().triggerHandler(\"click\");\n            else\n                $obj.first().trigger(\"change\");\n        }\n    }\n    if ($.isUndefined(async)) // Async not specified, use default\n        async = list.ajax;\n    var _updateSibling = function() { // Update the y_* element\n        if (/s(ea)?rch$/.test(fo.id) && prefix == \"x\") { // Search form\n            args[0] = id.replace(/^x_/, \"y_\");\n            updateOptions.apply(self, args); // args[0] is string, use updateOptions()\n        }\n    }\n    if (!$.isBoolean(async) || Array.isArray(list.lookupOptions) && list.lookupOptions.length > 0) { // Non-Ajax or Options loaded\n        var ds = list.lookupOptions;\n        addOpt(ds);\n        _updateSibling();\n        return ds;\n    } else { // Ajax\n        var name = getId(obj), data = Object.assign({\n            page: list.page,\n            field: list.field,\n            ajax: \"updateoption\",\n            language: ew.LANGUAGE_ID,\n            name: name // Name of the target element\n        }, getUserParams(\"#p_\" + id, fo)); // Add user parameters\n        if (isAutoSuggest(obj) && self.htmlForm) // Auto-Suggest (init form or auto-fill)\n            data[\"v0\"] = ar[0] || random(); // Filter by the current value\n        else if (isModalLookup(obj)) // Modal-Lookup\n            data[\"v0\"] = ar[0] ? (obj.multiple ? ar.join(ew.MULTIPLE_OPTION_SEPARATOR) : ar[0]) : random(); // Filter by the current value\n        for (var i = 0, cnt = arp.length; i < cnt; i++) // Filter by parent fields\n            data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\n        return $.ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\n                \"type\": \"POST\", \"dataType\": \"json\", \"data\": data, \"async\": async\n            }).done((result) => {\n                var ds = result.records || [];\n                addOpt(ds);\n                _updateSibling();\n                $obj.first().trigger(\"updated\", [Object.assign({}, result, { target: obj })]); // Object \"updatedone\" event fired after the object is updated\n                return ds;\n            }).always(() => $obj.data(\"updating\", false));\n    }\n}\n\n// Get user parameters from id\nexport function getUserParams(id, root) {\n    var id = id.replace(/\\[\\]$/, \"\"), o = {};\n    var root = !$.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\n    var $els = (root) ? $(root).find(id) : $(id);\n    var val = $els.val();\n    if (val) {\n        var params = new URLSearchParams(val);\n        params.forEach(function(value, key) {\n            o[key] = value;\n        });\n    }\n    return o;\n}\n\n// Apply client side template to a DIV\nexport function applyTemplate(divId, tmplId, classId, exportType, data) { // Note: classId = fileName\n    var args = {\"data\": data || {}, \"id\": divId, \"template\": tmplId, \"class\": classId, \"export\": exportType, \"enabled\": true};\n    $document.trigger(\"rendertemplate\", [args]);\n    if (args.enabled) {\n        if (document.body.replaceWith) { // Not IE\n            var template = document.getElementById(tmplId).content;\n            template.querySelectorAll(\".ew-slot\").forEach(el => {\n                var subtmpl = document.getElementById(el.name || el.id);\n                if (subtmpl && subtmpl.content) {\n                    if (el.dataset.rowspan > 1)\n                        Array.prototype.slice.call(subtmpl.content.childNodes).forEach(node => node.rowSpan = el.dataset.rowspan);\n                    el.replaceWith(subtmpl.content);\n                } else {\n                    el.remove();\n                }\n            });\n            if ($.views) {\n                var textContent = template.textContent;\n                if (textContent.includes(\"{{\") && textContent.includes(\"}}\")) { // Includes JsRender template\n                    var scripts = Array.prototype.slice.call(template.querySelectorAll(\"script\")); // Extract scripts\n                    scripts.forEach(item => item.remove());\n                    var div = document.createElement(\"div\");\n                    div.appendChild(template);\n                    var html = div.innerHTML, tmpl = $.templates(html);\n                    document.getElementById(divId).innerHTML = tmpl.render(args.data, ew.jsRenderHelpers);\n                    scripts.forEach(item => document.body.appendChild(item)); // Add scripts\n                } else {\n                    document.getElementById(divId).appendChild(template);\n                }\n            } else {\n                document.getElementById(divId).appendChild(template);\n            }\n        } else { // IE\n            _alert(ew.language.phrase(\"UnsupportedBrowser\") || \"Your browser is not supported by this page.\");\n        }\n    }\n    if (exportType && exportType != \"print\") { // Export custom\n        $(function() {\n            var $meta = $(\"meta[http-equiv='Content-Type']\"),\n                html = \"<html><head>\",\n                $div = $(\"#\" + divId);\n            if ($div.children(0).is(\"div[id^=ct_]\")) // Remove first div tag\n                $div = $div.children(0);\n            if ($meta[0])\n                html += \"<meta http-equiv='Content-Type' content='\" + $meta.attr(\"content\") + \"'>\";\n            if (exportType == \"pdf\") {\n                html += \"<link rel='stylesheet' type='text/css' href='\" + ew.PDF_STYLESHEET_FILENAME + \"'>\";\n            } else {\n                html += \"<style>\" + $.ajax({async: false, type: \"GET\", url: ew.PROJECT_STYLESHEET_FILENAME}).responseText + \"</style>\";\n            }\n            html += \"</\" + \"head><body>\";\n            $(\".ew-chart-top\").each(function() {\n                html += $(this).html();\n            });\n            html += $div.html();\n            $(\".ew-chart-bottom\").each(function() {\n                html += $(this).html();\n            });\n            html += \"</body></html>\";\n            var url = currentPage(),\n                data = { \"customexport\": exportType, \"data\": html, \"filename\": args.class };\n            data[ew.TOKEN_NAME] = ew.ANTIFORGERY_TOKEN;\n            if (exportType == \"email\") {\n                var str = currentUrl.searchParams.toString() + \"&\" + $.param(data); // Add data\n                $.post(url, str, function(result) {\n                    showMessage(result);\n                });\n            } else {\n                fileDownload(url, data);\n            }\n            window.parent.jQuery(\"body\").css(\"cursor\", \"default\"); // Use window.parent in case in iframe\n        });\n    }\n}\n\n// Toggle group\nexport function toggleGroup(el) {\n    var $el = $(el), $tr = $el.closest(\"tr\"), selector = \"tr\", level;\n    for (var i = 1; i <= 6; i++) {\n        var idx = (i == 1) ? \"\" : \"-\" + i;\n        var data = $tr.data(\"group\" + idx);\n        if ($.isValue(data)) {\n            level = i;\n            if (data != \"\")\n                selector += \"[data-group\" + idx + \"='\" + String(data).replace(/'/g, \"\\\\'\") + \"']\";\n        }\n    }\n    if ($el.hasClass(\"icon-collapse\")) { // Hide\n        $(selector).slice(1).addClass(\"ew-rpt-grp-hide-\" + level);\n        $el.toggleClass(\"icon-expand icon-collapse\");\n    } else {\n        $(selector).slice(1).removeClass(\"ew-rpt-grp-hide-\" + level);\n        $el.toggleClass(\"icon-expand icon-collapse\");\n    }\n}\n\n// Check if boolean value is true\nexport function convertToBool(value) {\n    return value && [\"1\", \"y\", \"t\", \"true\"].includes(value.toLowerCase());\n}\n\n// Check if element value changed\nexport function valueChanged(fobj, infix, fld, bool) {\n    var nelm = getElements(\"x\" + infix + \"_\" + fld, fobj);\n    var oelm = getElement(\"o\" + infix + \"_\" + fld, fobj); // Hidden element\n    var fnelm = getElement(\"fn_x\" + infix + \"_\" + fld, fobj); // Hidden element\n    if (!oelm && (!nelm || Array.isArray(nelm) && nelm.length == 0))\n        return false;\n    var getValue = (obj) => getOptionValues(obj).join();\n    if (oelm && nelm) {\n        if (bool) {\n            if (convertToBool(getValue(oelm)) === convertToBool(getValue(nelm)))\n                return false;\n        } else {\n            var oldvalue = getValue(oelm);\n            var newvalue = (fnelm) ? getValue(fnelm) : getValue(nelm);\n            if (oldvalue == newvalue)\n                return false;\n        }\n    }\n    return true;\n}\n\n// Set language\nexport function setLanguage(el) {\n    var $el = $(el), val = $el.val() || $el.data(\"language\");\n    if (!val)\n        return;\n    var params = new URLSearchParams();\n    currentUrl.searchParams.forEach(function(value, key) {\n        params.append(key, ew.sanitize(value));\n    });\n    params.set(\"language\", ew.sanitize(val));\n    currentUrl.search = params.toString();\n    window.location = currentUrl.toString();\n}\n\n/**\n * Submit action\n *\n * @param {Event} e\n * @param {Object} args - Arguments\n * @param {HTMLElement} args.f - HTML form (default is the form of the source element)\n * @param {string} args.url - URL to which the request is sent (default is current page)\n * @param {Object} args.key - Key as object (for single record only)\n * @param {string} args.msg - Confirm message\n * @param {string} args.action - Custom action name\n * @param {string} args.select - \"single\"|\"s\" (single record) or \"multiple\"|\"m\" (multiple records, default)\n * @param {string} args.method - \"ajax\"|\"a\" (Ajax by HTTP POST) or \"post\"|\"p\" (HTTP POST, default)\n * @param {Object} args.data - Object of user data that is sent to the server\n * @param {string|callback|Object} success - Function to be called if the request succeeds, or settings for jQuery.ajax() (for Ajax only)\n * @returns\n */\nexport function submitAction(e, args) {\n    var el = e.target || e.srcElement, $el = $(el),\n        f = args.f || $el.closest(\"form\")[0] || currentForm, $f = $(f),\n        key = args.key, action = args.action, url = args.url || currentPage(),\n        msg = args.msg, data = args.data, success = args.success,\n        isPost = !args.method || sameText(args.method[0], \"p\"),\n        isMultiple = !args.select && !args.key || args.select && sameText(args.select[0], \"m\");\n    if (isMultiple && !$f[0])\n        return false;\n    if (isMultiple && !keySelected($f[0])) {\n        _prompt(\"<p class=\\\"text-danger\\\">\" + ew.language.phrase(\"NoRecordSelected\") + \"</p>\");\n        return false;\n    }\n    var _success = function(result) {\n        showMessage(result);\n    };\n    var _submit = function() {\n        if (isPost) { // Post back\n            if (action) // Action\n                $(\"<input>\").attr({type: \"hidden\", name: \"useraction\", value: action}).appendTo($f);\n            if ($.isObject(data)) { // User data\n                for (var k in data) {\n                    var $input = $f.find(\"input[type=hidden][name='\" + k + \"']\");\n                    if ($input[0])\n                        $input.val(data[k]);\n                    else\n                        $(\"<input>\").attr({type: \"hidden\", name: k, value: data[k]}).appendTo($f);\n                }\n            }\n            if (!isMultiple && $.isObject(key)) { // Key\n                for (var k in key)\n                    $(\"<input>\").attr({type: \"hidden\", name: k, value: key[k]}).appendTo($f);\n            }\n            $f.prop(\"action\", url).submit();\n            if (action) // Action\n                $f.find(\"input[type=hidden][name=useraction]\").remove(); // Remove the \"useraction\" element\n        } else { // Ajax\n            data = $.isObject(data) ? $.param(data) : $.isString(data) ? data : \"\"; // User data\n            if (action)\n                data += \"&useraction=\" + action + \"&ajax=\" + action; // Action\n            if (isMultiple) // Multiple records\n                data += \"&\" + $f.find(\"input[name='key_m[]']:checked\").serialize(); // Keys\n            else if (key) // Single record\n                data += \"&\" + ($.isObject(key) ? $.param(key) : key); // Key\n            if (success && $.isString(success))\n                success = window[success];\n            if ($.isFunction(success)) {\n                $.post(url, data, success);\n            } else if ($.isObject(success)) { // \"success\" is Ajax settings\n                success.data = data;\n                success.method = success.method || \"POST\";\n                success.success = success.success || _success;\n                $.ajax(url, success);\n            } else {\n                $.post(url, data, _success);\n            }\n        }\n    };\n    if (msg) {\n        _prompt(msg, (result) => {\n            if (result)\n                _submit();\n        });\n    } else {\n        _submit();\n    }\n    return false;\n}\n\n/**\n * Export with selected records and/or Custom Template\n *\n * @param {string} f - Form ID\n * @param {string} url - Form action\n * @param {string} type - Export type\n * @param {boolean} custom - Using Custom Template\n * @param {boolean} sel - Selected records only\n * @param {Object} fobj - email form object\n * @returns false\n */\nfunction _export(f, url, type, custom, sel, fobj) {\n    if (!f)\n        return false;\n    var $f = $(f),\n        target = $f.attr(\"target\"),\n        action = $f.attr(\"action\"),\n        cb = sel && $f.find(\"input[type=checkbox][name='key_m[]']\")[0];\n    if (cb && !keySelected(f)) {\n        _alert(ew.language.phrase(\"NoRecordSelected\"));\n        return false;\n    }\n    if (custom) { // Use Custom Template\n        $(\"iframe.ew-export\").remove();\n        if (type == \"email\")\n            url += (\"&\" + $(fobj).serialize()).replace(/&export=email/i, \"\"); // Remove duplicate export=email\n        if (cb) {\n            $(\"<iframe>\").attr(\"name\", \"ew-export-frame\").addClass(\"ew-export d-none\").appendTo($body);\n            try {\n                $f.append($(\"<input type='hidden'>\").attr({name: \"custom\", value: \"1\"}))\n                    .attr({ \"action\": url, \"target\": \"ew-export-frame\" }).find(\"input[name=exporttype]\").val(type).end().submit();\n            } finally { // Reset\n                $f.attr({ \"target\": target || \"\", \"action\": action }).find(\"input[name=custom]\").remove();\n            }\n        } else {\n            $(\"<iframe>\").attr({ name: \"ew-export-frame\", src: url }).addClass(\"ew-export d-none\").appendTo($body);\n        }\n    } else { // No Custom Template\n        $f.find(\"input[name=exporttype]\").val(type);\n        if ([\"xml\", \"print\"].includes(type))\n            $f.submit(); // Submit the form directly\n        else\n            fileDownload(action, $f.serialize());\n    }\n    return false;\n}\n\nexport { _export as export };\n\n/**\n * Remove spaces\n * @param {string} value\n * @returns {string}\n */\nexport function removeSpaces(value) {\n    return (/^(<(p|br)\\/?>(&nbsp;)?(<\\/p>)?)?$/i.test(value.replace(/\\s/g, \"\"))) ? \"\" : value;\n}\n\n/**\n * Check if hidden text area (HTML editor)\n * @param {HTMLElement|jQuery} el HTML element or jQuery object\n * @returns {boolean}\n */\nexport function isHiddenTextArea(el) {\n    var $el = $(el);\n    return $el.is(\":hidden\") && $el.data(\"editor\");\n}\n\n/**\n * Check if modal lookup\n * @param {HTMLElement|jQuery} el HTML element or jQuery object\n * @returns {boolean}\n */\nexport function isModalLookup(el) {\n    var $el = $(el);\n    return $el.is(\":hidden\") && $el.data(\"lookup\");\n}\n\n/**\n * Check if hidden textbox (Auto-Suggest)\n * @param {HTMLElement|jQuery} el HTML element or jQuery object\n * @returns {boolean}\n */\nexport function isAutoSuggest(el) {\n    var $el = $(el);\n    return $el.is(\":hidden\") && $el.data(\"autosuggest\");\n}\n\n/**\n * Alert\n *\n * @param {string} msg - Message\n * @param {callback} cb - Callback function\n * @param {string} type - CSS class: \"muted|primary|success|info|warning|danger\"\n */\nfunction _alert(msg, cb, type) {\n    return Swal.fire({\n        ...ew.sweetAlertSettings,\n        html: '<p class=\"text-' + (type || 'danger') + '\">' + msg + '</p>',\n        confirmButtonText: ew.language.phrase(\"OKBtn\")\n    }).then(result => {\n        if ($.isFunction(cb))\n            cb(result.value);\n    });\n}\n\nexport { _alert as alert };\n\n/**\n * Clear error message\n * @param {HTMLElement|HTMLElement[]|jQuery} el HTML element(s) or jQuery\n */\nexport function clearError(el) {\n    if (el.jquery) { // el is jQuery object\n        let typ = el.attr(\"type\");\n        el = (typ == \"checkbox\" || typ == \"radio\") ? el.get() : el[0];\n    }\n    $(el).closest(\"[id^=el_], .form-group\").find(\".invalid-feedback\").html(\"\");\n}\n\n/**\n * Show error message\n * @param {Form} frm Form object\n * @param {HTMLElement|HTMLElement[]|jQuery} el HTML element(s) or jQuery\n * @param {string} msg Error message\n * @param {boolean} focus Set focus\n */\nexport function onError(frm, el, msg, focus) {\n    if (el.jquery) { // el is jQuery object\n        let typ = el.attr(\"type\");\n        el = (typ == \"checkbox\" || typ == \"radio\") ? el.get() : el[0];\n    } else if (el instanceof Field) { // el is Field object\n        el = el.element;\n    }\n    $(el).closest(\"[id^=el_], .form-group\").find(\".invalid-feedback\").append(\"<p>\" + msg + \"</p>\");\n    if (focus)\n        setFocus(el);\n    frm?.makeVisible(el);\n    return false;\n}\n\n/**\n * Set focus\n * @param {HTMLElement|HTMLElement[]} obj HTML element(s)\n */\nexport function setFocus(obj) {\n    if (!obj)\n        return;\n    var $obj = $(obj);\n    if (isHidden($obj))\n        return;\n    if (isHiddenTextArea(obj)) { // HTML editor\n        return $obj.data(\"editor\").focus();\n    } else if (isModalLookup(obj)) { // Modal lookup\n        return $obj.parent().find(\".ew-lookup-text\").trigger(\"focus\");\n    } else if (!obj.options && obj.length) { // Radio/Checkbox list\n        obj = $obj[0];\n    } else if (isAutoSuggest(obj)) { // Auto-Suggest\n        obj = obj.input;\n    }\n    $(obj).trigger(\"focus\");\n}\n\n/**\n * Set invalid\n * @param {HTMLElement|HTMLElement[]} obj HTML element(s)\n */\nexport function setInvalid(obj) {\n    if (!obj)\n        return;\n    var $obj = $(obj);\n    if (isHidden($obj))\n        return;\n    if (!obj.options && obj.length) // Radio/Checkbox list\n        obj = $obj[0];\n    var $p = $obj.closest(\".form-group, [id^='el']\");\n    if (isAutoSuggest(obj)) {\n        $p.find(\".ew-auto-suggest\").addClass(\"is-invalid\").one(\"click keydown\", function() {\n            $p.find(\".is-invalid\").removeClass(\"is-invalid\");\n        });\n    } else if (isModalLookup(obj)) {\n        $p.find(\".input-group\").addClass(\"is-invalid\").one(\"click keydown\", function() {\n            $p.find(\".is-invalid\").removeClass(\"is-invalid\");\n        });\n    } else {\n        if (obj.type == \"checkbox\" || obj.type == \"radio\") {\n            $obj.addClass(\"is-invalid\").one(\"click keydown\", function() {\n                $p.find(\".is-invalid\").removeClass(\"is-invalid\");\n            });\n        } else {\n            $obj.addClass(\"is-invalid\").parent().one(\"click keydown\", function() {\n                $p.find(\".is-invalid\").removeClass(\"is-invalid\");\n            })\n            $obj.closest(\".input-group\").addClass(\"is-invalid\");\n        }\n    }\n}\n\n// Check if object has value\nexport function hasValue(obj) {\n    return getOptionValues(obj).join(\"\") != \"\";\n}\n\n// Check if object value is a masked password\nexport function isMaskedPassword(obj) {\n    var val = $(obj).val();\n    return val && val.match(/^\\*+$/);\n}\n\n// Get Ctrl key for multiple column sort\nexport function sort(e, url, type) {\n    if (e.shiftKey && !e.ctrlKey)\n        url = url.split(\"?\")[0] + \"?cmd=resetsort\";\n    else if (type == 2 && e.ctrlKey)\n        url += \"&ctrl=1\";\n    location = url;\n    return true;\n}\n\n// Confirm Delete Message\nexport function confirmDelete(el) {\n    clickDelete(el);\n    _prompt(ew.language.phrase(\"DeleteConfirmMsg\"), (result) => {\n        (result && el.href) ? window.location = el.href : clearDelete(el);\n    });\n    return false;\n}\n\n// Check if any key selected // PHP\nexport function keySelected(f) {\n    return $(f).find(\"input[type=checkbox][name='key_m[]']:checked\", f).length > 0;\n}\n\n// Select all key\nexport function selectAllKey(cb) {\n    selectAll(cb);\n    var tbl = $(cb).closest(\".ew-table\")[0];\n    if (!tbl)\n        return;\n    $(tbl.tBodies).each(function() {\n        $(this.rows).each(function(i, r) {\n            var $r = $(r);\n            if ($r.is(\":not(.ew-template):not(.ew-table-preview-row)\")) {\n                $r.data({ selected: cb.checked, checked: cb.checked });\n                setColor(i, r);\n            }\n        });\n    });\n}\n\n// Select all related checkboxes\nexport function selectAll(cb) {\n    if (!cb || !cb.form)\n        return;\n    $(cb.form.elements).filter(\"input[type=checkbox][name^=\" + cb.name + \"_], [type=checkbox][name=\" + cb.name + \"]\").not(cb).not(\":disabled\").prop(\"checked\", cb.checked);\n}\n\n// Update selected checkbox\nexport function updateSelected(f) {\n    return $(f).find(\"input[type=checkbox][name^=u_]:checked,input:hidden[name^=u_][value=1]\").length > 0;\n}\n\n// Set row color\nexport function setColor(index, row) {\n    var $row = $(row), $tbl = $row.closest(\".ew-table\");\n    if (!$tbl[0])\n        return;\n    if ($row.data(\"selected\")) {\n        $row.removeClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\")\n            .removeClass($tbl.data(\"roweditclass\") || \"ew-table-edit-row\")\n            .addClass($tbl.data(\"rowselectclass\") || \"ew-table-select-row\");\n    } else if ([ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($row.data(\"rowtype\"))) {\n        $row.removeClass($tbl.data(\"rowselectclass\") || \"ew-table-select-row\")\n            .removeClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\")\n            .addClass($tbl.data(\"roweditclass\") || \"ew-table-edit-row\");\n    } else {\n        $row.removeClass($tbl.data(\"rowselectclass\") || \"ew-table-select-row\")\n            .removeClass($tbl.data(\"roweditclass\") || \"ew-table-edit-row\")\n            .removeClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\");\n    }\n}\n\n// Clear selected rows color\nexport function clearSelected(tbl) {\n    $(tbl.rows).each(function(i, r) {\n        var $r = $(r);\n        if (!$r.data(\"checked\") && $r.data(\"selected\")) {\n            $r.data(\"selected\", false);\n            setColor(i, r);\n        }\n    });\n}\n\n// Clear all row delete status\nexport function clearDelete(el) {\n    var $el = $(el), tbl = $el.closest(\".ew-table\")[0];\n    if (!tbl)\n        return;\n    var $tr = $el.closest(\".ew-table > tbody > tr\");\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function(i, r) {\n        var $r = $(r);\n        $r.data(\"selected\", $r.data(\"checked\"));\n    });\n}\n\n// Click single delete link\nexport function clickDelete(el) {\n    var $el = $(el), tbl = $el.closest(\".ew-table\")[0];\n    if (!tbl)\n        return;\n    clearSelected(tbl);\n    var $tr = $el.closest(\".ew-table > tbody > tr\");\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function(i, r) {\n        $(r).data(\"selected\", true);\n        setColor(i, r);\n    });\n}\n\n// Click multiple checkbox\nexport function clickMultiCheckbox(e) {\n    var cb = e.target || e.srcElement, $cb = $(cb), tbl = $cb.closest(\".ew-table\")[0];\n    if (!tbl)\n        return;\n    clearSelected(tbl);\n    var $tr = $cb.closest(\".ew-table > tbody > tr\");\n    $tr.siblings(\"[data-rowindex='\" + $tr.data(\"rowindex\") + \"']\").addBack().each(function(i, r) {\n        $(r).data(\"checked\", cb.checked).data(\"selected\", cb.checked).find(\"input[type=checkbox][name='key_m[]']\").each(function() {\n            if (this != cb) this.checked = cb.checked;\n        });\n        setColor(i, r);\n    });\n    e.stopPropagation();\n}\n\n// Setup table\nexport function setupTable(index, tbl, force) {\n    var $tbl = $(tbl), $rows = $(tbl.rows);\n    if (!tbl || !tbl.rows || !force && $tbl.data(\"isset\") || tbl.tBodies.length == 0)\n        return;\n\n    // Set mouse over color\n    var mouseOver = function(e) {\n        var $this = $(this);\n        if (!$this.data(\"selected\") && ![ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($this.data(\"rowtype\"))) {\n            var $tbl = $this.closest(\".ew-table\");\n            if (!$tbl[0])\n                return;\n            $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().each(function(i, r) {\n                $(r).addClass($tbl.data(\"rowhighlightclass\") || \"ew-table-highlight-row\");\n            });\n        }\n    }\n\n    // Set mouse out color\n    var mouseOut = function(e) {\n        var $this = $(this);\n        if (!$this.data(\"selected\") && ![ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($this.data(\"rowtype\")))\n            $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().each(setColor);\n    }\n\n    // Set selected row color\n    var click = function(e) {\n        var $this = $(this), tbl = $this.closest(\".ew-table\")[0],\n            $target = $(e.target);\n        if (!tbl || $target.hasClass(\"btn\") || $target.hasClass(\"ew-preview-row-btn\") || $target.is(\":input\"))\n            return;\n        if (!$this.data(\"checked\")) {\n            var selected = $this.data(\"selected\");\n            clearSelected(tbl); // Clear all other selected rows\n            $this.siblings(\"[data-rowindex='\" + $this.data(\"rowindex\") + \"']\").addBack().each(function(i, r) {\n                $(r).data(\"selected\", !selected); // Toggle\n                setColor(i, r);\n            });\n        }\n    }\n\n    var n = $rows.filter(\"[data-rowindex=1]\").length || $rows.filter(\"[data-rowindex=0]\").length || 1; // Alternate color every n rows\n    var rows = $rows\n        .filter(\":not(.ew-template)\")\n        .each(function() {\n            $(this.cells).removeClass(\"ew-table-last-row\").last().addClass(\"ew-table-last-col\"); // Cell of last column\n        }).get();\n    var div = $tbl.parentsUntil(\".ew-grid\", \".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\n    if (rows.length) {\n        for (var i = 1; i <= n; i++) {\n            var r = rows[rows.length - i]; // Last rows\n            $(r.cells).each(function() {\n                if (this.rowSpan == i) // Cell of last row\n                    $(this).addClass(\"ew-table-last-row\")\n                        .toggleClass(\"ew-table-border-bottom\", !!div && div.clientHeight > tbl.offsetHeight);\n            });\n        }\n    }\n    var form = $tbl.closest(\"form\")[0];\n    var attach = form && $(form.elements).filter(\"input#action:not([value^=grid])\").length > 0;\n    $(tbl.tBodies[tbl.tBodies.length - 1].rows) // Use last TBODY (avoid Opera bug)\n        .filter(\":not(.ew-template):not(.ew-table-preview-row)\")\n        .each(function(i) {\n            var $r = $(this);\n            if (attach && !$r.data(\"isset\")) {\n                if ([ew.ROWTYPE_ADD, ew.ROWTYPE_EDIT].includes($r.data(\"rowtype\"))) // Add/Edit row\n                    $r.on(\"mouseover\", function() {this.edit = true;}).addClass(\"ew-table-edit-row\");\n                $r.on(\"mouseover\", mouseOver).on(\"mouseout\", mouseOut).on(\"click\", click);\n                $r.data(\"isset\", true);\n            }\n            var sw = i % (2 * n) < n;\n            $r.toggleClass(\"ew-table-row\", sw).toggleClass(\"ew-table-alt-row\", !sw);\n        });\n    setupGrid(index, $tbl.closest(\".ew-grid\")[0], force);\n    $tbl.data(\"isset\", true);\n}\n\n// Setup grid\nexport function setupGrid(index, grid, force) {\n    var $grid = $(grid);\n    if (!grid || !force && $grid.data(\"isset\"))\n        return;\n    var multi = $grid.find(\"table.ew-multi-column-table\").length, rowcnt;\n    if (multi) {\n        rowcnt = $grid.find(\"td[data-rowindex]\").length;\n    } else {\n        rowcnt = $grid.find(\"table.ew-table > tbody\").first().children(\"tr:not(.ew-table-preview-row, .ew-template)\").length;\n    }\n    if (rowcnt == 0 && !$grid.find(\".ew-grid-upper-panel, .ew-grid-lower-panel\")[0])\n        $grid.hide();\n    // if (!$grid.find(\".ew-grid-upper-panel:visible\")[0])\n    // \t$grid.css({\"border-top-left-radius\": 0, \"border-top-right-radius\": 0});\n    // if (!$grid.find(\".ew-grid-lower-panel:visible\")[0])\n    // \t$grid.css({\"border-bottom-left-radius\": 0, \"border-bottom-right-radius\": 0});\n    if ($grid.find(\".ew-grid-middle-panel:visible\").hasClass(ew.RESPONSIVE_TABLE_CLASS) && $grid.width() > $(\".content\").width()) {\n        $grid.addClass(\"d-flex\");\n        $grid.closest(\".ew-detail-pages\").addClass(\"d-block\");\n        $grid.closest(\".ew-form\").addClass(\"w-100\");\n        if (ew.USE_OVERLAY_SCROLLBARS)\n            $grid.find(\".ew-grid-middle-panel:not(.ew-preview-middle-panel)\").overlayScrollbars(ew.overlayScrollbarsOptions);\n    }\n    $grid.data(\"isset\", true);\n}\n\n// Add a row to grid\nexport function addGridRow(el) {\n    var $grid = $(el).closest(\".ew-grid\"),\n        $tbl = $grid.find(\"table.ew-table\").last(), $p = $tbl.parent(\"div\"),\n        $tpl = $tbl.find(\"tr.ew-template\");\n    if (!el || !$grid[0] || !$tbl[0] || !$tpl[0])\n        return false;\n    var $lastrow = $($tbl[0].rows).last();\n    $tbl.find(\"td.ew-table-last-row\").removeClass(\"ew-table-last-row\");\n    var $row = $tpl.clone(true, true).removeClass(\"ew-template\");\n    var $form = $grid.find(\"div.ew-form[id^=f][id$=grid]\");\n    if (!$form[0])\n        $form = $grid.find(\"form.ew-form[id^=f][id$=list]\");\n    var suffix = ($form.is(\"div\")) ? \"_\" + $form.attr(\"id\") : \"\";\n    var $elkeycnt = $form.find(\"#key_count\" + suffix);\n    var keycnt = parseInt($elkeycnt.val(), 10) + 1;\n    $row.attr({ \"id\": \"r\" + keycnt + $row.attr(\"id\").substring(2), \"data-rowindex\": keycnt });\n    var $els = $tpl.find(\"script:contains('$rowindex$')\"); // Get scripts with rowindex\n    $row.children(\"td\").each(function() {\n        $(this).find(\"*\").each(function() {\n            $.each(this.attributes, function(i, attr) {\n                attr.value = attr.value.replace(/\\$rowindex\\$/g, keycnt); // Replace row index\n            });\n        });\n    });\n    $row.find(\".ew-icon\").closest(\"a, button\").removeData(\"bs.tooltip\").tooltip({ container: \"body\", placement: \"bottom\", trigger: \"hover\", sanitizeFn: ew.sanitizeFn });\n    $elkeycnt.val(keycnt).after($(\"<input>\").attr({\n        type: \"hidden\",\n        id: \"k\" + keycnt + \"_action\" + suffix,\n        name: \"k\" + keycnt + \"_action\" + suffix,\n        value: \"insert\"\n    }));\n    $lastrow.after($row);\n    $els.each(function() {\n        addScript(this.text.replace(/\\$rowindex\\$/g, keycnt));\n    });\n    var frm = $form.data(\"form\");\n    if (frm) {\n        frm.initEditors();\n        frm.initUpload();\n    }\n    setupTable(-1, $tbl[0], true);\n    $p.scrollTop($p[0].scrollHeight);\n    return false;\n}\n\n// Delete a row from grid\nexport function deleteGridRow(el, infix) {\n    var $el = $(el).tooltip(\"hide\").removeData(\"bs.tooltip\"),\n        $grid = $el.closest(\".ew-grid, .ew-multi-column-grid\"),\n        $row = $el.closest(\"tr, div[data-rowindex]\"),\n        $tbl = $row.closest(\".ew-table\");\n    if (!el || !$grid[0] || !$row[0])\n        return false;\n    var rowidx = parseInt($row.data(\"rowindex\"), 10);\n    var $form = $grid.find(\"div.ew-form[id^=f][id$=grid]\");\n    if (!$form[0])\n        $form = $grid.find(\"form.ew-form[id^=f][id$=list]\");\n    var frm = $form.data(\"form\");\n    if (!$form[0] || !frm)\n        return false;\n    var suffix = ($form.is(\"div\")) ? \"_\" + $form.attr(\"id\") : \"\";\n    var keycntname = \"#key_count\" + suffix;\n    var _delete = function() {\n        $row.remove();\n        if ($grid.is(\".ew-grid\"))\n            setupTable(-1, $tbl[0], true);\n        if (rowidx > 0) {\n            var $keyact = $form.find(\"#k\" + rowidx + \"_action\" + suffix);\n            if ($keyact[0]) {\n                $keyact.val(($keyact.val() == \"insert\") ? \"insertdelete\" : \"delete\");\n            } else {\n                $form.find(keycntname).after($(\"<input>\").attr({\n                    type: \"hidden\",\n                    id: \"k\" + rowidx + \"_action\" + suffix,\n                    name: \"k\" + rowidx + \"_action\" + suffix,\n                    value: \"delete\"\n                }));\n            }\n        }\n    };\n    if ($.isFunction(frm.emptyRow) && frm.emptyRow(infix)) { // Empty row\n        _delete();\n    } else { // Confirm\n        _prompt(ew.language.phrase(\"DeleteConfirmMsg\"), (result) => {\n            if (result)\n                _delete();\n        });\n    }\n    return false;\n}\n\n// HTML encode text\nexport function htmlEncode(text) {\n    var str = String(text);\n    return str.replace(/&/g, '&amp;').replace(/\\\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n\n// Get form element(s) as single element or array of radio/checkbox\nexport function getElements(el, root) {\n    var selector;\n    if ($.isObject(el) && el.dataset) { // HTML element (e.g. radio/checkbox)\n        selector = \"[data-table='\" + el.dataset.table + \"'][data-field='\" + el.dataset.field + \"']:not([name^=o]):not([name^='x$'])\";\n    } else if ($.isString(el)) {\n        selector = \"[name='\" + el + \"']\";\n        var ar = el.split(\" \"); // Check if \"#id name\"\n        if (ar.length == 2)\n            selector = \"[data-table='\" + ar[0] + \"'][data-field='\" + getId(ar[1]) + \"']:not([name^=o]):not([name^='x$'])\"; // Remove []\n    }\n    var root = !$.isString(root) ? root : /^#/.test(root) ? root : \"#\" + root;\n    selector = \"input\" + selector + \",select\" + selector + \",textarea\" + selector + \",button\" + selector;\n    var $els = (root) ? $(root).find(selector) : $(selector);\n    if ($els.length == 1 && $els.is(\":not([type=checkbox]):not([type=radio])\"))\n        return $els[0];\n    return $els.get();\n}\n\n// Get first element (not necessarily form element)\nexport function getElement(name, root) {\n    var root = $.isString(root) ? \"#\" + root : root,\n        selector = \"#\" + name.replace(/([\\$\\[\\]])/g, \"\\\\$1\") + \",[name='\" + name + \"']\";\n    return (root) ? $(root).find(selector)[0] : $(selector).first()[0];\n}\n\n// Get ancestor by function\nexport function getAncestorBy(node, fn) {\n    while (node = node.parentNode) {\n        if (node && node.nodeType == 1 && (!fn || fn(node)))\n            return node;\n    }\n    return null;\n}\n\n// Check if an element is hidden\nexport function isHidden(el) {\n    var $el = $(el);\n    return $el.css(\"display\") == \"none\" && !$el.closest(\".dropdown-menu\")[0] && !isModalLookup(el) && !isAutoSuggest(el) && !isHiddenTextArea(el) ||\n        getAncestorBy(el, (node) => node.style.display == \"none\" && !node.classList.contains(\"tab-pane\") && !node.classList.contains(\"collapse\")) != null;\n}\n\n// Check if same text\nexport function sameText(o1, o2) {\n    return (String(o1).toLowerCase() == String(o2).toLowerCase());\n}\n\n// Check if same string\nexport function sameString(o1, o2) {\n    return (String(o1) == String(o2));\n}\n\n// Get element value\nexport function getValue(el, form) {\n    if (!el)\n        return \"\";\n    let obj;\n    if ($.isString(el)) {\n        let ar = el.split(\" \");\n        if (ar.length == 2) { // Parent field in master table\n            obj = getElements(el);\n        } else {\n            obj = getElements(el, form);\n        }\n    } else if (el.type == \"radio\" || el.type == \"checkbox\") { // Single radio/checkbox\n        obj = getElements(el);\n    } else {\n        obj = el;\n    }\n    if (obj.options) { // Selection list\n        if (obj.list) {\n            let val = obj.values;\n            return obj.multiple ? val : (val[0] || \"\");\n        } else {\n            let val = Array.prototype.filter.call(obj.options, option => option.selected && option.value !== \"\").map(option => option.value);\n            return (obj.type == \"select-multiple\") ? val : (val[0] || \"\");\n        }\n    } else if ($.isNumber(obj.length)) { // Radio/Checkbox list, or element not found\n        let val = $(obj).filter(\":checked\").map(function() {\n            return this.value;\n        }).get();\n        return (obj.length == 1) ? val[0] : val;\n    } else if (ew.isHiddenTextArea(obj)) {\n        $(obj).data(\"editor\").save();\n        return obj.value;\n    } else { // text/hidden\n        let data = $(obj).data();\n        if (data.lookup && data.multiple) // Modal-Lookup\n            return obj.value.split(ew.MULTIPLE_OPTION_SEPARATOR);\n        else\n            return obj.value;\n    }\n}\n\n// Get existing selected values as an array\nexport function getOptionValues(el, form) {\n    var obj;\n    if ($.isString(el)) {\n        var ar = el.split(\" \");\n        if (ar.length == 2) { // Parent field in master table\n            obj = getElements(el);\n        } else {\n            obj = getElements(el, form);\n        }\n    } else if (el.type == \"radio\" || el.type == \"checkbox\") { // Single radio/checkbox\n        obj = getElements(el);\n    } else {\n        obj = el;\n    }\n    if (obj.options) { // Selection list\n        if (obj.list)\n            return obj.values;\n        else\n            return Array.prototype.filter.call(obj.options, option => option.selected && option.value !== \"\").map(option => option.value);\n    } else if ($.isNumber(obj.length)) { // Radio/Checkbox list, or element not found\n        return $(obj).filter(\":checked\").map(function() {\n            return this.value;\n        }).get();\n    } else if (ew.isHiddenTextArea(obj)) {\n        $(obj).data(\"editor\").save();\n        return [obj.value];\n    } else { // text/hidden\n        var data = $(obj).data();\n        if (data.lookup && data.multiple) // Modal-Lookup\n            return obj.value.split(ew.MULTIPLE_OPTION_SEPARATOR);\n        else\n            return [obj.value];\n    }\n}\n\n// Get existing text of selected values as an array\nexport function getOptionTexts(el, form) {\n    var obj;\n    if ($.isString(el)) {\n        var ar = el.split(\" \");\n        if (ar.length == 2) { // Parent field in master table\n            obj = getElements(el);\n        } else {\n            obj = getElements(el, form);\n        }\n    } else {\n        obj = el;\n    }\n    if (isAutoSuggest(obj)) { // AutoSuggest (before obj.options)\n        return [obj.input.value];\n    } else if (isModalLookup(obj)) { // Modal-Lookup (before obj.options)\n        var $obj = $(obj);\n        return $obj.parent().find(\".ew-lookup-text .ew-option\").map(function() {\n            return $(this).text().trim();\n        }).get();\n    } else if (obj.options) { // Selection list\n        return Array.prototype.filter.call(obj.options, option => option.selected && option.value !== \"\").map(option => option.text);\n    } else if ($.isNumber(obj.length)) { // Radio/Checkbox list, or element not found\n        return $(obj).filter(\":checked\").map(function() {\n            return $(this).parent().text();\n        }).get();\n    } else if (ew.isHiddenTextArea(obj)) {\n        $(obj).data(\"editor\").save();\n        return [obj.value];\n    } else {\n        return [obj.value];\n    }\n}\n\n// Clear existing options\nexport function clearOptions(obj) {\n    if (obj.options) { // Selection list\n        var lo = (obj.type == \"select-multiple\" || // multiple\n            obj.hasAttribute(\"data-dropdown\") || // dropdown\n            convertToBool(obj.getAttribute(\"data-pleaseselect\")) === false || // data-pleaseselect=\"false\"\n            obj.length > 0 && obj.options[0].value != \"\") // non-empty first element\n            ? 0 : 1;\n        if (obj.list) {\n            obj.removeAll();\n        } else {\n            for (var i = obj.length - 1; i >= lo; i--)\n                obj.remove(i);\n        }\n        if (isAutoSuggest(obj)) {\n            obj.input.value = \"\";\n            obj.value = \"\";\n        }\n    }\n}\n\n/**\n * Get the name or id of an element\n *\n * @param {*} el - Element\n * @param {boolean} [remove=true] - Remove square brackets\n * @returns\n */\nexport function getId(el, remove) {\n    var id = ($.isString(el)) ? el : ($(el).attr(\"name\") || $(el).attr(\"id\")); // Use name first (id may have suffix)\n    return (remove !== false) ? id.replace(/\\[\\]$/, \"\") : id;\n}\n\n// Get display value separator\nexport function valueSeparator(index, obj) {\n    var sep = $(obj).data(\"value-separator\");\n    return (Array.isArray(sep)) ? sep[index - 1] : (sep || \", \");\n}\n\n/**\n * Get display value\n *\n * @param {Object} opt - Option being displayed\n * @param {HTMLElment} obj - HTML element\n * @returns {string} Display value\n */\nexport function displayValue(opt, obj) {\n    var text = opt.df;\n    for (var i = 2; i <= 4; i++) {\n        if (opt[\"df\" + i] && opt[\"df\" + i] != \"\") {\n            var sep = valueSeparator(i - 1, obj);\n            if ($.isUndefined(sep))\n                break;\n            if ($.isValue(text))\n                text += sep;\n            text += opt[\"df\" + i];\n        }\n    }\n    return text;\n}\n\n/**\n * Get HTML for a single option\n *\n * @param {*} val - Value of the option\n * @returns {string} HTML\n */\nexport function optionHtml(val) {\n    return ew.OPTION_HTML_TEMPLATE.replace(/\\{value\\}/g, val);\n}\n\n/**\n * Get HTML for diplaying all options\n *\n * @param {string[]} options - Array of all options (HTML)\n * @param {number} max - Maximum number of options to show\n * @returns {string} HTML\n */\nexport function optionsHtml(options, max) {\n    if (options.length > (max || ew.MAX_OPTION_COUNT)) { // More than max option count\n        return ew.language.phrase(\"CountSelected\").replace(\"%s\", options.length);\n    } else if (options.length) { // Some options\n        var html = \"\";\n        for (var i = 0; i < options.length; i++)\n            html += optionHtml(options[i]);\n        return html;\n    } else { // No options\n        return ew.language.phrase(\"PleaseSelect\");\n    }\n}\n\n/**\n * Create new option\n *\n * @param {(HTMLElement|array)} obj - Selection list\n * @param {Object} opt - Object for the new option\n * @param {form} f - form object of obj\n * @returns\n */\nexport function newOption(obj, opt, f) {\n    var frm = forms.get(f.id),\n        id = getId(obj),\n        list = frm.getList(id),\n        value = opt.lf,\n        item = { lf: opt.lf, df1: opt.df, df2: opt.df2, df3: opt.df3, df4: opt.df4 },\n        text;\n    if (list.template && !isAutoSuggest(obj)) {\n        text = list.template.render(item, ew.jsRenderHelpers);\n    } else {\n        text = displayValue(opt, obj) || value;\n    }\n    var args = { \"data\": item, \"name\": id, \"form\": f.$element, \"value\": value, \"text\": text };\n    if (obj.options) { // Selection list\n        let option;\n        if (obj.list) {\n            option = new SelectionListOption(args.value, args.text);\n        } else {\n            option = document.createElement(\"option\");\n            option.value = args.value;\n            option.innerHTML = args.text;\n        }\n        args = { ...args, option };\n        $document.trigger(\"newoption\", [args]); // Fire \"newoption\" event for selection list\n        if (obj.list) {\n            obj.add(args.option.value, args.option.text);\n        } else {\n            obj.add(args.option);\n        }\n    }\n    return args.text;\n}\n\n// Select combobox option\nexport function selectOption(obj, values) {\n    if (!obj || !values)\n        return;\n    var $obj = $(obj);\n    if (Array.isArray(values)) {\n        if (obj.options) { // Selection list\n            if (obj.list) {\n                obj.value = values;\n            } else {\n                $obj.val(values);\n                if (obj.type == \"select-one\" && obj.selectedIndex == -1)\n                    obj.selectedIndex = 0; // Make sure an option is selected (IE)\n            }\n            if (isAutoSuggest(obj) && values.length == 1) {\n                let opts = obj.options || [];\n                for (let opt of opts) {\n                    if (opt.value == values[0]) {\n                        obj.value = opt.value;\n                        obj.input.value = opt.text;\n                        break;\n                    }\n                }\n            } else if (isModalLookup(obj)) {\n                let vals = [],\n                    html = [],\n                    opts = obj.options || [];\n                for (let value of values) {\n                    for (let opt of opts) {\n                        if (value == opt.value) {\n                            vals.push(opt.value);\n                            html.push(optionHtml(opt.text));\n                            break;\n                        }\n                    }\n                }\n                $obj.val(vals.join(ew.MULTIPLE_OPTION_SEPARATOR));\n                $obj.parent().find(\".ew-lookup-text\").html(optionsHtml(html, $obj.data(\"maxcount\")));\n            }\n        } else if (obj.type) {\n            obj.value = values.join(ew.MULTIPLE_OPTION_SEPARATOR);\n        }\n    }\n    // Auto-select if only one option\n    function isAutoSelect(el) {\n        if (!$(el).data(\"autoselect\")) // data-autoselect=\"false\"\n            return false;\n        var form = getForm(el);\n        if (form) {\n            if (/s(ea)?rch$/.test(form.id)) // Search forms\n                return false;\n            var list = forms.get(form.id).getList(el.id);\n            if (list && list.parentFields.length == 0) // No parent fields\n                return false;\n            return true;\n        }\n        return false;\n    }\n    if (!isAutoSelect(obj))\n        return;\n    if (obj.options) { // Selection List\n        if (!obj.list && obj.type == \"select-one\" && obj.options.length == 2 && !obj.options[1].selected) {\n            obj.options[1].selected = true;\n        } else if (obj.options.length == 1 && !obj.options[0].selected) {\n            obj.options[0].selected = true;\n        }\n        if (obj.list)\n            obj.render();\n        if (isAutoSuggest(obj)) {\n            let opts = obj.options || [];\n            if (opts.length == 1) {\n                obj.value = opts[0].value;\n                obj.input.value = opts[0].text;\n            }\n        }\n    }\n}\n\n// Ajax send\n$document.ajaxSend(function(event, jqxhr, settings) {\n    var url = settings.url;\n    if (url.match(/\\/(\\w+preview|session)\\?/i)) // Preview/Session page\n        _removeSpinner(); // Preview has spinner already\n    var apiUrl = getApiUrl(), isApi = url.startsWith(apiUrl), // Is API request\n        allowed = isApi || url.startsWith(currentPage());\n    if (!allowed && url.match(/^http/i)) {\n        var objUrl = new URL(url);\n        allowed = objUrl.hostname == currentUrl.hostname; // Same host name\n    }\n    if (allowed) {\n        if (isApi && ew.API_JWT_TOKEN && !ew.IS_WINDOWS_AUTHENTICATION) // Do NOT set JWT authorization header if Windows Authentication\n            jqxhr.setRequestHeader(ew.API_JWT_AUTHORIZATION_HEADER, \"Bearer \" + ew.API_JWT_TOKEN);\n        if (settings.type == \"GET\") { // GET\n            var ar = settings.url.split(\"?\"), params = new URLSearchParams(ar[1]);\n            params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\n            params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\n            ar[1] = params.toString();\n            settings.url = ar[0] + (ar[1] ? \"?\" + ar[1] : \"\");\n        } else { // POST\n            if (settings.data instanceof FormData) { // FormData\n                settings.data.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\n                settings.data.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\n            } else {\n                var params = new URLSearchParams(settings.data);\n                params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // Add token name // PHP\n                params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // Add antiforgery token // PHP\n                settings.data = params.toString();\n            }\n        }\n    }\n});\n\n// Ajax start\n$document.ajaxStart(function() {\n    $document.data(\"_ajax\", true);\n    ew.addSpinner();\n    $(\"form.ew-form\").addClass(\"ew-wait\").each(function() {\n        var frm = forms.get(this.id);\n        if (frm) {\n            if (!frm.multiPage || !frm.multiPage.lastPageSubmit)\n                frm.disableForm();\n        }\n    });\n});\n\n// Ajax stop (internal)\nfunction _ajaxStop() {\n    $(\"form.ew-form.ew-wait\").removeClass(\"ew-wait\").each(function() {\n        var frm = forms.get(this.id);\n        if (frm) {\n            if (!frm.multiPage || !frm.multiPage.lastPageSubmit) {\n                frm.enableForm();\n            }\n        }\n    });\n    ew.removeSpinner();\n    $document.data(\"_ajax\", false);\n}\n\n// Ajax stop/error\n$document.ajaxStop(_ajaxStop).ajaxError(_ajaxStop);\n\n// Execute JavaScript in HTML loaded by Ajax\nexport function executeScript(html, id) {\n    let matches = html.replace(/<head>[\\s\\S]*<\\/head>/, \"\").matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig);\n    Array.from(matches).forEach((ar, i) => {\n        let text = ar[2];\n        if (/(\\s+type\\s*=\\s*['\"]*text\\/javascript['\"]*)|^((?!\\s+type\\s*=).)*$/i.test(ar[1]) && text)\n            addScript(text, \"scr_\" + id + \"_\" + i++);\n    });\n}\n\n// Strip JavaScript in HTML loaded by Ajax\nexport function stripScript(html) {\n    let matches = html.matchAll(/<script([^>]*)>([\\s\\S]*?)<\\/script\\s*>/ig);\n    for (let ar of matches) {\n        let text = ar[0];\n        if (/(\\s+type\\s*=\\s*['\"]*text\\/javascript['\"]*)|^((?!\\s+type\\s*=).)*$/i.test(ar[1]))\n            html = html.replace(text, \"\");\n    }\n    return html;\n}\n\n// Add SCRIPT tag\nexport function addScript(text, id) {\n    var scr = document.createElement(\"SCRIPT\");\n    if (id)\n        scr.id = id;\n    scr.text = text;\n    return document.body.appendChild(scr); // Do not use jQuery so it can be removed\n}\n\n// Remove JavaScript added by Ajax\nexport function removeScript(id) {\n    if (id)\n        $(\"script[id^='scr_\" + id + \"_']\").remove();\n}\n\n// Clean HTML loaded by Ajax for modal dialog\nexport function getContent(html) {\n    let body = stripScript(html).match(/<body[\\s\\S]*>[\\s\\S]*<\\/body>/i);\n    return body ? $(body[0]).not(\"div[id^=ew].modal, #ew-tooltip, #ew-drilldown-panel, #cookie-consent, #template-upload, #template-download\") : $();\n}\n\n// Get all options of Selection list or Radio/Checkbox list as array\nexport function getOptions(obj) {\n    return obj.options ? Array.prototype.map.call(obj.options, (opt) => [opt.value, opt.text]) : [];\n}\n\n/**\n * Show Add Option dialog\n *\n * @param {Object} args - Arguments\n * @param {Object} args.frm - form object\n * @param {HTMLElement} args.lnk - Add option anchor element\n * @param {string} args.el - Form element name\n * @param {string} args.url - URL of the Add form\n * @returns\n */\nexport function addOptionDialogShow(args) {\n\n    // Hide dialog\n    var _hide = function() {\n        removeScript($dlg.data(\"args\").el);\n        var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\n        if (frm)\n            frm.destroyEditor();\n        $dlg.find(\".modal-body\").html(\"\");\n        $dlg.find(\".modal-footer .btn-primary\").unbind();\n        $dlg.data(\"showing\", false);\n    }\n\n    var $dlg = ew.addOptionDialog || $(\"#ew-add-opt-dialog\").on(\"hidden.bs.modal\", _hide);\n    if (!$dlg[0]) {\n        _alert(\"DIV #ew-add-opt-dialog not found.\");\n        return;\n    }\n    if ($dlg.data(\"showing\"))\n        return;\n    $dlg.data(\"showing\", true);\n\n    // Submission success\n    var _submitSuccess = function(data) {\n        var results = data,\n            args = $dlg.data(\"args\"),\n            frm = forms.get(args.lnk), // form object\n            objName = $dlg.find(\".modal-body form input[name='\" + ew.API_OBJECT_NAME + \"']\").val(), // Get object name from form\n            el = args.el, // HTML element name\n            re = /^x(\\d+)_/,\n            m = el.match(re), // Check row index\n            prefix = m ? m[0] : \"x_\",\n            index = m ? m[1] : -1,\n            name = el.replace(re, \"x_\"),\n            list = frm.getList(el);\n        if ($.isString(data))\n            results = parseJson(data);\n        if (results?.success && results[objName]) { // Success\n            $dlg.modal(\"hide\");\n            var result = results[objName],\n                form = frm.$element[0], // HTML form or DIV\n                obj = getElements(el, form);\n            if (obj) {\n                var lf = list.linkField,\n                    dfs = list.displayFields.slice(), // Clone\n                    ffs = list.filterFields.slice(), // Clone\n                    pfs = list.parentFields.slice(); // Clone\n                pfs.forEach((pf, i) => {\n                    if (pf.split(\" \").length == 1) // Parent field in the same table, add row index\n                        pfs[i] = pfs[i].replace(/^x_/, prefix);\n                });\n                var lfv = (lf != \"\") ? result[lf] : \"\",\n                    row = { lf: lfv };\n                dfs.forEach((df, i) => {\n                    if (df in result)\n                        row[\"df\" + (i || \"\")] = result[df];\n                });\n                ffs.forEach((ff, i) => {\n                    if (ff in result)\n                        row[\"ff\" + (i || \"\")] = result[ff];\n                });\n                if (lfv && dfs.length > 0 && row[\"df\"]) {\n                    if (list.ajax === null) // Non-Ajax\n                        list.lookupOptions.push(row);\n                    var arp = pfs.map(pf => getOptionValues(pf, form)), // Get the parent field values\n                        args = {\"data\": row, \"parents\": arp, \"valid\": true, \"name\": getId(obj), \"form\": form};\n                    $document.trigger(\"addoption\", [args]);\n                    if (args.valid) { // Add the new option\n                        var ar = getOptions(obj),\n                            vals = [];\n                        var txt = newOption(obj, row, form);\n                        if (obj.options) {\n                            obj.options[obj.options.length - 1].selected = true;\n                            if (obj.list) { // Radio/Checkbox list\n                                obj.render();\n                                $(obj.target).find(\"input\").last().trigger(\"focus\");\n                            }\n                            if (isAutoSuggest(obj)) {\n                                $(obj).val(lfv).trigger(\"change\");\n                                $(obj.input).val(txt).trigger(\"focus\");\n                            } else if (isModalLookup(obj)) {\n                                var $obj = $(obj), $lu = $(getElement(\"lu_\" + args.name, form));\n                                if (obj.multiple) { // Add to existing values\n                                    var val = $(obj).val(), vals = [], nv = String(lfv);\n                                    if (val !== \"\")\n                                        vals = val.split(ew.MULTIPLE_OPTION_SEPARATOR);\n                                    if (!vals.includes(nv)) {\n                                        vals.push(nv);\n                                        $obj.val(vals.join()).trigger(\"change\");\n                                        var html = $lu.html(), arOpt = $lu.find(\".ew-option\").map(function() {\n                                            return $(this).html();\n                                        }).get();\n                                        if (arOpt.length) { // Some options selected\n                                            arOpt.push(txt);\n                                            $lu.html(optionsHtml(arOpt, $obj.data(\"maxcount\")));\n                                        } else if (html == ew.language.phrase(\"PleaseSelect\")) { // No options selected\n                                            $lu.html(optionHtml(txt));\n                                        } else if (html) { // Many options selected\n                                            $lu.html(ew.language.phrase(\"CountSelected\").replace(\"%s\", vals.length));\n                                        }\n                                    }\n                                } else {\n                                    $obj.val(lfv).trigger(\"change\");\n                                    $lu.html(txt);\n                                }\n                            } else {\n                                $(obj).trigger(\"change\").trigger(\"focus\");\n                            }\n                        }\n                        var $form = $(form), suffix = ($form.is(\"div\")) ? \"_\" + $form.attr(\"id\") : \"\";\n                        var cnt = $form.find(\"#key_count\" + suffix).val();\n                        if (cnt > 0) { // Grid-Add/Edit, update other rows\n                            for (var i = 1; i <= cnt; i++) {\n                                if (i == index)\n                                    continue;\n                                var obj2 = getElements(name.replace(/^x/, \"x\" + i), form);\n                                var ar2 = getOptions(obj2), vals = [];\n                                if (JSON.stringify(ar) != JSON.stringify(ar2)) // Not same options\n                                    continue;\n                                newOption(obj2, row, form);\n                                if (obj2.options && obj.list) // Radio/Checkbox list\n                                    obj2.render();\n                            }\n                        }\n                    }\n                }\n            }\n        } else { // Failure\n            if (results?.error) {\n                 if ($.isString(results.error))\n                    showToast(results.error);\n                else if ($.isString(results.error?.description))\n                    showToast(results.error.description);\n            } else {\n                var msg,\n                    $div = $(\"<div></div>\").html(data).find(\"div.ew-message-dialog\");\n                if ($div[0]) {\n                    msg = $div.html();\n                } else {\n                    msg = results?.failureMessage || data;\n                    if (!msg || String(msg).trim() == \"\")\n                        msg = ew.language.phrase(\"InsertFailed\");\n                }\n                showToast(msg);\n            }\n        }\n    }\n\n    // Fail\n    var _fail = function(o) {\n        $dlg.modal(\"hide\");\n        _alert(\"Server Error \" + o.status + \": \" + o.statusText);\n    }\n\n    // Submit\n    var _submit = function(e) {\n        let $dlg = ew.addOptionDialog,\n            form = $dlg.find(\".modal-body form\")[0],\n            frm = forms.get(form.id),\n            btn = e ? e.target : null,\n            $btn = $(btn);\n        if (frm.canSubmit()) {\n            $btn.prop(\"disabled\", false).removeClass(\"disabled\");\n            $body.css(\"cursor\", \"wait\");\n            $.post(getApiUrl(ew.API_ADD_ACTION), $(form).serialize(), _submitSuccess).fail(_fail).always(function() {\n                frm.enableForm();\n                $btn.prop(\"disabled\", false).removeClass(\"disabled\");\n                $body.css(\"cursor\", \"default\");\n            });\n        }\n        return false;\n    }\n\n    $dlg.modal(\"hide\");\n    $dlg.data(\"args\", args);\n\n    // Get form HTML\n    var success = function(data) {\n        var frm = forms.get(args.lnk),\n            prefix = \"x_\",\n            m = args.el.match(/^(x\\d+_)/);\n        if (m) // Contains row index\n            prefix = m[1];\n        var list = frm.getList(args.el),\n            pfs = list.parentFields.slice() // Clone\n                .map(pf => (pf.split(\" \").length == 1) ? pf.replace(/^x_/, prefix) : pf), // Parent field in the same table, add row index\n            form = frm.htmlForm,\n            ar = pfs.map(pf => getOptionValues(pf, form)),\n            ar2 = pfs.map(pf => getOptionTexts(pf, form)),\n            ffs = list.filterFieldVars.slice(); // Clone\n        $dlg.find(\".modal-title\").html($(args.lnk).closest(\".ew-add-opt-btn\").data(\"title\"));\n        $dlg.find(\".modal-body\").html(stripScript(data));\n        var form = $dlg.find(\".modal-body form\")[0];\n        if (form) { // Set the filter field value\n            $(form).keypress(function(e) {\n                if (e.which == 13 && e.target.nodeName != \"TEXTAREA\")\n                    return _submit();\n            });\n            ar.forEach((v, i) => {\n                (function() {\n                    var obj = getElements(ffs[i], form);\n                    if (obj) {\n                        if (obj.options || obj.length) { // Selection list\n                            $(obj).first().one(\"updatedone\", () => selectOption(obj, v));\n                        } else {\n                            selectOption(obj, v);\n                        }\n                    }\n                })();\n            });\n        }\n        ew.addOptionDialog = $dlg.modal(\"show\");\n        $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\n        executeScript(data, args.el);\n        if (form) { // Set the filter field value\n            ar.forEach((v, i) => {\n                var obj = getElements(ffs[i], form);\n                if (obj) {\n                    if (isAutoSuggest(obj)) { // AutoSuggest\n                        obj.value = v[0];\n                        obj.input.value = ar2[i][0];\n                        obj.add(v[0], ar2[i][0], true);\n                    } else if (isModalLookup(obj)) { // Modal-Lookup\n                        obj.value = v[0];\n                        updateOptions.call(forms.get(form.id), obj);\n                    } else if (obj.options || obj.length) { // Selection list\n                        // Skip\n                    } else { // Text\n                        obj.value = v[0];\n                    }\n                }\n            });\n        }\n        $dlg.trigger(\"load.ew\");\n    };\n    $.get(args.url, success).fail(_fail);\n}\n\n// Hide Modal dialog\nexport function modalDialogHide(e) {\n    var $dlg = $(this), args = $dlg.data(\"args\");\n    removeScript(\"ModalDialog\");\n    var frm = $dlg.removeData(\"args\").find(\".modal-body form\").data(\"form\");\n    if (frm)\n        frm.destroyEditor();\n    var $bd = $dlg.find(\".modal-body\").html(\"\");\n    if ($bd.ewjtable && $bd.ewjtable(\"instance\"))\n        $bd.ewjtable(\"destroy\");\n    $dlg.find(\".modal-footer .btn-primary\").unbind();\n    $dlg.find(\".modal-dialog\").removeClass(function(index, className) {\n        var m = className.match(/table\\-\\w+/);\n        return (m) ? m[0] : \"\";\n    });\n    $dlg.data(\"showing\", false);\n    $dlg.data(\"url\", null);\n    if (args && args.reload)\n        window.location.reload(true);\n}\n\n/**\n * Show modal dialog\n *\n * @param {Object} args - Arguments\n * @param {HTMLFormElement} args.f - Form of List page\n * @param {HTMLElement} args.lnk - Anchor element\n * @param {string} args.url - URL of the form\n * @param {string|null} args.btn - Button phrase ID\n * @param {string} args.caption - Caption in dialog header\n * @param {boolean} args.reload - Reload page after hiding dialog or not\n * @param {string} args.size - Size of the dialog 'modal-sm'|''|modal-lg'|'modal-xl'(default)\n * @returns false\n */\nexport function modalDialogShow(args) {\n    $(args.lnk).tooltip(\"hide\");\n    var f = args.f;\n    if (f && !keySelected(f)) {\n        _prompt(\"<p class=\\\"text-danger\\\">\" + ew.language.phrase(\"NoRecordSelected\") + \"</p>\");\n        return false;\n    }\n\n    var $dlg = ew.modalDialog || $(\"#ew-modal-dialog\").on(\"hidden.bs.modal\", modalDialogHide); // div#ew-modal-dialog always exists\n    if ($dlg.data(\"showing\") && $dlg.data(\"url\") == args.url)\n        return false;\n    $dlg.data({ showing: true, url: args.url });\n    args.reload = false;\n\n    // size\n    if (args.size === \"modal-sm\") { // 300px\n        $dlg.find(\".modal-dialog\").toggleClass(\"modal-sm\", true).toggleClass(\"modal-lg modal-xl\", false);\n    } else if (args.size === \"\") { // 500px\n        $dlg.find(\".modal-dialog\").toggleClass(\"modal-sm modal-lg modal-xl\", false);\n    } else if (args.size === \"modal-lg\") { // 800px\n        $dlg.find(\".modal-dialog\").toggleClass(\"modal-lg\", true).toggleClass(\"modal-sm modal-xl\", false);\n    } else { // Default = 1140px\n        $dlg.find(\".modal-dialog\").toggleClass(\"modal-xl\", true).toggleClass(\"modal-sm modal-lg\", false);\n    }\n\n    // caption\n    var _caption = function() {\n        var args = $dlg.data(\"args\");\n        var $lnk = $(args.lnk);\n        return args.caption || $lnk.data(\"caption\") || $lnk.data(\"original-title\") || \"\";\n    };\n\n    // button text\n    var _button = function() {\n        var args = $dlg.data(\"args\");\n        if ($.isNull(args.btn))\n            return \"\";\n        else if (args.btn && args.btn != \"\")\n            return ew.language.phrase(args.btn);\n        else\n            return _caption();\n    };\n\n    // fail\n    var _fail = function(o) {\n        $dlg.modal(\"hide\");\n        if (o.status)\n            _alert(\"Server Error \" + o.status + \": \" + o.statusText);\n    }\n\n    // always\n    var _always = function(o) {\n        $body.css(\"cursor\", \"default\");\n    }\n\n    // check if current page\n    var _current = function(url) {\n        var a = $(\"<a>\", { href: url })[0];\n        return window.location.pathname.endsWith(a.pathname);\n    }\n\n    // submit success\n    var _submitSuccess = function(data) {\n        var result = parseJson(data);\n        if ($.isObject(result)) {\n            if ($.isString(result.failureMessage)) {\n                _alert(result.failureMessage);\n            } else if (result.error) {\n                if ($.isString(result.error))\n                    _alert(result.error);\n                else if ($.isString(result.error?.description))\n                    _alert(result.error.description);\n            } else {\n                var url = result.url;\n                if (result.modal && !_current(url)) {\n                    var args = $dlg.data(\"args\");\n                    args.reload = true;\n                    if (result.caption)\n                        args.caption = result.caption;\n                    args.btn = result.view ? null : \"\";\n                    $dlg.data(\"args\", args);\n                    url += (url.split(\"?\").length > 1 ? \"&\" : \"?\") + \"modal=1&rnd=\" + random();\n                    $body.css(\"cursor\", \"wait\");\n                    $.ajax(url).done(success).fail(_fail).always(_always);\n                } else {\n                    $dlg.modal(\"hide\");\n                    window.location = url;\n                }\n            }\n        } else {\n            var body = getContent(data);\n            if (body.length) { // Has HTML elements\n                var $bd = $dlg.find(\".modal-body\").html(body);\n                var footer = \"\";\n                var cf = $bd.find(\"#confirm\");\n                var ct = $bd.find(\"#conflict\");\n                if (ct && ct.val() == \"1\") { // Conflict page\n                    footer += \"<button type=\\\"button\\\" id=\\\"btn-overwrite\\\" class=\\\"btn btn-primary ew-btn\\\">\" + ew.language.phrase(\"OverwriteBtn\") + \"</button>\";\n                    footer += \"<button type=\\\"button\\\" id=\\\"btn-reload\\\" class=\\\"btn btn-default ew-btn\\\">\" + ew.language.phrase(\"ReloadBtn\") + \"</button>\";\n                    footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\n                    $dlg.find(\".modal-footer\").html(footer);\n                    $dlg.find(\".modal-footer #btn-overwrite\").on('click', {action: 'overwrite'}, _submit);\n                    $dlg.find(\".modal-footer #btn-reload\").on('click', {action: 'show'}, _submit);\n                } else if (cf && cf.val() == \"confirm\") { // Confirm page\n                    footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + ew.language.phrase(\"ConfirmBtn\") + \"</button>\";\n                    footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\n                    $dlg.find(\".modal-footer\").html(footer);\n                    $dlg.find(\".modal-footer .btn-primary\").click(_submit).focus();\n                    $dlg.find(\".modal-footer .btn-default\").on(\"click\", {action: \"cancel\"}, _submit);\n                } else { // Normal page\n                    var btn = _button();\n                    if (btn)\n                        footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + btn + \"</button>\";\n                    footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\n                    $dlg.find(\".modal-footer\").html(footer);\n                    $dlg.find(\".modal-footer .btn-primary\").addClass(\"ew-submit\").click(_submit).focus();\n                }\n                executeScript(data, \"ModalDialog\");\n                $dlg.trigger(\"load.ew\"); // Trigger load event for, e.g. Use JavaScript popup message\n            } else if (data) {\n                $dlg.modal(\"hide\");\n                ew.alert(data);\n            }\n        }\n    }\n\n    // submit\n    var _submit = function(e) {\n        var form = $dlg.find(\".modal-body form\")[0],\n            $form = $(form),\n            frm = forms.get(form.id),\n            action = e && e.data ? e.data.action : null,\n            btn = e ? e.target : null;\n        if (btn) {\n            if (btn.classList.contains(\"disabled\"))\n                return false;\n            frm.enableForm = function() {\n                $(btn).prop(\"disabled\", false).removeClass(\"disabled\");\n            };\n            frm.disableForm = function() {\n                $(btn).prop(\"disabled\", true).addClass(\"disabled\");\n            };\n        }\n        var input = form.elements[\"action\"];\n        if (action && input)\n            input.value = action; // Update action\n        if (action == \"cancel\") { // Cancel\n            $.post($form.attr(\"action\"), $form.serialize(), success).fail(_fail).always(_always);\n        } else if (frm.canSubmit()) {\n            $body.css(\"cursor\", \"wait\");\n            $.post($form.attr(\"action\"), $form.serialize(), _submitSuccess).fail(_fail).always(function() {\n                frm.enableForm();\n                _always();\n            });\n        }\n        return false;\n    }\n\n    $dlg.modal(\"hide\");\n    $dlg.data(\"args\", args);\n\n    var success = function(data) {\n        var result = parseJson(data);\n        if ($.isObject(result)) {\n            if (result.error)\n                _alert(result.error);\n        } else {\n            var args = $dlg.data(\"args\");\n            var $lnk = $(args.lnk);\n            $dlg.find(\".modal-title\").html(_caption());\n            var footer = \"\";\n            var btn = _button();\n            if (btn)\n                footer += \"<button type=\\\"button\\\" class=\\\"btn btn-primary ew-btn\\\">\" + btn + \"</button>\";\n            if (footer != \"\")\n                footer += \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CancelBtn\") + \"</button>\";\n            else\n                footer = \"<button type=\\\"button\\\" class=\\\"btn btn-default ew-btn\\\" data-dismiss=\\\"modal\\\">\" + ew.language.phrase(\"CloseBtn\") + \"</button>\";\n            $dlg.find(\".modal-footer\").html(footer);\n            var body = getContent(data);\n            $dlg.find(\".modal-body\").html(body);\n            var table = $lnk.data(\"table\");\n            if (table)\n                $dlg.find(\".modal-dialog\").addClass(\"table-\" + table);\n            var $btn = $dlg.find(\".modal-footer .btn-primary\").addClass(\"ew-submit\").click(_submit);\n            $dlg.find(\".modal-body form\").keypress(function(e) {\n                if (e.which == 13 && e.target.nodeName != \"TEXTAREA\")\n                    return $btn.click();\n            });\n            ew.modalDialog = $dlg.modal(\"show\");\n            executeScript(data, \"ModalDialog\");\n            $dlg.trigger(\"load.ew\"); // Trigger load event for, e.g. YouTube videos, ReCAPTCHA and Google maps\n            $btn.focus();\n        }\n    };\n\n    $body.css(\"cursor\", \"wait\");\n\n    var url = args.url;\n    if (f) { // Post form\n        var $f = $(f);\n        if (!f.elements.modal)\n            $(\"<input>\").attr({type: \"hidden\", name: \"modal\", value: \"1\"}).appendTo($f);\n        $.post(url, $f.serialize(), success).fail(_fail).always(_always);\n    } else {\n        url += (url.split(\"?\").length > 1 ? \"&\" : \"?\") + \"modal=1&rnd=\" + random();\n        $.get(url, success).fail(_fail).always(_always);\n    }\n\n    return false;\n}\n\n// Show Modal Lookup\nexport function modalLookupShow(args) {\n    var el = args.el, f = getForm(args.lnk);\n    if (!f || !el)\n        return;\n\n    var $dlg = ew.modalLookupDialog || $(\"#ew-modal-lookup-dialog\").on(\"hidden.bs.modal\", modalDialogHide);\n    if (!$dlg[0]) {\n        _alert(\"DIV #ew-modal-lookup-dialog not found.\");\n        return;\n    }\n    if ($dlg.data(\"showing\"))\n        return;\n    $dlg.data(\"showing\", true);\n\n    var $f = $(f),\n        $input = $f.find(\"[id='\" + el + \"']\"), // id may contains \"[]\"\n        $bd = $dlg.find(\".modal-body\"),\n        $lnk = $(args.lnk),\n        $lu = $lnk.closest(\".ew-lookup-list\").find(\".ew-lookup-text\").trigger(\"focus\"),\n        oid = getId(el, false),\n        m = oid.match(/^([xy])(\\d*)_/),\n        rowindex = m ? m[2] : \"\",\n        list = forms.get(f.id).getList(el);\n\n    // Format data\n    var _format = function(data) {\n        if (data.result == \"OK\" && Array.isArray(data.records)) {\n            data.records.forEach(function(ar, index) {\n                var item;\n                if (Array.isArray(ar))\n                    item = { \"lf\": ar[0], \"df1\": ar[1], \"df2\": ar[2], \"df3\": ar[3], \"df4\": ar[4] };\n                else if ($.isObject(ar))\n                    item = { lf: ar.lf, df1: ar.df, df2: ar.df2, df3: ar.df3, df4: ar.df4 };\n                var txt = displayValue(ar, $input);\n                if (list.template) {\n                    item[\"df\"] = list.template.render(item, ew.jsRenderHelpers);\n                } else {\n                    item[\"df\"] = txt;\n                }\n                item[\"txt\"] = txt;\n                data.records[index] = item;\n            });\n        }\n        return data;\n    }\n\n    // Set AutoSuggest\n    var setAutoSuggest = function(value, text) {\n        if (!isAutoSuggest($input))\n            return;\n        let el = $input[0];\n        el.add(value, text, true);\n        el.input.value = text;\n    }\n\n    // Add option\n    var addOpt = function(ar) {\n        // Check if selected records are in the current page\n        var vals = [], html = [], opts = [], txts = [], useText = !args.m && args.srch;\n        $bd.ewjtable(\"selectedRows\").each(function() {\n            var record = $(this).data(\"record\");\n            vals.push(record.lf);\n            html.push(record.df);\n            opts.push(record.df);\n            txts.push(record.txt); // Text for Auto-Suggest\n        });\n        if (ar.sort().join() === vals.sort().join()) { // All selected records are from the current page\n            $lu.html(optionsHtml(opts, $input.data(\"maxcount\")));\n            setAutoSuggest(vals.join(), txts.join(\", \"));\n            $input.val(useText ? html.join(\", \") : vals.join()).trigger(\"change\");\n        } else { // Get selected records from server\n            var data = Object.assign({ page: list.page, field: list.field, ajax: \"modal\", keys: ar }, getUserParams('#p_' + oid, f));\n            $body.css(\"cursor\", \"wait\");\n            $.ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\n                type: \"POST\",\n                dataType: \"json\",\n                data: data\n            }).done(_format).then(function(data) {\n                if (data.result == \"OK\" && Array.isArray(data.records)) {\n                    var vals = [], html = [], opts = [], txts = [], results = data.records;\n                    for (let result of results) {\n                        vals.push(result.lf);\n                        html.push(result.df)\n                        opts.push(result.df);\n                        txts.push(result.txt); // Text for Auto-Suggest\n                    }\n                    $lu.html(optionsHtml(opts, $input.data(\"maxcount\")));\n                    setAutoSuggest(vals.join(), txts.join(\", \"));\n                    $input.val(useText ? html.join(\", \") : vals.join()).trigger(\"change\");\n                }\n            }).always(function() {\n                $body.css(\"cursor\", \"default\");\n            });\n        }\n    }\n\n    // Submit\n    var _submit = function() {\n        addOpt(arLinkValue);\n        $dlg.modal(\"hide\");\n        return false;\n    }\n\n    // Hide\n    $dlg.modal(\"hide\");\n    $dlg.data(\"args\", args);\n    var _timer, $search;\n\n    // Success\n    var success = function(data) {\n        if (data.result == \"OK\") {\n            $dlg.find(\".modal-title\").html($lnk.attr(\"title\") || $lnk.data(\"original-title\"));\n            $dlg.find(\".modal-body .ewjtable thead\").toggle(!!args.m);\n            $dlg.find(\".modal-footer\").html('<button type=\"button\" id=\"btn-select\" class=\"btn btn-primary ew-btn\">' + ew.language.phrase(\"SelectBtn\") + '</button>' +\n                '<button type=\"button\" class=\"btn btn-default ew-btn\" data-dismiss=\"modal\">' + ew.language.phrase(\"CancelBtn\") + '</button>');\n            $search = $dlg.find(\".modal-header .modal-tools input[name=sv]\").off(\"keyup.ew\").on(\"keyup.ew\", function(e) {\n                    if (_timer)\n                        _timer.cancel();\n                    _timer = $.later(ew.LOOKUP_DELAY, null, function() {\n                        $bd.ewjtable(\"load\", { \"sv\": $search.val() });\n                    });\n                });\n            $dlg.find(\".modal-footer #btn-select\").click(_submit); // Select\n            ew.modalLookupDialog = $dlg.modal(\"show\");\n            $search.focus();\n        } else {\n            _alert(data.message);\n        }\n    };\n\n    var arp = [];\n    var linkValue = $input.val(); // Link values\n    var arLinkValue = (linkValue !== \"\") ? linkValue.split(ew.MULTIPLE_OPTION_SEPARATOR) : [];\n    var data = Object.assign({ page: list.page, field: list.field }, getUserParams('#p_' + oid, f));\n\n    // Add parent field values\n    var parentId = list.parentFields.slice(); // Clone\n    if (rowindex != \"\") {\n        for (var i = 0, len = parentId.length; i < len; i++) {\n            var ar = parentId[i].split(\" \");\n            if (ar.length == 1) // Parent field in the same table, add row index\n                parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\n        }\n    }\n    if (parentId.length > 0) {\n        for (var i = 0, len = parentId.length; i < len; i++)\n            arp.push(getOptionValues(parentId[i], f));\n    }\n    for (var i = 0, cnt = arp.length; i < cnt; i++) // Filter by parent fields\n        data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\n\n    $body.css(\"cursor\", \"wait\");\n    $bd.ewjtable({\n        paging: true,\n        pageSize: args.n,\n        pageSizes: [],\n        pageSizeChangeArea: false,\n        pageList: \"minimal\",\n        selecting: true,\n        selectingCheckboxes: true,\n        multiselect: !!args.m,\n        actions: {\n            \"listAction\": function(postData, jtParams) {\n                var _data = Object.assign({}, data, {\n                    ajax: \"modal\",\n                    start: jtParams.start,\n                    recperpage: jtParams.recperpage\n                });\n                if ($.isObject(postData)) // Search\n                    Object.assign(_data, postData);\n                return $.ajax(getApiUrl(ew.API_LOOKUP_ACTION), {\n                        type: \"POST\",\n                        dataType: \"json\",\n                        data: _data\n                    }).done(_format).always(function() {\n                        $body.css(\"cursor\", \"default\");\n                    });\n            }\n        },\n        messages: {\n            serverCommunicationError: ew.language.phrase(\"ServerCommunicationError\"),\n            loadingMessage: '<div class=\"' + ew.spinnerClass + ' m-3 ew-loading\" role=\"status\"><span class=\"sr-only\">' + ew.language.phrase(\"Loading\") + '</span></div>',\n            noDataAvailable: ew.language.phrase(\"NoRecord\"),\n            close: ew.language.phrase(\"CloseBtn\"),\n            pagingInfo: ew.language.phrase(\"Record\") + \" {0}-{1} \" + ew.language.phrase(\"Of\") + \" {2}\",\n            pageSizeChangeLabel: ew.language.phrase(\"RecordsPerPage\"),\n            gotoPageLabel: ew.language.phrase(\"Page\")\n        },\n        fields: {\n            \"lf\": { key: true, list: false},\n            \"df\": {}\n        },\n        recordsLoaded: function(e, data) {\n            var selectedRows = $(e.target).find(\".ewjtable-data-row\").filter(function() {\n                return arLinkValue.includes(String($(this).data(\"record-key\")));\n            });\n            $(e.target).ewjtable(\"selectRows\", selectedRows);\n        },\n        selectionChanged: function(e, data) {\n            var $rows = data.rows;\n            if ($rows) {\n                if (!args.m)\n                    arLinkValue = [];\n                $rows.each(function() {\n                    var $row = $(this);\n                    var key = String($row.data(\"record-key\"));\n                    var index = arLinkValue.indexOf(key);\n                    var selected = $row.hasClass(\"ewjtable-row-selected\");\n                    if (selected && index == -1)\n                        arLinkValue.push(key);\n                    else if (!selected && index > -1)\n                        arLinkValue.splice(index, 1);\n                });\n            }\n        }\n    }).ewjtable(\"load\", null, success);\n}\n\n/**\n * Show dialog for import\n *\n * @param {Object} args - Arguments\n * @param {string} args.hdr - Dialog header\n * @param {HTMLElement} args.lnk - Anchor element\n * @returns\n */\nexport function importDialogShow(args) {\n    $(args.lnk).tooltip(\"hide\");\n    var $dlg = ew.importDialog || $(\"#ew-import-dialog\");\n    if (!$dlg[0]) {\n        _alert(\"DIV #ew-import-dialog not found.\");\n        return false;\n    }\n\n    var $input = $dlg.find(\"#importfiles\"),\n        $bd = $dlg.find(\".modal-body\"),\n        $data = $bd.find(\":input[id!=importfiles]\"),\n        $message = $bd.find(\".message\"),\n        $progress = $bd.find(\".progress\"),\n        timer;\n\n    // Disable buttons\n    var disableButtons = function() {\n        $dlg.find(\".modal-footer .btn\").prop(\"disabled\", true);\n    }\n\n    // Enable buttons\n    var enableButtons = function() {\n        $dlg.find(\".modal-footer .btn\").prop(\"disabled\", false);\n    }\n\n    // Show message\n    var showMessage = function(msg, classname) {\n        var $msg = $(\"<div>\" + msg + \"</div>\");\n        if (classname)\n            $msg.addClass(classname);\n        $message.removeClass(\"d-none\").html($msg);\n        if (classname == \"text-danger\")\n            enableButtons();\n    }\n\n    // Hide message\n    var hideMessage = function() {\n        $message.addClass(\"d-none\").html(\"\");\n    }\n\n    // Show progress\n    var showProgress = function(pc, classname) {\n        $progress.removeClass(\"d-none\").find(\".progress-bar\").removeClass(\"bg-success bg-info\").addClass(classname || \"bg-success\")\n            .attr(\"aria-valuenow\", pc).css(\"width\", pc + \"%\").html(pc + \"%\");\n    }\n\n    // Hide progress\n    var hideProgress = function() {\n        $progress.addClass(\"d-none\").find(\".progress-bar\").attr(\"aria-valuenow\", 0).css(\"width\", \"0%\").html(\"0%\");\n    }\n\n    // Upload progress\n    var uploadProgress = function(data) {\n        var pc = parseInt(100 * data.loaded / data.total);\n        showProgress(pc, \"bg-info\");\n        if (pc === 100) {\n            showMessage(ew.language.phrase(\"ImportMessageUploadComplete\"), \"text-info\");\n        } else {\n            showMessage(ew.language.phrase(\"ImportMessageUploadProgress\").replace(\"%p\", pc), \"text-info\");\n        }\n    }\n\n    // Update progress (import)\n    var updateProgress = function(result) {\n        try {\n            var cnt = parseInt(result.count), tcnt = parseInt(result.totalCount), filename = result.file;\n            if (tcnt > 0 && $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\")) { // Show progress\n                var pc = parseInt(100 * cnt / tcnt);\n                showProgress(pc);\n                showMessage(ew.language.phrase(\"ImportMessageProgress\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", filename), \"text-info\");\n            }\n        } catch(e) {}\n    }\n\n    // Import progress\n    var importProgress = function() {\n        var url = getApiUrl(ew.API_PROGRESS_ACTION), data = { \"rnd\": random() };\n        data[ew.API_FILE_TOKEN_NAME] = $input.data(ew.API_FILE_TOKEN_NAME);\n        $.get(url, data, updateProgress, \"json\");\n    }\n\n    // Import complete\n    var importComplete = function(result) {\n        var maxErrorCount = 5;\n        var msg = \"\";\n        showProgress(100);\n        var fileResults = result.files;\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\n        if (Array.isArray(fileResults)) {\n            for (var i = 0, len = fileResults.length; i < len; i++) {\n                var fileResult = fileResults[i],\n                    tcnt = fileResult.totalCount || 0,\n                    cnt = fileResult.count || 0,\n                    scnt = fileResult.successCount || 0,\n                    fcnt = fileResult.failCount || 0;\n                if (msg != \"\")\n                    msg += \"<br>\";\n                if (fileResult.success) {\n                    msg += ew.language.phrase(\"ImportMessageSuccess\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file);\n                } else {\n                    msg += ew.language.phrase(\"ImportMessageError1\").replace(\"%t\", tcnt).replace(\"%c\", cnt).replace(\"%f\", fileResult.file).replace(\"%s\", scnt).replace(\"%e\", fcnt);\n                    if (fileResult.error)\n                        msg += ew.language.phrase(\"ImportMessageError2\").replace(\"%e\", fileResult.error);\n                    var showLog = true;\n                    if (fileResult.failList) {\n                        var ecnt = 0;\n                        for (var i = 1; i <= cnt; i++) {\n                            if (fileResult.failList[\"row\" + i]) {\n                                ecnt += 1;\n                                msg += \"<br>\" + ew.language.phrase(\"ImportMessageError3\").replace(\"%i\", i).replace(\"%d\", fileResult.failList[\"row\" + i]);\n                            }\n                            if (ecnt >= maxErrorCount)\n                                break;\n                        }\n                        if (fcnt > maxErrorCount)\n                            msg += \"<br>\" + ew.language.phrase(\"ImportMessageMore\").replace(\"%s\", fcnt - maxErrorCount);\n                        else\n                            showLog = false;\n                    }\n                    if (fileResult.log && showLog)\n                        msg += \"<br>\" + ew.language.phrase(\"ImportMessageError4\").replace(\"%l\", fileResult.log);\n                    showMessage(msg, \"text-danger\"); // Show error message\n                }\n            }\n        }\n        if (result.success) {\n            showMessage(msg, \"text-success\");\n            $dlg.find(\".modal-footer .ew-close-btn\").data(\"imported\", true);\n        } else {\n            if (result.error)\n                msg = result.error;\n            showMessage(msg, \"text-danger\"); // Show error message\n        }\n        hideProgress();\n    }\n\n    // Import fail\n    var importFail = function(o) {\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", false); // Stop import progress\n        showMessage(ew.language.phrase(\"ImportMessageServerError\").replace(\"%s\", o.status).replace(\"%t\", o.statusText), \"text-danger\");\n    }\n\n    // Import file\n    var importFiles = function(filetoken) {\n        $body.css(\"cursor\", \"wait\");\n        $input.data(ew.API_FILE_TOKEN_NAME, filetoken);\n        $dlg.find(\".modal-footer .ew-close-btn\").data(\"import-progress\", true); // Show import progress\n        var data = ew.API_ACTION_NAME + \"=import&\" + ew.API_FILE_TOKEN_NAME + \"=\" + encodeURIComponent(filetoken);\n        if ($data.length)\n            data += \"&\" + $data.serialize();\n        $.ajax(currentPage(), {\n            \"data\": data,\n            \"method\": \"POST\",\n            \"dataType\": \"json\",\n            \"beforeSend\": function(xhr, settings) {\n                timer = $.later(100, null, importProgress, null, true); // Use time to show progress periodically\n            }\n        }).done(importComplete).fail(importFail).always(function() {\n            $body.css(\"cursor\", \"default\");\n            if (timer)\n                timer.cancel(); // Clear timer\n        });\n    }\n\n    var formData = { session: ew.SESSION_ID };\n    formData[ew.TOKEN_NAME_KEY] = ew.TOKEN_NAME; // Add token name for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\n    formData[ew.ANTIFORGERY_TOKEN_KEY] = ew.ANTIFORGERY_TOKEN; // Add antiforgery token for $.ajax() sent by jQuery File Upload (not by ajaxSend) // PHP\n    var options = ew.importUploadOptions;\n    if (!options.acceptFileTypes)\n        options.acceptFileTypes = new RegExp('\\\\.(' + ew.IMPORT_FILE_ALLOWED_EXT.replace(/,/g, '|') + ')$', 'i');\n\n    if (!$input.data(\"blueimpFileupload\")) {\n        $input.fileupload(Object.assign({\n                url: getApiUrl(ew.API_UPLOAD_ACTION),\n                dataType: \"json\",\n                autoUpload: true,\n                formData: formData,\n                singleFileUploads: false,\n                messages: {\n                    acceptFileTypes: ew.language.phrase(\"UploadErrMsgAcceptFileTypes\"),\n                    maxFileSize: ew.language.phrase(\"UploadErrMsgMaxFileSize\"),\n                    maxNumberOfFiles: ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"),\n                    minFileSize: ew.language.phrase(\"UploadErrMsgMinFileSize\")\n                },\n                done: function(e, data) {\n                    if (data.result && data.result.files && Array.isArray(data.result.files.importfiles)) {\n                        var ok = true;\n                        data.result.files.importfiles.forEach(function(file, index) {\n                            if (file.error) {\n                                showMessage(ew.language.phrase(\"ImportMessageUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\n                                ok = false;\n                            }\n                        }); // Show upload errors for each file\n                        if (ok)\n                            importFiles(data.result[ew.API_FILE_TOKEN_NAME]); // Import uploaded files\n                    }\n                },\n                change: function(e, data) {\n                    hideMessage();\n                },\n                processfail: function(e, data) {\n                    data.files.forEach(function(file, index) {\n                        if (file.error)\n                            showMessage(ew.language.phrase(\"ImportMessageUploadError\").replace(\"%f\", file.name).replace(\"%s\", file.error), \"text-danger\");\n                    }); // Show process errors for each file\n                },\n                fail: function(e, data) {\n                    showMessage(ew.language.phrase(\"ImportMessageServerError\").replace(\"%s\", data.textStatus).replace(\"%t\", data.errorThrown), \"text-danger\");\n                },\n                progressall: function(e, data) {\n                    uploadProgress(data);\n                }\n        }, options));\n    }\n\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\n    $dlg.find(\".modal-footer .ew-close-btn\").off(\"click.ew\").on(\"click.ew\", function() {\n        var $this = $(this);\n        if ($this.data(\"imported\")) {\n            $this.data(\"imported\", false);\n            window.location.reload(true);\n        }\n    });\n    hideMessage();\n    ew.importDialog = $dlg.modal(\"show\");\n    return false;\n}\n\n// Auto-fill\nexport function autoFill(el) {\n    var f = forms.get(el).$element[0];\n    if (!f)\n        return;\n    var ar = getOptionValues(el),\n        id = getId(el),\n        m = id.match(/^([xy])(\\d*)_/),\n        rowindex = (m) ? m[2] : \"\",\n        list = forms.get(el).getList(id),\n        dest_array = list.autoFillTargetFields;\n    var success = function(data) {\n        var results = data && data.records || \"\";\n        var result = (results) ? results[0] : [];\n        for (var j = 0; j < dest_array.length; j++) {\n            var destEl = getElements(dest_array[j].replace(/^x_/, \"x\" + rowindex + \"_\"), f);\n            if (destEl) {\n                var val = ($.isValue(result[\"af\" + j])) ? result[\"af\" + j] : \"\";\n                var args = {results: results, result: result, data: val, form: f, name: id, target: dest_array[j], cancel: false, trigger: true};\n                $(el).trigger(\"autofill\", [args]); // Fire event\n                if (args.cancel)\n                    continue;\n                val = args.data; // Process the value\n                if (destEl.options) { // Selection list\n                    selectOption(destEl, val.split(\",\"));\n                    if (isAutoSuggest(destEl)) { // Auto-Suggest\n                        destEl.input.value = val;\n                        updateOptions.call(forms.get(f.id), destEl);\n                    } else if (isModalLookup(destEl)) { // Modal-Lookup\n                        //$(destEl).parent().find(\".ew-lookup-text\").html(val);\n                        updateOptions.call(forms.get(f.id), destEl);\n                    }\n                } else if (isHiddenTextArea(destEl)) { // HTML editor\n                    destEl.value = val;\n                    $(destEl).data(\"editor\").set();\n                } else {\n                    destEl.value = val;\n                }\n                if (args.trigger)\n                    $(destEl).trigger(\"change\");\n            }\n        }\n        return result;\n    };\n    if (ar.length > 0 && ar[0] != \"\") {\n        var data = Object.assign({\n            page: list.page,\n            field: list.field,\n            ajax: \"autofill\",\n            v0: ar[0],\n            language: ew.LANGUAGE_ID\n        }, getUserParams('#p_' + id, f));\n        // Add parent field values\n        var parentId = list.parentFields.slice(); // Clone\n        if (rowindex != \"\") {\n            for (var i = 0, len = parentId.length; i < len; i++) {\n                var ar = parentId[i].split(\" \");\n                if (ar.length == 1) // Parent field in the same table, add row index\n                    parentId[i] = parentId[i].replace(/^x_/, \"x\" + rowindex + \"_\");\n            }\n        }\n        var arp = parentId.map(function(pid) {\n            return getOptionValues(pid, f);\n        });\n        for (var i = 0, cnt = arp.length; i < cnt; i++) // Filter by parent fields\n            data[\"v\" + (i + 1)] = arp[i].join(ew.MULTIPLE_OPTION_SEPARATOR);\n        return $.post(getApiUrl(ew.API_LOOKUP_ACTION), data, success, \"json\");\n    }\n    return success();\n}\n\n// Setup tooltip links\nexport function tooltip(i, el) {\n    var $this = $(el), $tt = $(\"#\" + $this.data(\"tooltip-id\")),\n        trig = $this.data(\"trigger\") || \"hover\", dir = $this.data(\"placement\") || (ew.CSS_FLIP ? \"left\" : \"right\"); // dir = \"left|right\"\n    if (!$tt[0] || $tt.text().trim() == \"\" && !$tt.find(\"img[src!='']\")[0])\n        return;\n    if (!$this.data(\"bs.popover\")) {\n        $this.popover({\n            html: true,\n            placement: dir,\n            trigger: trig,\n            delay: 100,\n            container: $(\"#ew-tooltip\")[0],\n            content: $tt.html(),\n            sanitizeFn: ew.sanitizeFn\n        }).on(\"show.bs.popover\", function(e) {\n            var wd, $tip = $($this.data(\"bs.popover\").getTipElement()).css(\"z-index\", 9999); // Make z-index higher than modal dialog\n            if (wd = $this.data(\"tooltip-width\")) // Set width before show\n                $tip.css(\"max-width\", parseInt(wd, 10) + \"px\");\n        });\n    }\n}\n\n/**\n * Show dialog for email sending\n *\n * @param {Object} args - Arguments\n * @param {string} args.lnk - Email link ID\n * @param {string} args.hdr - Dialog header\n * @param {string} args.url - URL of the email content\n * @param {HTMLElement} args.f - Form\n * @param {Object} args.key - Key as object\n * @param {boolean} args.sel - Exported selected\n * @returns false\n */\nexport function emailDialogShow(args) {\n    var $dlg = ew.emailDialog || $(\"#ew-email-dialog\");\n    if (!$dlg[0]) {\n        _alert(\"DIV #ew-email-dialog not found.\");\n        return false;\n    }\n    if (args.sel && !keySelected(args.f)) {\n        _alert(ew.language.phrase(\"NoRecordSelected\"));\n        return false;\n    }\n    var $f = $dlg.find(\".modal-body form\"),\n        frm = $f.data(\"form\");\n    if (!frm) {\n        frm = new Form($f.attr(\"id\"));\n        frm.addFields([\n            [\"sender\", [ew.Validators.required(ew.language.phrase(\"Sender\")), ew.Validators.email]],\n            [\"recipient\", [ew.Validators.required(ew.language.phrase(\"Recipient\")), ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperRecipientEmail\"))]],\n            [\"cc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperCcEmail\"))],\n            [\"bcc\", ew.Validators.emails(ew.MAX_EMAIL_RECIPIENT, ew.language.phrase(\"EnterProperBccEmail\"))],\n            [\"subject\", ew.Validators.required(ew.language.phrase(\"Subject\"))]\n        ]);\n        frm.validate = function() {\n            return this.validateFields();\n        };\n        frm.submit = function() {\n            if (!this.validate())\n                return false;\n            var qs = $f.serialize(), data = \"\";\n            if (args.f && args.sel) // Export selected\n                data = $(args.f).find(\"input[type=checkbox][name='key_m[]']:checked\").serialize();\n            if (args.key)\n                qs += \"&\" + $.param(args.key);\n            var fobj = this.getForm();\n            if (args.url) { // Custom Template\n                $dlg.modal(\"hide\");\n                if (args.exportid)\n                    ew.exportWithCharts(args.el, args.url, args.exportid, fobj);\n                else\n                    _export(args.f, args.url, \"email\", true, args.sel, fobj);\n            } else {\n                $.post($(args.f).attr(\"action\"), qs + \"&\" + data, function(result) {\n                    showMessage(result);\n                });\n            }\n            return true;\n        };\n        $f.data(\"form\", frm);\n    }\n    $dlg.modal(\"hide\").find(\".modal-title\").html(args.hdr);\n    $dlg.find(\".modal-footer .btn-primary\").off().click(function(e) {\n        e.preventDefault();\n        if (frm.submit())\n            $dlg.modal(\"hide\");\n    });\n    ew.emailDialog = $dlg.modal(\"show\");\n    return false;\n}\n\n// Show drill down\nexport function showDrillDown(e, obj, url, id, hdr) {\n    if (e && e.ctrlKey) {\n        var arUrl = url.split(\"?\"), params = new URLSearchParams(arUrl[1]);\n        params.set(\"d\", \"2\");  // Change d parameter to 2\n        redirect(arUrl[0] + \"?\" + params.toString());\n        return false;\n    }\n    var $obj = ($.isString(obj)) ? $(\"#\" + obj) : $(obj);\n    var pos = $obj.data(\"drilldown-placement\") || ($obj.hasClass(\"ew-chart-canvas\") ? (ew.CSS_FLIP ? \"left\" : \"right\") : \"bottom\");\n    $obj.tooltip(\"hide\");\n    var args = {\"obj\": $obj[0], \"id\": id, \"url\": url, \"hdr\": hdr, \"placement\": pos};\n    $document.trigger(\"drilldown\", [args]);\n    var ar = args.url.split(\"?\");\n    args.file = ar[0] || \"\";\n    args.data = ar[1] || \"\";\n    if (!$obj.data(\"bs.popover\")) {\n        $obj.popover({\n            html: true,\n            placement: args.placement,\n            trigger: \"manual\",\n            template: '<div class=\"popover\"><h3 class=\"popover-header d-none\" style=\"cursor: move;\"></h3><div class=\"popover-body\"></div></div>',\n            content: '<div class=\"' + ew.spinnerClass + ' m-3 ew-loading\" role=\"status\"><span class=\"sr-only\">' + ew.language.phrase(\"Loading\") + '</span></div>',\n            container: $(\"#ew-drilldown-panel\"),\n            sanitizeFn: ew.sanitizeFn,\n            boundary: \"viewport\"\n        }).on(\"show.bs.popover\", function(e) {\n            $obj.attr(\"data-original-title\", \"\");\n        }).on(\"shown.bs.popover\", function(e) {\n            if (!$obj.data(\"args\"))\n                return;\n            var data = $obj.data(\"args\").data;\n            data += (data ? \"&\" : \"\") + ew.TOKEN_NAME_KEY + \"=\" + ew.TOKEN_NAME; // Add token name // PHP\n            data += (data ? \"&\" : \"\") + ew.ANTIFORGERY_TOKEN_KEY + \"=\" + ew.ANTIFORGERY_TOKEN; // Add antiforgery token // PHP\n            $.ajax({\n                cache: false,\n                dataType: \"html\",\n                type: \"POST\",\n                data: data,\n                url: $obj.data(\"args\").file,\n                success: function(data) {\n                    var $tip = $($obj.data(\"bs.popover\").getTipElement()).on(\"mousedown\", function(e) {\n                        var $this = $(this).addClass(\"drag\"),\n                            height = $this.outerHeight(),\n                            width = $this.outerWidth(),\n                            ypos = $this.offset().top + height - e.pageY,\n                            xpos = $this.offset().left + width - e.pageX;\n                        $body.on(\"mousemove\", function(e) {\n                            var top = e.pageY + ypos - height,\n                                left = e.pageX + xpos - width;\n                            if ($this.hasClass(\"drag\"))\n                                $this.offset({top: top, left: left});\n                        }).on(\"mouseup\", function(e){\n                            $this.removeClass(\"drag\");\n                        });\n                    });\n                    if (args.hdr)\n                        $tip.find(\".popover-header\").empty().removeClass(\"d-none\")\n                            .append('<button type=\"button\" class=\"close\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>' + args.hdr)\n                            .find(\".close\").on(\"click\", function() {\n                                $obj.popover(\"hide\");\n                            });\n                    var m = data.match(/<body[^>]*>([\\s\\S]*?)<\\/body\\s*>/i); // Use HTML in document body only\n                    data = m ? m[0] : data;\n                    var html = ew.stripScript(data);\n                    $tip.find(\".popover-body\").html($(\"<div></div>\").html(html).find(\"#ew-report\")) // Insert the container table only\n                        .find(\".ew-table\").each(ew.setupTable);\n                    ew.executeScript(data, id);\n                    $obj.popover(\"update\");\n                },\n                error: function(o) {\n                    if (o.responseText) {\n                        var $tip = $($el.data(\"bs.popover\").getTipElement());\n                        $tip.find(\".popover-body\").empty().append('<p class=\"text-danger\">' + o.responseText + '</p>');\n                    }\n                }\n            });\n        }).on(\"hidden.bs.popover\", function(e) {\n            $.each(ew.drillDownCharts, function(key, cht) { // Dispose charts\n                cht.dispose();\n            });\n            ew.drillDownCharts = {};\n            ew.removeScript(id);\n        });\n    }\n    $obj.data(\"args\", args).popover(\"show\");\n}\n\n/**\n * Ajax query\n * @param {Object} data - object to passed to API\n * @param {callback} callback - Callback function for async request (see http://api.jquery.com/jQuery.post/), empty for sync request\n * @returns {string|string[]}\n */\nexport function ajax(data, callback) {\n    if (!$.isObject(data))\n        return undefined;\n    var action = data.action;\n    if (!action)\n        return undefined;\n    delete data.action;\n    var obj = Object.assign({}, data);\n    var _convert = function(response) {\n        if ($.isObject(response) && response.result == \"OK\") {\n            var results = response.records;\n            if (Array.isArray(results) && results.length == 1) { // Single row\n                results = results[0];\n                if (Array.isArray(results) && results.length == 1) // Single column\n                    return results[0]; // Return a value\n                else\n                    return results; // Return a row\n            }\n            return results;\n        }\n        return response;\n    };\n    var url = getApiUrl(action), // URL\n        type = obj.type || \"POST\";\n    delete obj.type;\n    obj.dataType = \"json\";\n    if ($.isFunction(callback)) { // Async\n        $.ajax({\n            url: url,\n            type: type,\n            data: obj,\n            success: function (response) {\n                callback(_convert(response));\n            }\n        });\n    } else { // Sync\n        var response = $.ajax({\n            url: url,\n            async: false,\n            type: type,\n            data: obj\n        });\n        return _convert(response.responseJSON);\n    }\n}\n\n// Get URL of current page\nexport function currentPage() {\n    return location.href.split(\"#\")[0].split(\"?\")[0];\n}\n\n// Toggle search operator\nexport function toggleSearchOperator(id, value) {\n    var el = this.form.elements[id];\n    if (!el)\n        return;\n    el.value = (el.value != value) ? value : \"=\";\n}\n\n// Validators\n// Check US Date format (mm/dd/yyyy)\nexport function checkUSDate(object_value) {\n    return checkDateEx(object_value, \"us\", ew.DATE_SEPARATOR);\n}\n\n// Check US Date format (mm/dd/yy)\nexport function checkShortUSDate(object_value) {\n    return checkDateEx(object_value, \"usshort\", ew.DATE_SEPARATOR);\n}\n\n// Check Date format (yyyy/mm/dd)\nexport function checkDate(object_value) {\n    return checkDateEx(object_value, \"std\", ew.DATE_SEPARATOR);\n}\n\n// Check Date format (yy/mm/dd)\nexport function checkShortDate(object_value) {\n    return checkDateEx(object_value, \"stdshort\", ew.DATE_SEPARATOR);\n}\n\n// Check Euro Date format (dd/mm/yyyy)\nexport function checkEuroDate(object_value) {\n    return checkDateEx(object_value, \"euro\", ew.DATE_SEPARATOR);\n}\n\n// Check Euro Date format (dd/mm/yy)\nexport function checkShortEuroDate(object_value) {\n    return checkDateEx(object_value, \"euroshort\", ew.DATE_SEPARATOR);\n}\n\n// Check default date format\nexport function checkDateDef(object_value) {\n    if (ew.DATE_FORMAT.match(/^yyyy/))\n        return checkDate(object_value);\n    else if (ew.DATE_FORMAT.match(/^yy/))\n        return checkShortDate(object_value);\n    else if (ew.DATE_FORMAT.match(/^m/) && ew.DATE_FORMAT.match(/yyyy$/))\n        return checkUSDate(object_value);\n    else if (ew.DATE_FORMAT.match(/^m/) && ew.DATE_FORMAT.match(/yy$/))\n        return checkShortUSDate(object_value);\n    else if (ew.DATE_FORMAT.match(/^d/) && ew.DATE_FORMAT.match(/yyyy$/))\n        return checkEuroDate(object_value);\n    else if (ew.DATE_FORMAT.match(/^d/) && ew.DATE_FORMAT.match(/yy$/))\n        return checkShortEuroDate(object_value);\n    return false;\n}\n\n// Check date format\n// format: std/stdshort/us/usshort/euro/euroshort\nexport function checkDateEx(value, format, sep) {\n    if (!value || value.length == \"\")\n        return true;\n    value = value.replace(/ +/g, \" \").trim();\n    var arDT = value.split(\" \");\n    if (arDT.length > 0) {\n        var re, ar, sYear, sMonth, sDay;\n        re = /^(\\d{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2]\\d|[3][0|1])$/;\n        if (ar = re.exec(arDT[0])) {\n            sYear = ar[1];\n            sMonth = ar[2];\n            sDay = ar[3];\n        } else {\n            var wrksep = escapeRegExChars(sep);\n            switch (format) {\n                case \"std\":\n                    re = new RegExp(\"^(\\\\d{4})\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])$\");\n                    break;\n                case \"stdshort\":\n                    re = new RegExp(\"^(\\\\d{2})\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])$\");\n                    break;\n                case \"us\":\n                    re = new RegExp(\"^([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"(\\\\d{4})$\");\n                    break;\n                case \"usshort\":\n                    re = new RegExp(\"^([0]?[1-9]|[1][0-2])\" + wrksep + \"([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"(\\\\d{2})$\");\n                    break;\n                case \"euro\":\n                    re = new RegExp(\"^([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"(\\\\d{4})$\");\n                    break;\n                case \"euroshort\":\n                    re = new RegExp(\"^([0]?[1-9]|[1|2]\\\\d|[3][0|1])\" + wrksep + \"([0]?[1-9]|[1][0-2])\" + wrksep + \"(\\\\d{2})$\");\n                    break;\n            }\n            if (!re.test(arDT[0]))\n                return false;\n            var arD = arDT[0].split(sep);\n            switch (format) {\n                case \"std\":\n                case \"stdshort\":\n                    sYear = unformatYear(arD[0]);\n                    sMonth = arD[1];\n                    sDay = arD[2];\n                    break;\n                case \"us\":\n                case \"usshort\":\n                    sYear = unformatYear(arD[2]);\n                    sMonth = arD[0];\n                    sDay = arD[1];\n                    break;\n                case \"euro\":\n                case \"euroshort\":\n                    sYear = unformatYear(arD[2]);\n                    sMonth = arD[1];\n                    sDay = arD[0];\n                    break;\n            }\n        }\n        if (!checkDay(sYear, sMonth, sDay))\n            return false;\n    }\n    if (arDT.length > 1 && !checkTime(arDT[1]))\n        return false;\n    return true;\n}\n\n// Unformat 2 digit year to 4 digit year\nexport function unformatYear(yr) {\n    if (yr.length == 2)\n        return (yr > ew.UNFORMAT_YEAR) ? \"19\" + yr : \"20\" + yr;\n    return yr;\n}\n\n// Check day\nexport function checkDay(checkYear, checkMonth, checkDay) {\n    checkYear = parseInt(checkYear, 10);\n    checkMonth = parseInt(checkMonth, 10);\n    checkDay = parseInt(checkDay, 10);\n    var maxDay = [4, 6, 9, 11].includes(checkMonth) ? 30 : 31;\n    if (checkMonth == 2)\n        maxDay = (checkYear % 4 > 0 || checkYear % 100 == 0 && checkYear % 400 > 0) ? 28 : 29;\n    return checkRange(checkDay, 1, maxDay);\n}\n\n// Check integer\nexport function checkInteger(object_value) {\n    if (!object_value || object_value.length == 0)\n        return true;\n    if (object_value.includes(ew.DECIMAL_POINT))\n        return false;\n    return checkNumber(object_value);\n}\n\n// Check number\nexport function checkNumber(object_value) {\n    object_value = String(object_value);\n    if (!object_value || object_value.length == 0)\n        return true;\n    object_value = object_value.trim();\n    var ts = escapeRegExChars(ew.THOUSANDS_SEP), dp = escapeRegExChars(ew.DECIMAL_POINT),\n        re = new RegExp(\"^[+-]?(\\\\d{1,3}(\" + (ts ? ts + \"?\" : \"\") + \"\\\\d{3})*(\" + dp + \"\\\\d+)?|\" + dp + \"\\\\d+)$\");\n    return re.test(object_value);\n}\n\n// Convert to float\nexport function stringToFloat(object_value) {\n    object_value = String(object_value);\n    if (ew.THOUSANDS_SEP != \"\") {\n        var re = new RegExp(escapeRegExChars(ew.THOUSANDS_SEP), \"g\");\n        object_value = object_value.replace(re, \"\");\n    }\n    if (ew.DECIMAL_POINT != \"\")\n        object_value = object_value.replace(ew.DECIMAL_POINT, \".\");\n    return parseFloat(object_value);\n}\n\n// Convert string (yyyy-mm-dd hh:mm:ss) to date object\nexport function stringToDate(object_value) {\n    var re = /^(\\d{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2]\\d|[3][0|1]) (?:(0\\d|1\\d|2[0-3]):([0-5]\\d):([0-5]\\d))?$/;\n    var ar = object_value.replace(re, \"$1 $2 $3 $4 $5 $6\").split(\" \");\n    return new Date(ar[0], ar[1]-1, ar[2], ar[3], ar[4], ar[5]);\n}\n\n// Escape regular expression chars\nexport function escapeRegExChars(str) {\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n}\n\n// Check range\nexport function checkRange(object_value, min_value, max_value) {\n    if (!object_value || object_value.length == 0)\n        return true;\n    if ($.isNumber(min_value) || $.isNumber(max_value)) { // Number\n        if (checkNumber(object_value))\n            object_value = stringToFloat(object_value);\n    }\n    if (!$.isNull(min_value) && object_value < min_value)\n        return false;\n    if (!$.isNull(max_value) && object_value > max_value)\n        return false;\n    return true;\n}\n\n// Check time\nexport function checkTime(object_value) {\n    if (!object_value || object_value.length == 0)\n        return true;\n    object_value = object_value.trim();\n    var re = new RegExp('^(0\\\\d|1\\\\d|2[0-3])' + escapeRegExChars(ew.TIME_SEPARATOR) + '[0-5]\\\\d(( (' + escapeRegExChars(ew.language.phrase(\"AM\")) + '|' + escapeRegExChars(ew.language.phrase(\"PM\")) + '))|(' + escapeRegExChars(ew.TIME_SEPARATOR) + '[0-5]\\\\d(\\\\.\\\\d+|[+-][\\\\d:]+)?)?)$', 'i');\n    return re.test(object_value);\n}\n\n// Check phone\nexport function checkPhone(object_value) {\n    if (!object_value || object_value.length == 0)\n        return true;\n    return /^\\(\\d{3}\\) ?\\d{3}( |-)?\\d{4}|^\\d{3}( |-)?\\d{3}( |-)?\\d{4}$/.test(object_value.trim());\n}\n\n// Check zip\nexport function checkZip(object_value) {\n    if (!object_value || object_value.length == 0)\n        return true;\n    return /^\\d{5}$|^\\d{5}-\\d{4}$/.test(object_value.trim());\n}\n\n// Check credit card\nexport function checkCreditCard(object_value) {\n    if (!object_value || object_value.length == 0)\n        return true;\n    var creditcard_string = object_value.replace(/\\D/g, \"\");\n    if (creditcard_string.length == 0)\n        return false;\n    var doubledigit = creditcard_string.length % 2 == 1 ? false : true;\n    var tempdigit, checkdigit = 0;\n    for (var i = 0, len = creditcard_string.length; i < len; i++) {\n        tempdigit = parseInt(creditcard_string.charAt(i), 10);\n        if (doubledigit) {\n            tempdigit *= 2;\n            checkdigit += (tempdigit % 10);\n            if (tempdigit / 10 >= 1.0)\n                checkdigit++;\n            doubledigit = false;\n        }\telse {\n            checkdigit += tempdigit;\n            doubledigit = true;\n        }\n    }\n    return (checkdigit % 10 == 0);\n}\n\n// Check social security number\nexport function checkSsn(object_value) {\n    if (!object_value || object_value.length == 0)\n        return true;\n    return /^(?!000)([0-6]\\d{2}|7([0-6]\\d|7[012]))([ -]?)(?!00)\\d\\d\\3(?!0000)\\d{4}$/.test(object_value.trim());\n}\n\n// Check emails\nexport function checkEmails(object_value, email_cnt) {\n    if (!object_value || object_value.length == 0)\n        return true;\n    var arEmails = object_value.replace(/,/g, \";\").split(\";\");\n    for (var i = 0, len = arEmails.length; i < len; i++) {\n        if (email_cnt > 0 && len > email_cnt)\n            return false;\n        if (!checkEmail(arEmails[i]))\n            return false;\n    }\n    return true;\n}\n\n// Check email\nexport function checkEmail(object_value) {\n    if (!object_value || object_value.length == 0)\n        return true;\n    return /^[\\w.%+-]+@[\\w.-]+\\.[A-Z]{2,18}$/i.test(object_value.trim());\n}\n\n// Check GUID {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}\nexport function checkGuid(object_value) {\n    if (!object_value || object_value.length == 0)\n        return true;\n    return /^(\\{\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}\\}|\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12})$/.test(object_value.trim());\n}\n\n// Check by regular expression\nexport function checkByRegEx(object_value, pattern) {\n    if (!object_value || object_value.length == 0)\n        return true;\n    return !!object_value.match(pattern);\n}\n\n/**\n * Show message dialog\n *\n * @param {Event|string} arg - Event or message\n * @returns\n */\nexport function showMessage(arg) {\n    var win = window.parent, // Note: If a window does not have a parent, its parent property is a reference to itself.\n        p = arg?.target ?? win.document,\n        swal = win.Swal,\n        $div = $(p).find(\"div.ew-message-dialog:hidden\").first(),\n        msg = $div.length ? $div.text() : \"\"; // Text only\n    if ($.isString(arg))\n        msg = $(\"<div>\" + arg.trim() + \"</div>\").text();\n    if (msg.trim() == \"\")\n        return;\n    if ($div.length) {\n        [\"success\", \"info\", \"warning\", \"danger\"].forEach(function(value, index) {\n            var $alert = $div.find(\".alert-\" + value).toggleClass(\"alert-\" + value),\n                $heading = $alert.find(\".alert-heading\").detach(),\n                $content = $alert.children(\":not(.icon)\");\n            $alert.find(\".icon\").remove();\n            if ($alert[0]) {\n                var w = parseInt($content.css(\"width\"), 10); // Width specified\n                if (w > 0)\n                    $content.first().css(\"width\", \"auto\");\n                var $toast = toast({\n                    class: \"ew-toast bg-\" + value,\n                    title: $heading[0] ? $heading.html() : ew.language.phrase(value),\n                    body: $alert.html(),\n                    autohide: (value == \"success\") ? ew.autoHideSuccessMessage : false, // Autohide for success message\n                    delay: (value == \"success\") ? ew.autoHideSuccessMessageDelay: 500\n                });\n                if (w > 0)\n                    $toast.css(\"max-width\", w); // Override bootstrap .toast max-width\n                return;\n            }\n        });\n    }\n    if ($.isString(arg)) {\n        return swal.fire({\n            ...ew.sweetAlertSettings,\n            html: arg\n        });\n    }\n}\n\n// Random number\nexport function random() {\n    return Math.floor(Math.random() * 100001) + 100000;\n}\n\n// File upload\nexport function upload(input) {\n    var $input = $(input);\n    if ($input.data(\"blueimpFileupload\"))\n        return;\n    var id = $input.attr(\"name\"), nid = id.replace(/\\$/g, \"\\\\$\"), tbl = $input.data(\"table\"),\n        multiple = $input.is(\"[multiple]\"), $p = $input.closest(\".form-group, [id^='el']\"),\n        readonly = $input.prop(\"disabled\") || $input.closest(\"form\").find(\"#confirm\").val() == \"confirm\",\n        $ft = $p.find(\"#ft_\" + nid), $fn = $p.find(\"#fn_\" + nid), $fa = $p.find(\"#fa_\" + nid), $fs = $p.find(\"#fs_\" + nid),\n        $exts = $p.find(\"#fx_\" + nid), $maxsize = $p.find(\"#fm_\" + nid), $maxfilecount = $p.find(\"#fc_\" + nid),\n        $label = $p.find(\".custom-file-label\"), label = $label.html();\n    var _done = function(e, data) {\n        if (data.result.files[0].error)\n            return;\n        var name = data.result.files[0].name;\n        var ar = (multiple) ? ($fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : []) : [];\n        ar.push(name);\n        $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\n        $fa.val(\"0\");\n        if (!multiple) // Remove other entries if not multiple upload\n            $ft.children(\"tr:not(:last-child)\").remove();\n    };\n    var _deleted = function(e, data) {\n        var url = $(e.originalEvent.target).data(\"url\"),\n            param = new URLSearchParams(url.split(\"?\")[1]),\n            fid = param.get(\"id\"),\n            name = param.get(fid);\n        if (name) {\n            var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\n            var index = ar.indexOf(name);\n            if (index > -1)\n                ar.splice(index, 1);\n            $fn.val(ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR));\n            $fa.val(\"0\");\n        }\n    };\n    var _change = function(e, data) {\n        $ft.toggleClass(\"ew-has-rows\", data.files?.length > 0);\n        var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\n        for (var i = 0; i < data.files.length; i++)\n            ar.push(data.files[i].name);\n        var cnt = parseInt($maxfilecount.val(), 10);\n        if ($.isNumber(cnt) && cnt > 0 && ar.length > cnt) {\n            _alert(ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"));\n            return false;\n        }\n        var l = parseInt($fs.val(), 10);\n        if ($.isNumber(l) && l > 0 && ar.join(ew.MULTIPLE_UPLOAD_SEPARATOR).length > l) {\n            _alert(ew.language.phrase(\"UploadErrMsgMaxFileLength\"));\n            return false;\n        }\n    };\n    var _confirmDelete = function(e) {\n        if (!multiple && $fn.val()) {\n            if (!confirm(ew.language.phrase(\"UploadOverwrite\"))) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n    };\n    var _changed = function(e, data) {\n        $ft.toggleClass(\"ew-has-rows\", data.files?.length > 0 || data.result?.files?.length > 0);\n        var ar = $fn.val() ? $fn.val().split(ew.MULTIPLE_UPLOAD_SEPARATOR) : [];\n        $label.html(ar.join(\", \") || label);\n    };\n    var _clicked = function() {\n        $input.closest(\"span.fileinput-button\").tooltip(\"hide\");\n    };\n    // var _process = function(e, data) {\n    //     $ft.toggleClass(\"ew-has-rows\", data.files?.length > 0);\n    // };\n    var _downloadTemplate = $.templates(\"#template-download\");\n    var _uploadTemplate = $.templates(\"#template-upload\");\n    var _completed = function(e, data) { // After download template rendered\n        var e = { target: data.context };\n        initLightboxes(e);\n        initPdfObjects(e);\n        ew.updateDropdownPosition();\n        data.context.find(\"img\").on(\"load\", ew.updateDropdownPosition);\n    }\n    var _added = function(e, data) { // After upload template rendered\n        $ft.toggleClass(\"ew-has-rows\", data.files?.length > 0);\n        data.context.find(\".start\").click(_confirmDelete);\n    };\n    // Hide input button if readonly\n    var form = getForm(input), $form = $(form);\n    var readonly = $form.find(\"#confirm\").val() == \"confirm\";\n    if (readonly)\n        $form.find(\"span.fileinput-button\").hide();\n    var cnt = parseInt($maxfilecount.val(), 10);\n    var uploadUrl = getApiUrl(ew.API_JQUERY_UPLOAD_ACTION);\n    var formData = {\n        id: id,\n        table: tbl,\n        session: ew.SESSION_ID,\n        replace: (multiple ? \"0\" : \"1\"),\n        exts: $exts.val(),\n        maxsize: $maxsize.val(),\n        maxfilecount: $maxfilecount.val()\n    };\n    $input.fileupload({\n        url: uploadUrl,\n        type: \"POST\",\n        multipart: true,\n        autoUpload: true, // Comment out to disable auto upload\n        loadImageFileTypes: /^image\\/(gif|jpe?g|png)$/i,\n        loadVideoFileTypes: /^video\\/mp4$/i,\n        loadAudioFileTypes: /^audio\\/(mpeg|mp3)$/i,\n        acceptFileTypes: ($exts.val()) ? new RegExp('\\\\.(' + $exts.val().replace(/,/g, '|') + ')$', 'i') : null,\n        maxFileSize: parseInt($maxsize.val(), 10),\n        maxNumberOfFiles: (cnt > 1) ? cnt : null,\n        filesContainer: $ft,\n        formData: formData,\n        uploadTemplateId: null,\n        downloadTemplateId: null,\n        uploadTemplate: _uploadTemplate.render.bind(_uploadTemplate),\n        downloadTemplate: _downloadTemplate.render.bind(_downloadTemplate),\n        previewMaxWidth: ew.UPLOAD_THUMBNAIL_WIDTH,\n        previewMaxHeight: ew.UPLOAD_THUMBNAIL_HEIGHT,\n        dropZone: $p,\n        pasteZone: $p,\n        messages: {\n            acceptFileTypes: ew.language.phrase(\"UploadErrMsgAcceptFileTypes\"),\n            maxFileSize: ew.language.phrase(\"UploadErrMsgMaxFileSize\"),\n            maxNumberOfFiles: ew.language.phrase(\"UploadErrMsgMaxNumberOfFiles\"),\n            minFileSize: ew.language.phrase(\"UploadErrMsgMinFileSize\")\n        },\n        readOnly: readonly // Custom\n    }).on(\"fileuploaddone\", _done)\n        .on(\"fileuploaddestroy\", _deleted)\n        .on(\"fileuploadchange\", _change)\n        .on(\"fileuploadadded fileuploadfinished fileuploaddestroyed\", _changed)\n        //.on(\"fileuploadprocess\", _process)\n        .on('fileuploadadded', _added)\n        .on('fileuploadcompleted', _completed)\n        .click(_clicked);\n    if ($fn.val()) {\n        $.ajax({\n            url: uploadUrl,\n            data: { id: id, table: tbl, session: ew.SESSION_ID },\n            dataType: \"json\",\n            context: this,\n            success: function(result) {\n                if (result && result[id]) {\n                    var done = $input.fileupload(\"option\", \"done\");\n                    if (done)\n                        done.call(input, $.Event(), { result: { files: result[id] } }); // Use \"files\"\n                }\n                if (readonly) // Hide delete button if readonly\n                    $ft.find(\"td.delete\").hide();\n            }\n        });\n    }\n}\n\n/**\n * Convert data to number\n *\n * @param {*} data - Data being converted\n * @param {Object} [config] - Configuration\n * @param {string} config.decimalSeparator - Decimal separator\n * @param {string} config.thousandsSeparator - Thousands separator\n * @returns {(number|null)}\n */\nexport function parseNumber(data, config) {\n    if ($.isString(data)) {\n        config = config || {\"thousandsSeparator\": ew.THOUSANDS_SEP, \"decimalSeparator\": ew.DECIMAL_POINT};\n        var regexBits = [], regex, separator = config.thousandsSeparator, decimal = config.decimalSeparator;\n        if (separator)\n            regexBits.push(escapeRegExChars(separator) + \"(?=\\\\d)\");\n        regex = new RegExp(\"(?:\" + regexBits.join(\"|\") + \")\", \"g\");\n        if (decimal === \".\")\n            decimal = null;\n        data = data.replace(regex, \"\");\n        data = (decimal) ? data.replace(decimal, \".\") : data;\n    }\n    if ($.isString(data) && data.trim() !== \"\")\n        data = +data;\n    if (!$.isNumber || !isFinite(data)) // Catch NaN and Infinity\n        data = null;\n    return data;\n}\n\n/**\n * Format a Number to string for display\n *\n * @param {*} data - Data being converted\n * @param {Object} [config] - Configuration\n * @param {number} config.decimalPlaces - Number of decimal places to round. Must be a number 0 to 20.\n * @param {string} config.decimalSeparator - Decimal separator\n * @param {string} config.thousandsSeparator - Thousands separator\n * @returns {string} Note: null, undefined, NaN and \"\" returns as \"\".\n */\nexport function formatNumber(data, config) {\n    if ($.isNumber(data)) {\n        config = config || {\"thousandsSeparator\": ew.THOUSANDS_SEP, \"decimalSeparator\": ew.DECIMAL_POINT};\n        var isNeg = (data < 0), output = data + \"\", decPlaces = config.decimalPlaces,\n            decSep = config.decimalSeparator || \".\", thouSep = config.thousandsSeparator,\n            decIndex, newOutput, count, i;\n        if ($.isNumber(decPlaces) && (decPlaces >= 0) && (decPlaces <= 20)) // Decimal precision\n            output = data.toFixed(decPlaces);\n        if (decSep !== \".\") // Decimal separator\n            output = output.replace(\".\", decSep);\n        if (thouSep) { // Add the thousands separator\n            decIndex = output.lastIndexOf(decSep); // Find the dot or where it would be\n            decIndex = (decIndex > -1) ? decIndex : output.length;\n            newOutput = output.substring(decIndex); // Start with the dot and everything to the right\n            for (count = 0, i = decIndex; i > 0; i--) { // Working left, every third time add a separator, every time add a digit\n                if (count%3 === 0 && i !== decIndex && (!isNeg || i > 1))\n                    newOutput = thouSep + newOutput;\n                newOutput = output.charAt(i-1) + newOutput;\n                count++;\n            }\n            output = newOutput;\n        }\n        return output;\n    } else { // Not a Number, return as string\n        return ($.isValue(data) && data.toString) ? data.toString() : \"\";\n    }\n}\n\n/**\n * Convert data to Moment object (see http://momentjs.com/docs/)\n *\n * @param {*} data - Data being converted\n * @param {number} format - Date format matching server side FormatDateTime()\n * @returns {Moment}\n */\nexport function parseDate(data, format) {\n    var args = $.makeArray(arguments);\n    if ($.isNumber(format) && format >=0 && format <= 17) {\n        var f, def = ew.DATE_FORMAT.toUpperCase(), sep = ew.DATE_SEPARATOR, timesep = ew.TIME_SEPARATOR;\n        switch (format) {\n            case 0: case 1: case 2: case 8: f = def + \" HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // ew.DATE_FORMAT + \" %H:%M:%S\"\n            case 3: f = \"hh:mm:ss A\"; break; // \"%I:%M:%S %p\"\n            case 4: f = \"HH:mm:ss\"; break; // \"%H:%M:%S\"\n            case 5: f = \"YYYY\" + sep + \"MM\" + sep + \"DD\"; break; // \"%Y\" + sep + \"%m\" + sep + \"%d\"\n            case 6: f = \"MM\" + sep + \"DD\" + sep + \"YYYY\"; break; // \"%m\" + sep + \"%d\" + sep + \"%Y\"\n            case 7: f = \"DD\" + sep + \"MM\" + sep + \"YYYY\"; break; // \"%d\" + sep + \"%m\" + sep + \"%Y\"\n            case 9: f = \"YYYY\" + sep + \"MM\" + sep + \"DD HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // \"%Y\" + sep + \"%m\" + sep + \"%d %H:%M:%S\"\n            case 10: f = \"MM\" + sep + \"DD\" + sep + \"YYYY HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // \"%m\" + sep + \"%d\" + sep + \"%Y %H:%M:%S\"\n            case 11: f = \"DD\" + sep + \"MM\" + sep + \"YYYY HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // \"%d\" + sep + \"%m\" + sep + \"%Y %H:%M:%S\"\n            case 12: f = \"YY\" + sep + \"MM\" + sep + \"DD\"; break; // \"%y\" + sep + \"%m\" + sep + \"%d\"\n            case 13: f = \"MM\" + sep + \"DD\" + sep + \"YY\"; break; // \"%m\" + sep + \"%d\" + sep + \"%y\"\n            case 14: f = \"DD\" + sep + \"MM\" + sep + \"YY\"; break; // \"%d\" + sep + \"%m\" + sep + \"%y\"\n            case 15: f = \"YY\" + sep + \"MM\" + sep + \"DD HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // \"%y\" + sep + \"%m\" + sep + \"%d %H:%M:%S\"\n            case 16: f = \"MM\" + sep + \"DD\" + sep + \"YY HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // \"%m\" + sep + \"%d\" + sep + \"%y %H:%M:%S\"\n            case 17: f = \"DD\" + sep + \"MM\" + sep + \"YY HH\" + timesep + \"mm\" + timesep + \"ss\"; break; // \"%d\" + sep + \"%m\" + sep + \"%y %H:%M:%S\"\n        }\n        args[1] = [f, \"YYYY-MM-DD HH\" + timesep + \"mm\" + timesep + \"ss\"];\n    }\n    return moment.apply(this, args);\n}\n\n/**\n * Format date time\n *\n * @param {*} data - Date being formatted\n * @param {string} format - Date format (see http://momentjs.com/docs/#/displaying/format/)\n * @returns {string}\n */\nexport function formatDate(data, format) {\n    return moment(data).format(format || ew.DATE_FORMAT.toUpperCase());\n}\n\n/**\n * Init page\n *\n * @param {Event|undefined} e - Event\n */\nexport function initPage(e) {\n    var el = (e && e.target) ? e.target : document,\n        $el = $(el),\n        $tables = $el.find(\"table.ew-table:not(.ew-export-table)\");\n    Array.prototype.forEach.call(el.querySelectorAll(\".ew-grid-upper-panel, .ew-grid-lower-panel\"), ew.initGridPanel); // Init grid panels\n    ew.renderJsTemplates(e);\n    lazyLoad(e);\n    initForms(e);\n    initTooltips(e);\n    initPasswordOptions(e);\n    initIcons(e);\n    initLightboxes(e);\n    initPdfObjects(e);\n    $el.find(\"[data-widget='treeview']\").each(function() {\n        adminlte.Treeview._jQueryInterface.call($(this), \"init\");\n    });\n    $tables.each(setupTable); // Init tables\n    $el.find(\".ew-btn-dropdown\").on(\"shown.bs.dropdown\", function() {\n        var $this = $(this).removeClass(\"dropup\"),\n            $window = $(window),\n            $menu = $this.find(\"> .dropdown-menu\");\n        $this.toggleClass(\"dropup\", $menu.offset().top + $menu.height() > $window.scrollTop() + $window.height());\n    });\n    $el.find(\"input[name=pageno]\").keypress(function(e) {\n        if (e.which == 13) {\n            currentUrl.searchParams.append(this.name, parseInt(this.value));\n            window.location = currentUrl.toString();\n            return false;\n        }\n    });\n    if (!ew.IS_SCREEN_SM_MIN) {\n        $el.find(\".\" + ew.RESPONSIVE_TABLE_CLASS + \" [data-toggle='dropdown']\").parent().on(\"shown.bs.dropdown\", function() {\n            var $this = $(this),\n                $menu = $this.find(\".dropdown-menu\"),\n                div = $this.closest(\".\" + ew.RESPONSIVE_TABLE_CLASS)[0];\n            if (div.scrollHeight - div.clientHeight) {\n                var d = $menu.offset().top + $menu.outerHeight() - $(div).offset().top - div.clientHeight;\n                if (d > 0)\n                    $menu.css(ew.CSS_FLIP ? \"right\" : \"left\", \"100%\").css(\"top\", parseFloat($menu.css(\"top\")) - d);\n            }\n        });\n    }\n    initExportLinks(e);\n    initMultiSelectCheckboxes(e);\n\n    // Report\n    var $rpt = $el.find(\".ew-report\");\n    if ($rpt[0]) {\n        $rpt.find(\".card\").on(\"collapsed.lte.widget\", function() { // Fix min-height when .lte.widget is collapsed\n            var $card = $(this), $div = $card.closest(\"[class^='col-']\"), mh = $div.css(\"min-height\");\n            if (mh)\n                $div.data(\"min-height\", mh);\n            $div.css(\"min-height\", 0);\n        }).on(\"expanded.lte.widget\", function() { // Fix min-height when .lte.widget is expanded\n            var $card = $(this), $div = $card.closest(\"[class^='col-']\"), mh = $div.css(\"min-height\");\n            if (mh)\n                $div.css(\"min-height\", mh); // Restore min-height\n        });\n        // Group expand/collapse button\n        $rpt.find(\"span.ew-group-toggle\").on(\"click\", function() {\n            ew.toggleGroup(this);\n        });\n    }\n\n    // Show message\n    if (typeof ew.USE_JAVASCRIPT_MESSAGE != \"undefined\" && ew.USE_JAVASCRIPT_MESSAGE)\n        showMessage(e);\n}\n\n// Redirect by HTTP GET or POST\nexport function redirect(url, f, method) {\n    var ar = url.split(\"?\"),\n        params = new URLSearchParams(ar[1]);\n    params.set(ew.TOKEN_NAME_KEY, ew.TOKEN_NAME); // PHP\n    params.set(ew.ANTIFORGERY_TOKEN_KEY, ew.ANTIFORGERY_TOKEN); // PHP\n    if (sameText(method, \"post\")) { // POST\n        var $form = (f) ? $(f) : $(\"<form></form>\").appendTo(\"body\");\n        $form.attr({ action: ar[0], method: \"post\" });\n        params.forEach(function(value, key) {\n            $('<input type=\"hidden\">').attr({ name: key, value: sanitize(value) }).appendTo($form);\n        });\n        $form.submit();\n    } else { // GET\n        var search = params.toString();\n        window.location = ar[0] + (search ? \"?\" + search : \"\");\n    }\n}\n\n// Show/Hide password\nexport function togglePassword(e) {\n    var $btn = $(e.currentTarget), $input = $btn.closest(\".input-group\").find(\"input\"), $i = $btn.find(\"i\");\n    if ($input.attr(\"type\") == \"text\") {\n        $input.attr(\"type\", \"password\");\n        $i.toggleClass(\"fa-eye-slash fa-eye\");\n    } else if($input.attr(\"type\") == \"password\"){\n        $input.attr(\"type\", \"text\");\n        $i.toggleClass(\"fa-eye-slash fa-eye\");\n    }\n}\n\n// Export with charts\nexport function exportWithCharts(e, url, exportId, f) {\n    var el = e.target,\n        exportUrl = new URL(window.location.href),\n        ar = url.split(\"?\"),\n        $el = $(el), method = (f) ? \"post\" : \"get\";\n\n    exportId += \"_\" + Date.now();\n    exportUrl.pathname = ar[0];\n    exportUrl.search = ar[1];\n    exportUrl.searchParams.set(\"exportid\", exportId);\n\n    if ($el.is(\".dropdown-menu a\"))\n        $el = $el.closest(\".btn-group\");\n\n    var _export = function() {\n        var params = exportUrl.searchParams,\n            custom = params.get(\"custom\") == \"1\";\n        if (f && !custom) { // Not custom\n            var data = $(f).serialize(); // Add token\n            $.post(exportUrl, data, function(result) {\n                showMessage(result);\n            });\n        } else { // Custom\n            var exp = params.get(\"export\");\n            if (custom && [\"word\", \"excel\", \"pdf\", \"email\"].includes(exp)) {\n                if (exp == \"email\") {\n                    params.delete(\"export\"); // Remove duplicate export=email (exists in form)\n                    exportUrl.search = params.toString() + \"&\" + $(f).serialize();\n                }\n                $(\"iframe.ew-export\").remove();\n                $(\"<iframe></iframe>\").addClass(\"ew-export d-none\").attr(\"src\", exportUrl.toString()).appendTo($body.css(\"cursor\", \"wait\"));\n                setTimeout(function() { $body.css(\"cursor\", \"default\"); }, 5000);\n            } else if (exp == \"print\") {\n                redirect(exportUrl.toString(), f, method);\n            } else {\n                fileDownload(exportUrl.toString(), null);\n            }\n        }\n        return false;\n    };\n\n    var keys = Object.keys(window.exportCharts);\n    if (keys.length == 0) // No charts, just submit the form\n        return _export();\n\n    // Success callback\n    var success = function(result) {\n        if ($.isString(result))\n            result = parseJson(result);\n        if (result.success) {\n            _export();\n        } else {\n            ew.alert(result.error);\n        }\n    };\n\n    // Failure callback\n    var fail = function(xhr, status, error) {\n        ew.alert(error + \": \" + xhr.responseText); // Show detailed export error message\n    };\n\n    // Export charts\n    $body.css(\"cursor\", \"wait\");\n    var charts = [];\n    for (var i = 0; i < keys.length; i++) {\n        var id = keys[i], o = window.exportCharts[id],\n            params = \"exportfilename=\" + exportId + \"_\" + id + \".png|exportformat=png|exportaction=download|exportparameters=undefined\";\n        if (o && o.toBase64Image) // Chart.js chart\n            charts.push({ \"chart_engine\": \"Chart.js\", \"stream_type\": \"base64\", \"stream\": o.toBase64Image(), \"parameters\": params });\n    }\n    $.ajax({\n        \"url\": getApiUrl(ew.API_EXPORT_CHART_ACTION),\n        \"data\": { \"charts\": JSON.stringify(charts) },\n        \"cache\": false,\n        \"type\": \"POST\"\n    }).done(success).fail(fail).always(function() {\n        $body.css(\"cursor\", \"default\");\n    });\n    return false;\n}\n\n// Layout\nvar _fixLayoutHeightTimer;\n\n// Fix layout height\nexport function fixLayoutHeight() {\n    if (_fixLayoutHeightTimer)\n        _fixLayoutHeightTimer.cancel(); // Clear timer\n    _fixLayoutHeightTimer = $.later(50, null, function () {\n        var layout = $body.data(\"lte.layout\");\n        if (layout)\n            layout.fixLayoutHeight();\n    });\n}\n\n// Add user event handlers\nexport function addEventHandlers(tblVar) {\n    let fields = ew.events[tblVar];\n    if (fields) {\n        for (var [fldVar, events] of Object.entries(fields))\n            $('[data-table=' + tblVar + '][data-field=' + fldVar + ']').on(events);\n    }\n}","import $ from 'jquery';\n\n/**\n * Select2 decorator for results adapter\n */\nexport default function(Utils) {\n\n    class Select2CustomOption {\n\n        render(decorated) {\n            var $results = $(\n              '<div class=\"select2-results__options ' + this.options.get('containerClass') + '\" role=\"listbox\"></div>'\n            ); //***\n\n            if (this.options.get('multiple')) {\n              $results.attr('aria-multiselectable', 'true');\n            }\n\n            this.$results = $results;\n\n            return $results;\n        };\n\n        displayMessage(decorated, params) {\n            var escapeMarkup = this.options.get('escapeMarkup');\n\n            this.clear();\n            this.hideLoading();\n\n            var $message = $(\n              '<div role=\"alert\" aria-live=\"assertive\"' +\n              ' class=\"select2-results__option\"></div>'\n            ); //***\n\n            if (params.message.includes(\"<\") && params.message.includes(\">\")) { // HTML //***\n              $message.append(params.message);\n            } else {\n              var message = this.options.get('translations').get(params.message);\n              $message.append(\n                escapeMarkup(\n                  message(params.args)\n                )\n              );\n            }\n\n            $message[0].className += ' select2-results__message';\n\n            this.$results.append($message);\n        };\n\n        append(decorated, data) {\n            this.hideLoading();\n\n            var $options = [];\n\n            if (data.results == null || data.results.length === 0) {\n              if (this.$results.children().length === 0) {\n                if (this.$element.data(\"updating\")) {\n                  this.trigger('results:message', {\n                    message: '<div class=\"spinner-border spinner-border-sm text-primary ew-select-spinner\" role=\"status\"><span class=\"sr-only\">' + ew.language.phrase('Loading') + '</span></div> ' + ew.language.phrase('Loading')\n                  });\n                  this.$element.one(\"updatedone\", () => this.$element.select2(\"close\").select2(\"open\"));\n                } else {\n                  this.trigger('results:message', {\n                    message: 'noResults'\n                  });\n                }\n              }\n\n              return;\n            }\n\n            data.results = this.sort(data.results);\n\n            //***\n            var cols = this.options.get('columns'),\n                len = data.results.length,\n                $row = this.$results.find(\".\" + this.options.get('rowClass')).last();\n\n            for (var d = 0; d < data.results.length; d++) {\n                var item = data.results[d];\n\n                var $option = this.option(item);\n\n                if (!$row.length || $row.children().length == cols) { // Add new row\n                    $row = $('<div class=\"' + this.options.get('rowClass') + '\"></div>');\n                    this.$results.append($row);\n                }\n\n                $row.append($option);\n\n                if (d == len - 1) { // Last\n                    var cnt = cols - $row.children().length;\n                    for (var i = 0; i < cnt ; i++)\n                        $row.append('<div class=\"' + this.options.get('colClass') + '\"></div>');\n                }\n            }\n\n        };\n\n        option(decorated, data) {\n            // var option = document.createElement('li');\n            var option = document.createElement('div'); //***\n            option.className = 'select2-results__option ' + this.options.get('cellClass'); //***\n\n            var attrs = {\n              'role': 'option',\n              'aria-selected': 'false'\n            };\n\n            var matches = window.Element.prototype.matches ||\n              window.Element.prototype.msMatchesSelector ||\n              window.Element.prototype.webkitMatchesSelector;\n\n            if ((data.element != null && matches.call(data.element, ':disabled')) ||\n                (data.element == null && data.disabled)) {\n              delete attrs['aria-selected'];\n              attrs['aria-disabled'] = 'true';\n            }\n\n            if (data.id == null) {\n              delete attrs['aria-selected'];\n            }\n\n            if (data._resultId != null) {\n              option.id = data._resultId;\n            }\n\n            if (data.title) {\n              option.title = data.title;\n            }\n\n            // if (data.children) { //***\n            //   attrs.role = 'group';\n            //   attrs['aria-label'] = data.text;\n            //   delete attrs['aria-selected'];\n            // }\n\n            for (var attr in attrs) {\n              var val = attrs[attr];\n\n              option.setAttribute(attr, val);\n            }\n\n            // if (data.children) { //***\n            //   var $option = $(option);\n\n            //   var label = document.createElement('strong');\n            //   label.className = 'select2-results__group';\n\n            //   var $label = $(label);\n            //   this.template(data, label);\n\n            //   var $children = [];\n\n            //   for (var c = 0; c < data.children.length; c++) {\n            //     var child = data.children[c];\n\n            //     var $child = this.option(child);\n\n            //     $children.push($child);\n            //   }\n\n            //   var $childrenContainer = $('<ul></ul>', {\n            //     'class': 'select2-results__options select2-results__options--nested'\n            //   });\n\n            //   $childrenContainer.append($children);\n\n            //   $option.append(label);\n            //   $option.append($childrenContainer);\n            // } else {\n              this.template(data, option);\n            // }\n\n            Utils.StoreData(option, 'data', data);\n\n            return option;\n        };\n\n    }\n\n    return Select2CustomOption;\n}","import $ from 'jquery';\nimport MultiPage from \"./multipage\";\nimport * as Validators from './Validators';\nimport Form from \"./Form\";\nimport * as functions from './functions';\n\new.IS_SCREEN_SM_MIN = window.matchMedia(\"(min-width: 768px)\").matches; // Should matches $screen-sm-min\new.MOBILE_DETECT = new MobileDetect(window.navigator.userAgent);\new.IS_MOBILE = !!ew.MOBILE_DETECT.mobile();\new.IS_IE = ew.MOBILE_DETECT.version(\"MSIE\") > 0;\n\n// Charts\nwindow.exportCharts = {}; // Per window\nwindow.drillDownCharts = {}; // Per window\n\n// Init spinner\new.addSpinner();\n\n// Extend\nObject.assign(ew, { MultiPage, Form, Validators }, functions);\n\nvar $document = $(document);\n\n// Init document\nloadjs.ready(\"load\", function () {\n\t$.views.settings.debugMode(ew.DEBUG);\n\tew.setSessionTimer();\n\tew.initPage();\n\t$(\"#ew-modal-dialog\").on(\"load.ew\", ew.initPage);\n\t$(\"#ew-add-opt-dialog\").on(\"load.ew\", ew.initPage);\n\tvar hash = ew.currentUrl.searchParams.get(\"hash\");\n\tif (hash)\n\t\t$(\"html, body\").animate({ scrollTop: $(\"#\" + hash).offset().top }, 800);\n\tew.removeSpinner();\n\t$document.trigger(\"load\");\n});\n\n// Default \"addoption\" event (fired before adding new option to selection list)\n$document.on(\"addoption\", function (e, args) {\n\tvar row = args.data; // New row to be validated\n\tvar arp = args.parents; // Parent field values\n\tfor (var i = 0, cnt = arp.length; i < cnt; i++) { // Iterate parent values\n\t\tvar p = arp[i];\n\t\tif (!p.length) // Empty parent\n\t\t\t//continue; // Allow\n\t\t\treturn args.valid = false; // Disallow\n\t\tvar val = row[\"ff\" + ((i > 0) ? i + 1 : \"\")]; // Filter fields start from the 6th field\n\t\tif (!$.isUndefined(val) && !p.includes(String(val))) // Filter field value not in parent field values\n\t\t\treturn args.valid = false; // Returns false if invalid\n\t}\n});\n\n// Fix z-index of multiple modals\n$document.on(\"show.bs.modal\", \".modal\", function () {\n\tvar zIndex = 1050 + $(\".modal:visible\").length;\n\t$(this).css(\"z-index\", zIndex);\n\tsetTimeout(function () {\n\t\t$(\".modal-backdrop\").not(\".modal-stack\").css(\"z-index\", zIndex - 1).addClass(\"modal-stack\");\n\t}, 0);\n});\n\n// Fix scrolling of multiple modals\n$document.on(\"hidden.bs.modal\", \".modal\", function () {\n\t$(\".modal:visible\").length && $(\"body\").addClass(\"modal-open\");\n});","import $ from \"jquery\";\r\n\r\nexport default function MultiPage(formid) {\r\n\tvar self = this;\r\n\tthis.$form = null;\r\n\tthis.formID = formid;\r\n\tthis.pageIndex = 1;\r\n\tthis.maxPageIndex = 0;\r\n\tthis.minPageIndex = 0;\r\n\tthis.pageIndexes = [];\r\n\tthis.$pages = null;\r\n\tthis.$collapses = null;\r\n\tthis.isTab = false; // Is tabs\r\n\tthis.isCollapse = false; // Is collapses (accordion)\r\n\tthis.lastPageSubmit = false; // Enable submit button for the last page only\r\n\tthis.hideDisabledButton = false; // Hide disabled submit button\r\n\tthis.hideInactivePages = false; // Hide inactive pages\r\n\tthis.lockTabs = false; // Set inactive tabs as disabled\r\n\tthis.hideTabs = false; // Hide all tabs\r\n\tthis.showPagerTop = false; // Show pager at top\r\n\tthis.showPagerBottom = false; // Show pager at bottom\r\n\tthis.pagerTemplate = '<nav><ul class=\"pagination\"><li class=\"page-item previous ew-prev\"><a href=\"#\" class=\"page-link\"><span class=\"icon-prev\"></span> {Prev}</a></li><li class=\"page-item next ew-next\"><a href=\"#\" class=\"page-link\">{Next} <span class=\"icon-next\"></span></a></li></ul></nav>'; // Pager template\r\n\r\n\t// \"show\" handler (for disabled tabs)\r\n\tvar _show = function(e) {\r\n\t\te.preventDefault();\r\n\t};\r\n\r\n\t// Set properties\r\n\tvar _properties = [\"lastPageSubmit\", \"hideDisabledButton\", \"hideInactivePages\", \"lockTabs\",\r\n\t\t\"hideTabs\", \"showPagerTop\", \"showPagerBottom\", \"pagerTemplate\"];\r\n\r\n\tthis.set = function() {\r\n\t\tif (arguments.length == 1 && $.isObject(arguments[0])) {\r\n\t\t\tvar obj = arguments[0];\r\n\t\t\tfor (var i in obj) {\r\n\t\t\t\tvar p = i[0].toLowerCase() + i.substr(1); // Camel case\r\n\t\t\t\tif (_properties.includes(p))\r\n\t\t\t\t\tthis[p] = obj[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// DOM loaded\r\n\tthis.init = function() {\r\n\t\tvar tpl = this.pagerTemplate.replace(/\\{prev\\}/i, ew.language.phrase(\"Prev\")).replace(/\\{next\\}/i, ew.language.phrase(\"Next\"));\r\n\t\tif (this.isTab) {\r\n\t\t\tif (this.showPagerTop)\r\n\t\t\t\tthis.$pages.closest(\".tabbable, .ew-nav-tabs\").before(tpl);\r\n\t\t\tif (this.showPagerBottom)\r\n\t\t\t\tthis.$pages.closest(\".tabbable, .ew-nav-tabs\").after(tpl);\r\n\t\t\tthis.$form.find(\".ew-prev\").click(function(e) {\r\n\t\t\t\tself.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent()\r\n\t\t\t\t\t.prev(\":has([data-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\")\r\n\t\t\t\t\t.find(\"[data-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\tthis.$form.find(\".ew-next\").click(function(e) {\r\n\t\t\t\tself.$pages.off(\"show.bs.tab\", _show).filter(\".active\").parent()\r\n\t\t\t\t\t.next(\":has([data-toggle=tab]:not(.ew-hidden):not(.ew-disabled))\")\r\n\t\t\t\t\t.find(\"[data-toggle=tab]\").toggleClass(\"disabled d-none\", false).click();\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\tif (this.hideTabs)\r\n\t\t\t\tthis.$form.find(\".ew-multi-page > .tabbable > .nav-tabs, .ew-multi-page > .ew-nav-tabs > .nav-tabs\").hide();\r\n\t\t} else if (this.isCollapse) {\r\n\t\t\tif (this.showPagerTop)\r\n\t\t\t\tthis.$collapses.closest(\".ew-accordion\").before(tpl);\r\n\t\t\tif (this.showPagerBottom)\r\n\t\t\t\tthis.$collapses.closest(\".ew-accordion\").after(tpl);\r\n\t\t\tthis.$form.find(\".ew-prev\").click(function(e) {\r\n\t\t\t\tself.$pages.closest(\".card\").filter(\":has(.collapse.show)\")\r\n\t\t\t\t\t.prev(\":has([data-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\")\r\n\t\t\t\t\t.toggleClass(\"disabled d-none\", false)\r\n\t\t\t\t\t.find(\"[data-toggle=collapse]\").click();\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\tthis.$form.find(\".ew-next\").click(function(e) {\r\n\t\t\t\tself.$pages.closest(\".card\").filter(\":has(.collapse.show)\")\r\n\t\t\t\t\t.next(\":has([data-toggle=collapse]:not(.ew-hidden):not(.ew-disabled))\")\r\n\t\t\t\t\t.toggleClass(\"disabled d-none\", false)\r\n\t\t\t\t\t.find(\"[data-toggle=collapse]\").click();\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t}\r\n\t\tthis.pageShow();\r\n\t}\r\n\r\n\t// Page show\r\n\tthis.pageShow = function() {\r\n\t\tif (this.isTab) {\r\n\t\t\tif (this.lockTabs)\r\n\t\t\t\tthis.$pages.on(\"show.bs.tab\", _show);\r\n\t\t\tthis.$pages.each(function() {\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tif (self.hideInactivePages)\r\n\t\t\t\t\t$this.toggleClass(\"d-none\", !$this.hasClass(\"active\"));\r\n\t\t\t\tif (self.lockTabs)\r\n\t\t\t\t\t$this.toggleClass(\"disabled\", !$this.hasClass(\"active\"));\r\n\t\t\t});\r\n\t\t} else if (this.isCollapse) {\r\n\t\t\tthis.$pages.closest(\".card\").each(function() {\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tif (self.hideInactivePages)\r\n\t\t\t\t\t$this.toggleClass(\"d-none\", !$this.find(\".collapse.show\")[0]);\r\n\t\t\t});\r\n\t\t}\r\n\t\tvar disabled = this.lastPageSubmit && this.pageIndex != this.maxPageIndex;\r\n\t\tvar $btn = this.$form.closest(\".content, .modal-content\").find(\"#btn-action, button.ew-submit\").prop(\"disabled\", disabled).toggle(!this.hideDisabledButton || !disabled);\r\n\t\t$(\".ew-captcha\").toggle($btn.is(\":visible:not(:disabled)\")); // Re-captcha uses class \"disabled\", not \"disabled\" property.\r\n\t\tdisabled = this.pageIndex <= this.minPageIndex;\r\n\t\tthis.$form.find(\".ew-prev\").toggleClass(\"disabled\", disabled);\r\n\t\tdisabled = this.pageIndex >= this.maxPageIndex;\r\n\t\tthis.$form.find(\".ew-next\").toggleClass(\"disabled\", disabled);\r\n\t}\r\n\r\n\t// Go to page by index\r\n\tthis.gotoPage = function(i) {\r\n\t\tif (i <= 0 || i < this.minPageIndex || i > this.maxPageIndex)\r\n\t\t\treturn;\r\n\t\tif (this.pageIndex != i) {\r\n\t\t\tvar $page = this.$pages.eq(i - 1);\r\n\t\t\tif (this.isTab) {\r\n\t\t\t\tif ($page.is(\":not(.d-none):not(.disabled)\"))\r\n\t\t\t\t\t$page.click();\r\n\t\t\t\telse\r\n\t\t\t\t\t$page.parent().next(\":has([data-toggle=tab]):not(.d-none):not(.disabled)\")\r\n\t\t\t\t\t\t.find(\"[data-toggle=tab]\").toggleClass(\"disabled\", false).click();\r\n\t\t\t} else if (this.isCollapse) {\r\n\t\t\t\tvar $p = $page.closest(\".card\");\r\n\t\t\t\tif ($p.is(\":not(.d-none)\"))\r\n\t\t\t\t\t$page.click();\r\n\t\t\t\telse\r\n\t\t\t\t\t$p.next(\":has([data-toggle=collapse]):not(.d-none)\").find(\"[data-toggle=collapse]\").click();\r\n\t\t\t}\r\n\t\t\tthis.pageIndex = i;\r\n\t\t}\r\n\t}\r\n\r\n\tthis.gotoPageByIndex = this.gotoPage;\r\n\r\n\t// Go to page by element\r\n\tthis.gotoPageByElement = function(el) {\r\n\t\tthis.gotoPage(parseInt($(el).data(\"page\"), 10) || -1);\r\n\t}\r\n\r\n\t// Go to page by element's id or name or data-field attribute\r\n\tthis.gotoPageByElementId = function(id) {\r\n\t\tvar $el = this.$form.find(\"[data-page]\").filter(\"[id='\" + id + \"'],[name='\" + id + \"'],[data-field='\" + id + \"']\");\r\n\t\tthis.gotoPageByElement($el);\r\n\t}\r\n\r\n\t// Toggle page\r\n\tthis.togglePage = function(i, show) {\r\n\t\tif (this.isTab) {\r\n\t\t\tthis.$pages.eq(i - 1).toggleClass(\"d-none\", !show);\r\n\t\t} else if (this.isCollapse) {\r\n\t\t\tthis.$pages.eq(i - 1).closest(\".card\").toggle(\"d-none\", !show);\r\n\t\t}\r\n\t}\r\n\r\n\t// Render\r\n\tthis.render = function() {\r\n\t\tthis.$form = $(\"#\" + formid);\r\n\t\tthis.pageIndexes = this.$form.find(\"[data-page]\").map(function() {\r\n\t\t\tvar index = parseInt($(this).data(\"page\"), 10);\r\n\t\t\treturn (index > 0) ? index : null;\r\n\t\t}).get();\r\n\t\tthis.pageIndexes.sort(function(a, b) {\r\n\t\t\treturn a - b;\r\n\t\t});\r\n\t\tthis.minPageIndex = this.pageIndexes[0];\r\n\t\tthis.maxPageIndex = this.pageIndexes[this.pageIndexes.length - 1];\r\n\t\tvar $tabs = this.$form.find(\"[data-toggle=tab]\");\r\n\t\tif ($tabs[0]) {\r\n\t\t\tthis.$pages = $tabs;\r\n\t\t\tthis.isTab = true;\r\n\t\t\t$tabs.on(\"shown.bs.tab\", function(e) {\r\n\t\t\t\tself.pageIndex = $tabs.index(e.target) + 1;\r\n\t\t\t\tself.pageShow();\r\n\t\t\t\t$($(this).attr(\"href\")).find(\".ew-google-map\").each(function() {\r\n\t\t\t\t\tvar m = ew.googleMaps[this.id];\r\n\t\t\t\t\tif (m && m[\"map\"]) {\r\n\t\t\t\t\t\tgoogle.maps.event.trigger(m[\"map\"], \"resize\");\r\n\t\t\t\t\t\tm[\"map\"].setCenter(m[\"latlng\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthis.pageIndex = $tabs.index($tabs.parent(\".active\")) + 1;\r\n\t\t} else {\r\n\t\t\tthis.$collapses = this.$form.find(\"[data-toggle=collapse]\");\r\n\t\t\tif (this.$collapses[0]) {\r\n\t\t\t\tthis.$pages = this.$collapses;\r\n\t\t\t\tthis.isCollapse = true;\r\n\t\t\t\tvar $bodies = this.$collapses.closest(\".card-header\").next();\r\n\t\t\t\t$bodies.on(\"shown.bs.collapse\", function(e) {\r\n\t\t\t\t\tself.pageIndex = $bodies.index(e.target) + 1;\r\n\t\t\t\t\tself.pageShow();\r\n\t\t\t\t\t$(this).find(\".ew-google-map\").each(function() {\r\n\t\t\t\t\t\tvar m = ew.googleMaps[this.id];\r\n\t\t\t\t\t\tif (m && m[\"map\"]) {\r\n\t\t\t\t\t\t\tgoogle.maps.event.trigger(m[\"map\"], \"resize\");\r\n\t\t\t\t\t\t\tm[\"map\"].setCenter(m[\"latlng\"]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tthis.pageIndex = $bodies.index($bodies.hasClass(\"show\")) + 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\t$(function() {\r\n\t\t\tself.init();\r\n\t\t});\r\n\t}\r\n}","import $ from 'jquery';\n\n// Extend jQuery\n$.extend({\n\tisBoolean: function(o) {\n\t\treturn typeof o === 'boolean';\n\t},\n\tisNull: function(o) {\n\t\treturn o === null;\n\t},\n\tisNumber: function(o) {\n\t\treturn typeof o === 'number' && isFinite(o);\n\t},\n\tisObject: function(o) {\n\t\treturn (o && (typeof o === 'object' || this.isFunction(o))) || false;\n\t},\n\tisString: function(o) {\n\t\treturn typeof o === 'string';\n\t},\n\tisUndefined: function(o) {\n\t\treturn typeof o === 'undefined';\n\t},\n\tisValue: function(o) {\n\t\treturn (this.isObject(o) || this.isString(o) || this.isNumber(o) || this.isBoolean(o));\n\t},\n\tisDate: function(o) {\n\t\treturn this.type(o) === 'date' && o.toString() !== 'Invalid Date' && !isNaN(o);\n\t},\n\tlater: function(when, o, fn, data, periodic) {\n\t\twhen = when || 0;\n\t\to = o || {};\n\t\tvar m = fn, d = data, f, r;\n\t\tif (this.isString(fn))\n\t\t\tm = o[fn];\n\t\tif (!m)\n\t\t\treturn;\n\t\tif (!this.isUndefined(data) && !this.isArray(d))\n\t\t\td = [data];\n\t\tf = function() {\n\t\t\tm.apply(o, d || []);\n\t\t};\n\t\tr = (periodic) ? setInterval(f, when) : setTimeout(f, when);\n\t\treturn {\n\t\t\tinterval: periodic,\n\t\t\tcancel: function() {\n\t\t\t\tif (this.interval) {\n\t\t\t\t\tclearInterval(r);\n\t\t\t\t} else {\n\t\t\t\t\tclearTimeout(r);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n});","import $ from 'jquery';\n\n/**\n * jQuery.fields() plugin\n *\n * @param {string|undefined} fldvar - Field variable name or undefined\n *  If field variable name, returns jQuery object of the specified field element(s).\n *  If unspecified, returns object of jQuery objects of all fields.\n * @returns jQuery object\n */\n$.fn.fields = function(fldvar) { // Note: fldvar has NO \"x_\" prefix\n    var rec = {},\n        id = this.attr(\"id\"),\n        obj = this[0],\n        m = id.match(/^[xy](\\d*)_/),\n        f, tbl, infix;\n    if (m) { // \"this\" is input element\n        f = ew.getForm(obj); // form\n        tbl = this.data(\"table\"); // table var\n        infix = m[1]; // row index\n    } else if (obj && obj.htmlForm) { // \"this\" is form\n        f = obj.$element; // form\n        tbl = obj.id.replace(new RegExp(\"^f|\" + obj.pageId + \"$\", \"g\"), \"\"); // table var\n        infix = $(obj.htmlForm).data(\"rowindex\"); // row index\n    }\n    var selector = \"[data-table\" + (tbl ? \"=\" + tbl : \"\") + \"][data-field\" + (fldvar ? \"=x_\" + fldvar : \"\") + \"]\";\n    if ($.isValue(infix))\n        selector += \"[name^=x\" + infix + \"_]\";\n    if (f && selector) {\n        $(f).find(selector).each(function() {\n            var key = this.getAttribute(\"data-field\").substr(2), name = this.getAttribute(\"name\");\n            key = (/^y_/.test(name)) ? \"y_\" + key : key; // Use \"y_fldvar\" as key for 2nd search input\n            rec[key] = (rec[key]) ? rec[key].add(this) : $(this); // Create jQuery object for each field\n        });\n    }\n    return (fldvar) ? rec[fldvar] : rec;\n};\n$.fn.extend({\n    // Get jQuery object of the row (<div> or <tr>)\n    row: function() {\n        var $row = this.closest(\"#r_\" + this.data(\"field\")?.substr(2));\n        if (!$row[0])\n            $row = this.closest(\".ew-table > tbody > tr\"); // Grid page\n        return $row;\n    },\n    // Show/Hide field\n    visible: function(v) {\n        var $p = this.closest(\"#r_\" + this.data(\"field\")?.substr(2)); // Find the row\n        if (!$p[0])\n            $p = this.closest(\"[id^=el]\"); // Find the span\n        if (typeof(v) != \"undefined\") {\n            $p.toggle(v);\n            return this;\n        } else {\n            return $el.is(\":visible\");\n        }\n    },\n    // Get/Set field \"readonly\" attribute\n    // Note: This attribute is ignored if the value of the type attribute is hidden, range, color, checkbox, radio, file, or a button type\n    readonly: function(v) {\n        if (typeof(v) != \"undefined\") {\n            this.prop(\"readOnly\", v);\n            return this;\n        } else {\n            return this.prop(\"readOnly\");\n        }\n    },\n    // Get/Set field \"disabled\" attribute\n    // Note: A disabled control's value isn't submitted with the form\n    disabled: function(v) {\n        if (typeof(v) != \"undefined\") {\n            this.prop(\"disabled\", v);\n            return this;\n        } else {\n            return this.prop(\"disabled\");\n        }\n    },\n    // Get/Set field value(s)\n    // Note: Return array if select-multiple\n    value: function(v) {\n        var type = this.attr(\"type\");\n        if (typeof(v) != \"undefined\") {\n            if (!Array.isArray(v))\n                v = [v];\n            var type = this.attr(\"type\");\n            var el = (type == \"radio\" || type == \"checkbox\") ? this.get() : this[0];\n            if (ew.isHiddenTextArea(this)) {\n                this.val(v).data(\"editor\").save();\n            } else {\n                ew.selectOption(el, v);\n                if (this.hasClass(\"select2-hidden-accessible\")) { // Select2\n                    this.trigger(\"change\");\n                }\n            }\n            return this;\n        } else {\n            if (type == \"checkbox\") {\n                var val = ew.getOptionValues(this.get());\n                return (this.length == 1) ? val.join() : val;\n            } else if (type == \"radio\") {\n                return ew.getOptionValues(this.get()).join();\n            } else if (ew.isHiddenTextArea(this)) {\n                this.data(\"editor\").save();\n                return this.val();\n            } else {\n                return this.val();\n            }\n        }\n    },\n    // Get field value as number\n    toNumber: function() {\n        return ew.parseNumber(this.value());\n    },\n    // Get field value as moment object\n    toDate: function() {\n        return ew.parseDate(this.value(), this.data(\"format\"));\n    },\n    // Get field value as native Date object\n    toJsDate: function() {\n        return ew.parseDate(this.value(), this.data(\"format\")).toDate();\n    }\n});","import $ from 'jquery';\r\n\r\n// Init Treeview later\r\n$(window).off(\"load.lte.treeview\");\r\n\r\n// Treeview\r\nvar Treeview = adminlte.Treeview;\r\nTreeview.prototype._toggle = Treeview.prototype.toggle;\r\nTreeview.prototype.toggle = function toggle(event) {\r\n\tvar $relativeTarget = $(event.currentTarget), treeviewMenu = $relativeTarget.next(),\r\n\t\thref = $relativeTarget.attr(\"href\"), $text = $(event.target).closest(\".menu-item-text\");\r\n\tif (!treeviewMenu.is(\".nav-treeview\") || $text[0] && href && href != \"#\" && href != \"javascript:void(0);\") // Menu text with href\r\n\t\treturn;\r\n\tthis._toggle(event);\r\n};\r\n\r\n// Dropdown menu parent item with href // Override AdminLTE\r\n$(\"ul.dropdown-menu [data-toggle=dropdown]\").on(\"click\", function(e) {\r\n\tvar href = $(this).attr(\"href\");\r\n\tif (href && href != \"#\" && e.target.nodeName == \"SPAN\")\r\n\t\twindow.location = href;\r\n});"]}